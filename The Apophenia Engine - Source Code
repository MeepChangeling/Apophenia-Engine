%SystemRoot%\System32\chcp.com 437 >nul

chcp 65001
chcp 1200

cls

@echo off
SETLOCAL EnableDelayedExpansion

title The Apophenia Engine: History Generator
set "storage=%~dp0"
cd /D "%~dp0data"

if not exist "%storage%saves" (
	echo WARNING!
	echo.
	echo Apophenia Engine missing required configuration files.
	echo.
	echo Run the Configuration Tool to generate required files.
	echo.
	echo Press any key to exit.
	echo.
	pause
	exit /b
)

:readygen
echo Apophenia Engine primed and ready.
echo.
echo Available worlds are:
echo.
dir "%storage%saves" /A:D /B
echo.
echo Type the name of the world to generate, then press enter.
echo.
set /p univerce=


set "worlddir=%storage%saves\%univerce%"

if not exist "%worlddir%" mkdir "%worlddir%"
set "savedir=%worlddir%"
if not exist "%worlddir%\Nations" mkdir "%worlddir%\Nations"
if not exist "%worlddir%\Nation Data" mkdir "%worlddir%\Nation Data"


cd /D "%worlddir%"
set "cmd=findstr /R /N "^^" "rootnations.txt" | find /C ":""
for /f %%k in ('!cmd!') do set totalnations=%%k
cd /D "%~dp0data"



::echo Nation,Military Score,Expansion Capability,Infrastructure Development,Agricultural Power,Cultural Development,Economic Power,Arcane Power > "%savedir%\Nation Score Spreadsheet.csv"

:: ---- CONFIG STUFF ----


(
set /p majpowspi=
set /p majpowdei=
set /p minpowspi=
set /p minpowdei=
set /p minornatregions=
set /p majornatregions=
)<genconfig.txt


for /f "delims== tokens=1,2" %%G in (genconfig.txt) do set %%G=%%H

set "theage=Foundings"
set subloopcount=1
set year=1
set cyclecount=1

if exist "%worlddir%\cyclesgenerated.txt" (
	echo Previous Generation Detected!
	echo.
	echo Are you attempting to resume from a crash, or create more history?
	echo.
	echo If you are, press 1. If you are not, press 2.
	echo.
	set /p crashhandle=
	if "!crashhandle!"=="2" (
		cls
		echo If you want to start over from scratch, you will need to clear the save directory of all non-config files.
		echo.
		echo Exit now if you do not want to overwrite the existing History and Timeline files with fresh data while keeping the Nation data intact.
		echo.
		pause
		goto youwerewarned
	)
	if "!crashhandle!"=="1" (
		(set /p cyclecount=)<"%worlddir%\cyclesgenerated.txt"
		set /a cyclecount=!cyclecount!+1
		echo Your world will resume history starting at the !cyclecount! cycle. If you are resuming from a crash, there will be a gap in your history as this program cannot pick up where it left off in generation.
		echo.
		echo The recommended way to fill the hole in your timeline is to come up with a great calamity, or attribute the loss of records to few records surviving the ages.
		echo.
		echo You will be sent to the Cycle entry screen. Simply enter a number of cycles to generate greater than !cyclecount! to resume history generation.
		pause
		set resumegenflag=1
		goto bypasscrashresume
	)
)

:youwerewarned
set cyclecount=1
:bypasscrashresume
cls
echo How many years of history are desired?
echo.
echo Enter the number of years in 50 year chunks. IE, 100 years = 2.
echo.
set /p numloops=



if "%resumegenflag%" neq "1" call :docprimer

:cycleloop

::Sets a flag that makes the rest of the script run correctly at the start of each cycle.
set newnationcount=0

::This ensures any nations created last cycle get added to the generation list on the current cycle, UNLESS it is the first cycle, in which case it does nothing. This is to prevent errors. Do not make this run on the first cycle.
if "%cyclecount%" geq "2" (
	cd /D "!worlddir!"
	type "newrootnations.txt" >> "rootnations.txt"
	del /Q "newrootnations.txt"
)
cls


::This allows you to resume after a crash or halt.
cd /D "%worlddir%"
(echo %cyclecount%)>"cyclesgenerated.txt"
cd /D "%~dp0data"




:: MAGIC SCRIPT CONTROLLER! DO NOT DISTIRB!
:: VVV                                  VVV

set /a heartoflorkan=0
for /F "tokens=* delims=" %%a in ('Type "%worlddir%\rootnations.txt"') do (
	set /a heartoflorkan+=1
	set "output[!heartoflorkan!]=%%a"
)
For /L %%i in (1,1,%heartoflorkan%) Do (
	set "nationroot=!output[%%i]!"
	call :ageofdiscovery
)

:: ^^^                                  ^^^
:: MAGIC SCRIPT CONTROLLER! DO NOT DISTIRB!


::This advances the system to the next cycle, if you have allowed it to generate multiple cycles. Otherwise, this terminates the program.
call :advcyclecount
set subloopcount=1
if "%cyclecount%" gtr "%numloops%" (
	call :nationscorefinisher
	cd /D "!savedir!"
	!SystemRoot!\explorer.exe "!worlddir!"
	exit
	) else (
	goto cycleloop
	)

::This exit command prevents the system from executing additional loops on accident if the above ELSE command fails for any reason.
exit /b


:: --- Age of Discovery Table ---

:ageofdiscovery
::this flag ensures that nations get generated correctly in the event a previous nation discovered a new nation, and the flag which sets the code to make a new nation didn't get set back to 0 for any reason.
set newkingdomfounding=0
call :nationloader

if "%nattypeflag%"=="1" (
	set "polyeventnum=!majpowspi!"
	set "nationeventnum=!majpowdei!"
	set "numregionstomake=!majornatregions!
)
if "%nattypeflag%"=="0" (
	set "polyeventnum=%minpowspi%"
	set "nationeventnum=%minpowdei%"
	set "numregionstomake=!minornatregions!"
)
if "%nattypeflag%"=="3" (
	set "polyeventnum=!majpowspi!"
	set "nationeventnum=!majpowdei!"
	set "numregionstomake=!majornatregions!
)


cls
echo Step %subloopcount% / %totalnations% of cycle %cyclecount% / %numloops%
echo.
echo Recording history for the %nationname%
set eventyear=%cyclecount%
call :numberappender
set age=%numeral%
set remainingcyleyears=50
call :nationmodclear
set "thirdhero="
set "secondhero="
set "firsthero="
set "finalheros="


if not exist "%worlddir%\Nations\%nationname%" mkdir "%worlddir%\Nations\%nationname%"
set "recorddir=%worlddir%\Nations\%nationname%"
if not exist "%recorddir%\Settlments\" mkdir "%recorddir%\Settlments\"


call :archatect

if "%cyclesexisted%"=="0" (
	echo Nation,Military Score,Expansion Capability,Infrastructure Development,Agricultural Power,Cultural Development,Economic Power,Arcane Power > "%worlddir%\Nation Data\%nationname% - Nation Score Spreadsheet.csv"
	call :regionbuilder
	type NUL > "!recorddir!\!nationname! - Settlments List.txt"
	set firstcityflag=1
	call :townfounder
	echo !cityname! ^(Capitol^)>> "!recorddir!\!nationname! - Settlments List.txt"
	set firstcityflag=0
	set secondcityflag=1
	call :townfounder
	echo !cityname!>> "!recorddir!\!nationname! - Settlments List.txt"
	set secondcityflag=0
	set thirdcityflag=1
	call :townfounder
	echo !cityname!>> "!recorddir!\!nationname! - Settlments List.txt"
	set thirdcityflag=0
)

call :economysetup
call :heromaker
set "firsthero=the %hero1% %firstname% %lastname%"
echo %firsthero%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"
call :heromaker
set "secondhero=the %hero1% %firstname% %lastname%"
echo %secondhero%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"
call :heromaker
set "thirdhero=the %hero1% %firstname% %lastname%"
echo %secondhero%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"
set "finalheros=The %nationadj%'s great heros of this cycle were, %firsthero%, %secondhero%, and %thirdhero%."
call :empireexcells
if "%cyclesexisted%"=="0" (call :nationscoresetup) else (call :nationscorecalc)

call :fashionpoliece
call :legalchalanges
call :dynasty
call :artandstuff

:: This begins the write-to-document process for the nations, creating the header for them.

(
	echo \pard\sa200\sl276\slmult1\f1\fs28 !nationname! - Age of !theage!: !age! Cycle\par
	echo \b0\fs20\par
	echo \b Politics\b0\par
) >> "%savedir%\%univerce% Timeline.rtf"


:: This section below determines if the nation ends, and why. Its located here to bypass generation of events if the nation collapses. A nation can only end after it's existed for at least 3 cycles, with a 20% chance every cycle after its 3rd to fall. Additionally, if a nation's type flag is set to 3, it can not fall, ever.

call :roll1d100
if "%cyclesexisted%" gtr "3" if "%roll%" gtr "79" if "%nattypeflag%" neq "3" (
	set fetchedfile=fallenstatereasons
	call :filefetch
	set "reason=!name!"
	call :yearcounter
	set /a timelasted=%cyclesexisted%*50
	echo \tab In the !numeral2! year of the !age! Cycle, the !nationname! entered into a crisis when !reason!. This caused the colapse of the !nationname!. The !nationshort! lasted for %timelasted%.\par >> "!savedir!\!univerce! Timeline.rtf"
	set /a lines=%cyclecount%
	echo Total,=SUM^(B2:B%lines%^),=SUM^(C2:C%lines%^),=SUM^(D2:D%lines%^),=SUM^(E2:E%lines%^),=SUM^(F2:F%lines%^),=SUM^(G2:G%lines%^),=SUM^(H2:H%lines%^) >> " "%savedir%\Nation Data\%nationname% - Nation Score Spreadsheet.csv"
	call :roll1d100B
	if "!roll2!" leq "50" (
		set reformflag=1
		call :deadnationamerbypass
		set reformflag=0
		ROBOCOPY "!worlddir!\Nations\!nationname!" "!worlddir!\Nations\!newnationname!" /mir
		cd /d "!worlddir!\Nations\!newnationname!\"
		ren "!nationname! - Settlments List.txt" "!newnationname! - Settlments List.txt"
		ren "!nationname! - Historical Figures.txt" "!newnationname! - Historical Figures.txt"
		ren "!nationname! - Artifacts List.txt" "!newnationname! - Artifacts List.txt"
		ren "!nationname! - Hive Neighbors.txt" "!newnationname! - Hive Neighbors.txt"
		ren "!nationname! - Ruins List.txt" "!newnationname! - Ruins List.txt"
		ren "!nationname! - Bandit Neighbors.txt" "!newnationname! - Bandit Neighbors.txt"
		ren "!nationname! - Monster Neighbors.txt" "!newnationname! - Monster Neighbors.txt"
		ren "!nationname! - Hive Neighbors.txt" "!newnationname! - Hive Neighbors.txt"
		ren "!nationname! - Mage Neighbors.txt" "!newnationname! - Mage Neighbors.txt"
		ren "!nationname! - Cult Neighbors.txt" "!newnationname! - Cult Neighbors.txt"
		ren "!nationname! - Minor Neighbors.txt" "!newnationname! - Minor Neighbors.txt"
		ren "!nationname! - Regions.txt" "!newnationname! - Regions.txt"
		ren "!nationname! - Materials List.txt" "!newnationname! - Materials List.txt"
		ren "!nationname! - Unique Animals List.txt" "!newnationname! - Unique Animals List.txt"
		ren "!nationname! - Creature List.txt" "!newnationname! - Creature List.txt"
		cd /D "%~dp0data"
		cls
		echo Step !subloopcount! / !totalnations! of cycle !cyclecount! / !numloops!
		echo \tab Elements within the former nations government came together at the end, and through their planning, plotting, blood, sweat, and tears were able to create a new nation from the ashes of the old. Called the !newnationname!, the young !newgovtype! managed to retain the majority of its predecessor's holdings, and by the end of the cycle was a stable nation.\par>> "!savedir!\!univerce! Timeline.rtf"
		call :namegen
		echo Durring the fall of the !nationname!, a prominent member of the government named !firstname! !lastname! was able to convince many other members of the government to plan ahead for the inevitable collapse. When the collapse came, they acted swiftly, and using their existing assets were able to forge a brand new nation, the !newnationname!, from the ashes of the past.>"!newnationname! - Orginstory.txt"
	)
	if "!roll2!" gtr "50" if "!roll2!" leq "90" (
		cd /D "%worlddir%"
		set fetchedfile=rootnations
		:absorbnationloop
		call :filefetch
		set "domnation=!name!"
		if "!domnation!"=="!nationroot!" goto absorbnationloop
		set "holdnationroot=!nationroot!"
		for /f "delims== tokens=1,2" %%G in (!domnation!.txt) do set %%G=%%H
		set domnationname=!nationname!
		set domnationshort=!nationshort!
		set domnationadj=!nationadj!
		set domrulertitle=!rulertitle!
		set domreignmod=!reignmod!
		set domnattypeflag=!nattypeflag!
		set domnationpeoples=!nationpeoples!
		set domdemocrasyflag=!democrasyflag!
		set domnationclimate=!nationclimate!
		set domnationgovtitles=!nationgovtitles!
		for /f "delims== tokens=1,2" %%G in (!holdnationroot!.txt) do set %%G=%%H
		cd /D "%~dp0data"
		ROBOCOPY "!worlddir!\Nations\!nationname!\Settlments" "!worlddir!\Nations\!domnationname!\Settlments"
		type "!worlddir!\Nations\!nationname!\!nationname! - Settlments List.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Settlments List.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Artifacts List.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Artifacts List.txt"	
		type "!worlddir!\Nations\!nationname!\!nationname! - Hive Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Hive Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Ruins List.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Ruins List.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Bandit Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Bandit Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Monster Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Monster Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Hive Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Hive Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Mage Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Mage Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Cult Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Cult Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Minor Neighbors.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Minor Neighbors.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Regions.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Regions.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Materials List.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Materials List.txt"
		type "!worlddir!\Nations\!nationname!\!nationname! - Unique Animals List.txt" >> "!worlddir!\Nations\!domnationname!\!domnationname! - Unique Animals List.txt"
		echo \tab As the !nationname! fell to ruin, the !domnationname! fell uppon them in a war of conquest. It was hoped that the people would unify against the invaders, and this unity would heal the dying nation. Unfortunately for the !nationname!, the people were loyal to those who brought food, security, and income, and supported the !domnationname!'s solderers instead. Within a few short years, the !nationshort! became a province of the !domnationname!.\par>> "!savedir!\!univerce! Timeline.rtf"
		cd /d "!worlddir!\nationconfigdata"
		type "!nationname! - Peoples.txt" >> "!domnationname! - Peoples.txt"
		cd /D "!worlddir!"
		findstr /V "!holdnationroot!" rootnations.txt > temprootnations.txt
		type temprootnations.txt > rootnations.txt
		cd /D "%~dp0data"
	)
	if "!roll2!" gtr "90" (
		echo \tab The disaster was great, and the people's suffering was long and slow. They begged for aid, but none was given. In less time than one would expect or hope, the !nationname! became naught but ruins as its peoples scattered to the winds.\par>> "!savedir!\!univerce! Timeline.rtf"
		cd /D "!worlddir!\Nations"
		ren "!nationname!" "Ruins - !nationname!"		
		cd /D "!worlddir!"
		findstr /V "!nationroot!" rootnations.txt > temprootnations.txt
		type temprootnations.txt > rootnations.txt
		cd /D "%~dp0data"
	)
goto GGnation
)

::This part ensures new nations and only new nations get an origin story, first national flag, and other one-time stuff like that.

if "%cyclesexisted%"=="0" if "%cyclecount%"=="1" (
	call :nationpeoplelister
	echo \tab The !nationname! !nationdisk! \par>> "!savedir!\!univerce! Timeline.rtf"
	call :orginstory
	echo \tab !nationorgin! \par>> "!savedir!\!univerce! Timeline.rtf"
)
if "%cyclesexisted%"=="0" if "%cyclecount%" gtr "1" (
	call :nationpeoplelister
	echo \tab The !nationname! !nationdisk! \par>> "!savedir!\!univerce! Timeline.rtf"
	call :orginloader
	echo \tab !nationorgin! \par>> "!savedir!\!univerce! Timeline.rtf"
)
if "%cyclesexisted%"=="0" (	
	call :regionlister
	echo \tab !nationdiscription! \par>> "!savedir!\!univerce! Timeline.rtf"
	
	call :flaggen
	echo \tab Durring the !age! Cycle, !nationname! represented themselves with a banner consisting of !flag!.\par>> "!savedir!\!univerce! Timeline.rtf"
)
if "%cyclesexisted%" gtr "1" (
	call :nationflagchangecheck
	echo \tab !flagchange!\par >> "!savedir!\!univerce! Timeline.rtf"
)

::This part writes the information about the line of rulers to file, and chooses an interesting legal issue that was a serious matter of debate during the era.

(
echo \tab !rulertext!\par
echo \tab !legalisue!\par
) >> "%savedir%\%univerce% Timeline.rtf"

::This chooses events of political intrigue.

set "finevent="
set "event="
set polycount=0
:polyevents
call :politicalintriguer
call :yearcounter
if "%event%"=="" set "event=a major event occurred, but is so obscured due to multiple conflicting accounts of the event, the truth has been lost to the veil of history."
set "finevent=In the %numeral2% year of the %age% Cycle, %event%"
echo \tab %finevent%\par >> "%savedir%\%univerce% Timeline.rtf"
echo %age%;%decadeyear%;%nationname%;%event% >> "%savedir%\%univerce% Timeline Spreadsheet.csv"
set /a polycount=%polycount%+1
set "finevent="
set "event="
PING localhost -n 2 >NUL
if %polycount% lss %polyeventnum% goto polyevents

::This chooses major events which are not political in nature.

echo \b Major Events\b0\par >> "%savedir%\%univerce% Timeline.rtf"

set natevcount=0
:nationalevents
call :decisiontable
call :yearcounter
if "%event%"=="" set "event=a major event occurred, but is so obscured due to multiple conflicting accounts of the event, the truth has been lost to the veil of history."
set "finevent=In the %numeral2% year of the %age% Cycle, %event%."
echo \tab %finevent%\par >> "%savedir%\%univerce% Timeline.rtf"
echo %age%;%decadeyear%;%nationname%;%event% >> "%savedir%\%univerce% Timeline Spreadsheet.csv"
set /a natevcount=%natevcount%+1
PING localhost -n 2 >NUL
set "finevent="
set "event="
if %natevcount% lss %nationeventnum% goto nationalevents

::This part exports the nations great heroes and cultural details to file.
call :religionloader
(
echo \tab !excells!\par
echo \tab !finalheros!\par
echo \tab Durring this era, the !nationname!!fineconomy!.\par
echo \b Cultural Details\b0\par
echo \tab !fashion!\par
echo \tab !arcatecturestyle!\par
echo \tab !artfin! \par
echo \tab !nationname!'s formost religon durring this time was !nationalreligion! \par
echo \par
) >> "%savedir%\%univerce% Timeline.rtf"

::This section ensures all calculations for progression through time are preformed, and advances the cycle to the next nation.

:GGnation
set /a subloopcount=%subloopcount%+1
call :advancenation
goto:eof

::-----------------
::
:: Routines
::
::-----------------

:advcyclecount
set /a cyclecount=%cyclecount%+1
call :newagecheck
goto:eof

:: --- ROOT TABLE ---

:decisiontable
set "dieroll="
set /a dieroll=(%random% %% 13)+1
if "%dieroll%"=="1" call :MagicalEvent
if "%dieroll%"=="2" call :EvilLair
if "%dieroll%"=="3" call :Island
if "%dieroll%"=="4" call :Ruins
if "%dieroll%"=="5" call :Bandits
if "%dieroll%"=="6" call :MinorKingdom
if "%dieroll%"=="7" call :NaturalDisaster
if "%dieroll%"=="8" call :Expansion
if "%dieroll%"=="9" call :Hostiles
if "%dieroll%"=="10" call :actofgod
if "%dieroll%"=="11" call :NewResource
if "%dieroll%"=="12" call :RoamingHerds
if "%dieroll%"=="13" call :MonsterAwakens   
goto:eof


:: --- act of god ---

:actofgod

call :SummonGod
call :NaturalDisaster

call :roll1d3
set "potato=%event%"
set "event=priests of %chosengod%, within the temple of %religion% warn the people that %chosengod% is displeased with them over a certain recent trend. %roll% months later %potato%"
goto:eof

:: --- MAGICAL ARTIFACT DISCOVERED ---

:MagicalEvent
set "potantcy="
set "school="
set "item="
set "found="
set "lastname="
set "firstname="
set "hero="
set "dice1="
set "dieroll="

set fetchedfile=magicschools
call :filefetch
set school=%name%
set fetchedfile=artifactitems
call :filefetch
set item=%name%
set /a dice1=(%RANDOM% %% 100)+1
set found=discovered
if "%dice1%" leq 25 set found=created
set /a dieroll=(%RANDOM% %% 7)+1
if "%dieroll%"=="1" set "hero=Historian"
if "%dieroll%"=="2" set "hero=Military Leader"
if "%dieroll%"=="3" set "hero=Explorer"
if "%dieroll%"=="4" set "hero=Adventurer"
if "%dieroll%"=="5" set "hero=Inventor"
if "%dieroll%"=="6" set "hero=Trader"
if "%dieroll%"=="7" set "hero=Mage"
call :namegen
set "dieroll="
set /a dieroll=(%RANDOM% %% 3)+1
if "%dieroll%"=="1" set "potantcy=godly"
if "%dieroll%"=="2" set "potantcy=extreme"
if "%dieroll%"=="3" set "potantcy=great"
set "event=A %hero% by the name of %firstname% %lastname% of %nationname% %found% %item% imbeued with the power of %school% to a %potantcy% degree."
echo %item% >> "%recorddir%\%nationname% - Artifacts List.txt"
echo %firstname% %lastname%, %found% a magical artifact>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
set /a math=%arcanemod%+4
set arcanemod=%math%
goto:eof

:: --- EVIL LAIR FOUNDED ---

:EvilLair
set "fiends="
set "lair1="
set "lair2="
set "event="

set fetchedfile=listoffiends
call :filefetch
set "fiends=%name%"
set fetchedfile=lairnamesmain
call :filefetch
set "lair1=%name%"
set fetchedfile=lairnamessub
call :filefetch
set "lair2=%name%"
set "event=the %nationname% is plagued by a group of %fiends% operating out of their newly established home base, %lair1% %lair2%."
echo %fiends% >> "%recorddir%\%nationname% - Hive Neighbors.txt"
set /a expamod=%expamod%-1
set /a milmod=%milmod%-1
goto:eof

:: --- ISLAND DISCOVERED ---

:Island
set "event="
set "firstname="
set "lastname="
set "island="
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dieroll="
set "biome="
set /a dice3=(%RANDOM% %% 6)+1
set /a dice4=(%RANDOM% %% 6)+1
set /a dieroll=%dice3%+%dice4%
if "%dieroll%"=="3" set "biome=Savanna"
if "%dieroll%"=="3" set "biome=Wetland"
if "%dieroll%"=="4" set "biome=Hilly"
if "%dieroll%"=="5" set "biome=Lake filled"
if "%dieroll%"=="6" set "biome=River dominated"
if "%dieroll%"=="7" set "biome=Forested"
if "%dieroll%"=="8" set "biome=Mountainous"
if "%dieroll%"=="9" set "biome=Desert"
if "%dieroll%"=="10" set "biome=Jungle"
if "%dieroll%"=="11" set "biome=Canyon dominated"
if "%dieroll%"=="12" set "biome=Volcanic"
set /a dice1=(%RANDOM% %% 6)+1
set /a dice2=(%RANDOM% %% 2)+5
if "%dice1%"=="1" set "island=a very large %biome% island" & set "islename=Island"
if "%dice1%"=="2" set "island=a large %biome% island" & set "islename=Island"
if "%dice1%"=="3" set "island=a large %biome% island with a smaller island nearby" & set "islename=Islands"
if "%dice1%"=="4" set "island=two medium %biome% islands" & set "islename=Islands"
if "%dice1%"=="5" set "island=three small %biome% islands" & set "islename=Isles"
if "%dice1%"=="6" set "island=an archipelago of %dice2% small %biome% islands" & set "islename=Isles"
call :namegen
set "event=the %nationnadj% explorer %firstname% %lastname% discovered %island%, and names the new territory %lastname% %islename%."
echo %firstname% %lastname%, discovered the %lastname% %islename%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"
set /a expamod=%expamod%+2
goto:eof



:: --- RUINS DISCOVERED ---

:Ruins
set "field="
set "ruinname="
set "race="
set "ruintype="
set "event="
set "dice1="

call :racepicker
set /a dice1=(%RANDOM% %% 100)+1
if "%dice1%" leq 25 set ruintype=tower
if "%dice1%" geq 26 if "%dice1%" leq 37 set ruintype=keep
if "%dice1%" geq 38 if "%dice1%" leq 48 set ruintype=town
if "%dice1%" geq 49 if "%dice1%" leq 59 set ruintype=castle
if "%dice1%" geq 60 if "%dice1%" leq 70 set ruintype=fortress
if "%dice1%" geq 71 if "%dice1%" leq 81 set ruintype=city
if "%dice1%" geq 82 if "%dice1%" leq 94 set ruintype=sanctum
if "%dice1%" geq 95 set ruintype=metropolice
set fetchedfile=ruinnames
call :filefetch
set ruinname=%name%
call :scientificfieldpicker
call :namegen
set "dudebro=%firstname% %lastname%"
call :roll1d3
if "%roll%"=="1" set "intro=%nationadj% scouts" & set "tehflag=0"
if "%roll%"=="2" set "intro=the %nationadj% adventurer %dudebro%" & set "tehflag=1"
if "%roll%"=="3" set "intro=the %nationadj% explorer %dudebro%" & set "tehflag=2"
set "event= discover the ruins of a %ruintype% of a lost %race% civilization. The ruins come to be known as %ruinname% and prove to be of great historic interest, with scholars learning a great deal about %field% through exploring them."
echo %ruinname% >> "%recorddir%\%nationname% - Ruins List.txt"
if "%tehflag%"=="1" echo %dudebro%, an adventurer. Discovered %ruinname%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"
if "%tehflag%"=="2" echo %dudebro%, an explorer. Discovered %ruinname%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"

set /a cultremod=%cultremod%+1
set /a arcanemod=%arcanemod%+1
goto:eof

:: --------------------
::
:: NEIGHBOR EXPANSHION
::
:: --------------------

::  ----- Neighbor Expanshion START -----

:NeighborsDevelop
set "dice1="
set /a dice1=(%RANDOM% %% 5)+1

if "%dice1%"=="1" if exist "%recorddir%\%nationname% - Bandit Neighbors.txt" (
	set "action="
	set "event="
	set "cityname="
	set "firstname="
	set "lastname="
	set "doomedtown="
	set "banditsname="
	set "monstername="
	set "type="
	set "kingdomname="
	set "flag="
	set "dice1="
	set "fetchedfile=!nationname! - Bandit Neighbors"
	call :datafetch
	set "banditsname=!name!"
	set fetchedfile=legendarymonstertypes
	call :filefetch
	set type=!name!
	set fetchedfile=monsternames
	call :filefetch
	set monstername=!name!
	call :heromaker
	call :flaggen
	call :KNnamer
	call :townfounder
	set "fetchedfile=!nationname! - Settlments List"
	call :datafetch
	set "doomedtown=!name!"
	call :roll1d6
	if "!roll!"=="1" (
		set "action=discover the lair of the legendary !type!, !monstername!, and awaken the terror."
		echo !monstername!>> "!recorddir!\!nationname! - Monster Neighbors.txt"
	)
	if "!roll!"=="2" set "action=goto to war with a random nearby faction. Roll on the war table"
	if "!roll!"=="3" set "action=reforges itself into a nation thanks to strong leadership by the self appointed King, !firstname! !lastname!. They call their new kingdom the !kingdomname! and represent their kingdom with a banner consisting of a !flag!."
	if "!roll!"=="4" (
		set "action=create a new settlement for themselves, and name it !cityname!"
		echo !kingdomname!>> "!recorddir!\!nationname! - Settlments List.txt"
	)
	if "!roll!"=="5" (
		set "action=construct a large floating pseudo-town from old boats on a waterway. They name it !cityname!."
		echo !cityname!>> "!recorddir!\!nationname! - Settlments List.txt"
	)
	if "!roll!"=="6" (
		set "action=are swayed by the words of their new leader, !firstname! !lastname!, and capture !doomedtown!, taking permanent control"
		echo !cityname!>> "!recorddir!\!banditsname! - Settlments List.txt"
	)
	set "event=!banditsname!, a group of bandits/tribe/pirates within !nationname!'s terratory %action%."
	call :banditfactiontablemath
	goto:eof
)
if "%dice1%"=="2" if exist "%recorddir%\%nationname% - Hive Neighbors.txt" (
	set "hivename="
	set "event="
	set "action="
	set "transform="
	set "cityname="
	set "structure="
	set "outcome="
	set "severity="
	set "dice1="
	set "dice2="
	set "dice3="
	set "fetchedfile=!nationname! - Hive Neighbors"
	call :datafetch
	set "hivename=!name!"
	set "fetchedfile=!nationname! - Settlments List"
	call :datafetch
	set "doomedtown=!name!"
	call :roll623
	set severity=minimal
	if "!dice3!"=="2" set severity=significent
	if "!dice3!"=="3" set severity=dire
	set "outcome=destroying it"
	if "!dice2!"=="2" set "outcome=but are repelled with !severity! losses"
	if "!dice1!"=="1" (
		set "action=spawns a new queen, which sets out with a large group and founds a new hive, !hivename!, in a distant place"
		echo !hivename!>> "!recorddir!\!hivename! - Settlments List.txt"
	)
	if "!dice1!"=="2" (
		set "action=expands, founding a new hive, !hivename!, nearby their orgional nest"
		echo !hivename!>> "!recorddir!\!hivename! - Settlments List.txt"
	)
	if "!dice1!"=="3" set "action=raids !doomedtown!, !outcome!"
	if "!dice1!"=="4" (
		set "action=attack a !doomedtown!, replacing it with a new hive"
		echo !hivename!>> "!recorddir!\!hivename! - Settlments List.txt"
	)
	if "!dice1!"=="5" set "action=produces a legenday monster"
	if "!dice1!"=="6" (
		set "action=expands, founding a new hive, !hivename!, nearby their orgional nest"
		echo !hivename!>> "!recorddir!\!hivename! - Settlments List.txt"
	)
	set "event=A monsterious hive of !hivename! within !nationname! !action!."
	echo !hivename!>> "!recorddir!\!hivename! - Settlments List.txt"
	call :hivefactiontablemath
	goto:eof

)
if "%dice1%"=="3" if exist "%recorddir%\%nationname% - Mage Neighbors.txt" (
	set "magename="
	set "event="
	set "action="
	set "transform="
	set "cityname="
	set "structure="
	set "outcome="
	set "severity="
	set "dice1="
	set "dice2="
	set "dice3="
	set "fetchedfile=!nationname! - Mage Neighbors"
	call :datafetch
	set "magename=!name!"
	set "fetchedfile=!nationname! - Settlments List"
	call :datafetch
	set "doomedtown=!name!"
	call :townfounder
	set fetchedfile=wizardstructures
	call :filefetch
	set "structure=!name!"
	call :roll1d2
	set "transform=teraforming it to a new type of biome"
	if "!roll!"=="2" set "transform=destroying it, creating a wasteland"
	call :roll623
	set severity=minimal
	if "!dice3!"=="2" set severity=significant
	if "!dice3!"=="3" set severity=dire
	set "outcome=destroying it"
	if "!dice2!"=="2" set "outcome=but are repelled with %severity% losses"

	if "!dice1!"=="1" (
		set "action=gains many new followers, and constructs the town of !cityname! to house them near their base of operations. !outcome!."
		echo !cityname! >> "!recorddir!\!magename! - Settlments List.txt"
	)

	if "!dice1!"=="2" set "action=attacks !doomedtown!, !outcome!"
	if "!dice1!"=="3" (
		set "action=gains many new followers, and constructs the town of !cityname! to house them near their base of operations. !outcome!."
		echo !cityname! >> "!recorddir!\!magename! - Settlments List.txt"
	)
	if "!dice1!"=="4" (
		set "action=constructs a wonderious arcane !structure!, furthering their plans."
		echo !cityname! >> "!recorddir!\!magename! - Settlments List.txt"
	)
	if "!dice1!"=="5" set "action=alters the nearby lands, !transform!"
	if "!dice1!"=="6" set "action=unleashes foul corrupting magic, tainting a large region, creating new blight-lands."
	set "event=The !magename! !action!."
	call :magefactiontablemath
	goto:eof
)
if "%dice1%"=="4" if exist "%recorddir%\%nationname% - Cult Neighbors.txt" (
	set "event="
	set "action="
	set "doomedtown="
	set "cultname="
	set "resource="
	set "cityname="
	set "dice1="
	set "fetchedfile=!nationname! - Cult Neighbors"
	call :datafetch
	set "cultname=!name!"
	call :townfounder
	set fetchedfile=templenames
	call :filefetch
	set "templename=!name!"
	set fetchedfile=wizardstructures
	call :filefetch
	set "structure=!name!"
	set "fetchedfile=!nationname! - Settlments List"
	call :datafetch
	set "doomedtown=!name!"
	call :roll1d6
	if "!roll!"=="1" (
		set "action=expands, constructing the !resource! town of !cityname!. !outcome!."
		echo %cityname% >> "!recorddir!\!cultname! - Settlments List.txt"
	)
	if "!roll!"=="2" (
		set "action=constructs the !templename! to serve as a new temple"
		echo !cityname! >> "!recorddir!\!cultname! - Settlments List.txt"
	)
	if "!roll!"=="3" (
		set "action=creates a grand !structure!, which is of such magesty it enters into legend. They name it !templename!"
		echo !cityname! >> "!recorddir!\!cultname! - Settlments List.txt"
	)
	if "!roll!"=="4" (
		set "action=takes controll of !doomedtown!, converting it to its faction"
		echo !cityname! >> "!recorddir!\!cultname% - Settlments List.txt"
	)
	if "!roll!"=="5" set "action=ransacks !doomedtown! for valueables, causing enough damage to be historically memorable"
	if "!roll!"=="6" (
		set "action=expands, constructing the !resource% town of !cityname!. !outcome!."
		echo !cityname! >> "!recorddir!\!cultname! - Settlments List.txt"
	)
	set "event=!cultname! !action!."
	call :cultfactiontablemath
	goto:eof
)
if "%dice1%"=="5" if exist "%recorddir%\%nationname% - Monster Neighbors.txt" (
	set "monstername="
	set "event="
	set "action="
	set "outcome="
	set "doomedtown="
	set "severity="
	set "dice1="
	set "dice2="
	set "dice3="
	set "fetchedfile=!nationname! - Monster Neighbors"
	call :datafetch
	set "monstername=!name!"
	set "fetchedfile=!nationname! - Settlments List"
	call :datafetch
	set "doomedtown=!name!"
	call :roll623
	set severity=minimal
	if "!dice3!"=="2" set severity=significent
	if "!dice3!"=="3" set severity=dire
	set "outcome=destroying it"
	if "!dice2!"=="2" set "outcome=but are repelled with !severity! losses"
	if "!dice1!"=="1" set "action=attacks !doomedtown!, !outcome!"
	if "!dice1!"=="2" set "action=by offering, sacrifice, or assault, the monster has accumulated vast amounts of wealth. Draw in a treasure hold or gold laden lair."
	if "!dice1!"=="3" set "action=attacks a nearby settlement, !outcome!"
	if "!dice1!"=="4" set "action=becomes so revered and powerful it ascends to godhood, gaining a domain"
	if "!dice1!"=="5" set "action=settles in to a new location, creating a proper lair for itself"
	if "!dice1!"=="6" set "action=unleashes its rage onto !doomedtown!, destroy and replace it with a ruin"
	set "event=The monster !monstername! !action!."
	call :monsterfactiontablemath
	goto:eof
)
call :roll1d4
if "%dieroll%"=="1" call :EvilLair
if "%dieroll%"=="2" call :Bandits
if "%dieroll%"=="3" call :Hostiles
if "%dieroll%"=="4" call :MonsterAwakens
goto:eof

:: --- BANDIT UPRISING ---

:Bandits
set "event="
set "gangname="
set "flag="
set "cityname="
set fetchedfile=gangnames
call :filefetch
set "gangname=%name%"
call :flaggen
call :townfounder
set "event=Brigands calling themselves the %gangname% have been raiding merchants and caravans within %nationadj% territory. The %gangname% is so successful it takes up a banner in the form of a %flag%. This flag flies proudly over the town of %cityname%, which serves as the %gangname%'s headquarters."
echo %gangname% >> "%recorddir%\%nationname% - Bandit Neighbors.txt"
set /a math=%econmod%-3
set econmod=%math%
goto:eof

:: --- MINOR KINGDOM DISCOVERED ---

:MinorKingdom
set "kingname="
set "town1="
set "town2="
set "discoverername="
set "firstcontact="
set "intro="
set "event="

set /a newnationcount=%newnationcount%+1
if "%newnationcount%" gtr "3" goto decisiontable

call :nationforger
set newkingdomfounding=1
call :namegen
set "kingname=%firstname% %lastname%"
set newkingdomfounding=1
call :orginstory
call :regionbuilder
call :townfounder
set town1=%cityname%
set newkingdomfounding=1
call :townfounder
set town2=%cityname%
call :archatect
set newkingdomfounding=0
call :namegen
set "discoverername=%firstname% %lastname%"
call :flaggen
set fetchedfile=firstcontactgoodoutcomes
call :filefetch
set "firstcontact=%name%"

set /a dice1=(%RANDOM% %% 100)+1
set "intro=%nationadj% scouts"
if %dice1% geq 34 if %dice1% leq 66 (
		set "intro=the Adventurer !discoverername! from !nationname!"
		echo !discoverername!, Adventurer>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if %dice1% geq 67 (
	set "intro=the Explorer !discoverername! from !nationname!"
	echo !discoverername!, Adventurer>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)

set "event=The %nationname% discovered a small %newnationrace% %newgovtype% calling itself the %newnationname%. It is ruled by %newruler% %kingname%, from its capitol %town1%. It's most prominent other settlement is %cityname%. The %newnationname% represents itself with a banner consisting of %flag%. Contact with the %newgovtype% was first made by %intro%, who %firstcontact%"
echo %kingdomname% >> "%recorddir%\%nationname% - Minor Neighbors.txt"
echo %town1% ^(capitol^)>"%worlddir%\Nations\%newnationname%\%newnationname% - Settlments.txt"
echo %town2%>>"%worlddir%\Nations\%newnationname%\%newnationname% - Settlments.txt"

set /a milmod=%milmod%+2
set /a expamod=%expamod%+2
set /a inframod=%inframod%+2
set /a agrimod=%agrimod%+2
set /a cultremod=%cultremod%+2
set /a econmod=%econmod%+2
set /a arcanemod=%arcanemod%+2
goto:eof

:: --- NATION EXPANDS ---

:Expansion
set "event="
set "resource="
set "cityname="
set "foundingoutcome="
set "landmark="
set "cityname="
set "tfg=0"

set /a roll=(%random%)+1

if "%roll%" leq "4" (
	call :townfounder
	set fetchedfile=landmarks
	call :filefetch
	set "landmark=!name!"
	call :roll1d3
	if "!roll!"=="1" set "intro=!nationadj! scouts"
	if "!roll!"=="2" (
		call :namegen
		set "intro=the !nationadj! adventurer !firstname! !lastname!"
		echo !firstname! !lastname!, adventurer. Discovered !landmark!.>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
		)
		if "!roll!"=="3" (
			call :namegen
			set "intro=the !nationadj! explorer !firstname! !lastname!"
			echo !firstname! !lastname!, explorer. Discovered !landmark!.>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
		)
	set "event=!intro! stumbled upon a truly breathtaking and impressive !landmark!. The town of !cityname! is established nearby as the wealthy wish to live with a view of this new grand vista. !foundingoutcome!."
	echo !cityname! >> "!recorddir!\!nationname! - Settlments List.txt"
)
if "%roll%" gtr "4" if "%roll%" leq "6" (
	call :townfounder
	set "event=!resourceterm! leads to !nationname! elects to found a new !resource! town, and founds !cityname! to achieve this goal. !foundingoutcome!."
	echo !cityname! >> "!recorddir!\!nationname! - Settlments List.txt"
)
if "%roll%"=="7" (
	set "event=issues relating to developing the frontier leads to !nationname! elects to create a new city for the purposes of expanding its influence. The city of !cityname! is created for this purpose, serving as a new political center. Place a new city on the edge of, or within a remote region of, !nationname!'s territory. !foundingoutcome!."
	echo !cityname! >> "!recorddir!\!nationname! - Settlments List.txt"
)
if "%roll%" gtr "7" (
	set milltownflag=1
	call :townfounder
	set milltownflag=0
	set "event=!resourceterm! leads to !kingdomname! founds a new military settlement, !cityname!, to strengthen its hold on its territory."
	echo !cityname! >> "!recorddir!\!nationname! - Settlments List.txt"
)
goto:eof

:: --- HOSTILES DISCOVERED ---

:Hostiles
set "monstername="
set "type="
set "cult="
set "event="
set "race="
set "magictype="
set "firstname="
set "lastname="
set "school="
set "flag="
set "tribe="
set "hive="
set "kingdomname="
set "town1="
set "town2="
set "dice1="
set /a milmod=%milmod%+2
set /a econmod=%econmod%+2
set /a dice1=(%RANDOM% %% 6)+1
if "%dice1%"=="1" (
	set "action=a hostile hive/swarm" 
	set fetchedfile=hivesandswarms
	call :filefetch
	set "hive=!name!"
	set "event=the !nationname! is plagued by a newly appearing hive of !hive!. They rapidly become a significant problem for the region around their hive."
	echo !hive! >> "!recorddir!\!nationname! - Hive Neighbors.txt"
)
if "%dice1%"=="2" (
	set fetchedfile=tribenames
	call :filefetch
	set "tribe=!name!"
	call :flaggen
	set fetchedfile=races
	call :filefetch
	set "race=!name!"
	set "event=the !nationname! discovers a hostile tribe of !race! living within a remote part of their territory. The tribe calls itself !tribe! and represents itself with a banner consisting of a !flag!. They make themselves quite the problem for the local area."
	echo !tribe! >> "!recorddir!\!nationname! - Bandit Neighbors.txt"
)
if "%dice1%"=="3" (
	set "kingname="
	set "town1="
	set "town2="
	set "discoverername="
	set "firstcontact="
	set "intro="
	set "event="
	call :newnationtracker
	if "%newnationcount%" gtr "3" goto decisiontable

	call :nationforger
	set newkingdomfounding=1
	call :namegen
	set "kingname=!firstname! !lastname!"
	set newkingdomfounding=1
	call :orginstory
	call :regionbuilder
	call :townfounder
	set town1=!cityname!
	set newkingdomfounding=1
	call :townfounder
	set town2=!cityname!
	call :archatect
	set newkingdomfounding=0
	call :namegen
	set "discoverername=!firstname! !lastname!"
	call :flaggen
	set fetchedfile=firstcontactbadoutcomes
	call :filefetch
	set "firstcontact=!name!"

	call :roll1d100
	set "intro=!nationadj! scouts"
	if !dice1! geq 34 if %dice1% leq 66 (
		set "intro=the Adventurer !discoverername! from !nationname!"
		echo !discoverername!, Adventurer>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	if !dice1! geq 67 (
		set "intro=the Explorer !discoverername! from !nationname!"
		echo !discoverername!, Adventurer>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	
	set "event=the !nationname! discovered a small !newnationrace! !newgovtype! calling itself the !newnationname!. It is ruled by !newruler! !kingname!, from its capitol !town1!. It's most prominent other settlement is !cityname!. The !newnationname! represents itself with a banner consisting of !flag!. Contact with the !newgovtype! was first made by !intro!, who !firstcontact!"
	echo !kingdomname! >> "!recorddir!\!nationname! - Minor Neighbors.txt"
	echo !town1! ^(capitol^)>"!worlddir!\Nations\!newnationname!\!newnationname! - Settlments List.txt"
	echo !town2!>>"!worlddir!\Nations\!newnationname!\!newnationname! - Settlments List.txt"
)
if "%dice1%"=="4" (
	call :racepicker
	call :namegen
	set fetchedfile=magicschools
	call :filefetch
	set "school=!name!"
	if "!school!"=="Abjuration" set "magictype=abjurer"
	if "!school!"=="Transmutation" set "magictype=transmutor"
	if "!school!"=="Conjuration" set "magictype=conjurer"
	if "!school!"=="Summoning" set "magictype=summoner"
	if "!school!"=="Augory" set "magictype=Orchal"
	if "!school!"=="Enchantment" set "magictype=Enchnater"
	if "!school!"=="Charm" set "magictype=bewitcher"
	if "!school!"=="Invocation" set "magictype=invoker"
	if "!school!"=="Illusion" set "magictype=illusator"
	if "!school!"=="Mysticism" set "magictype=mystic"
	if "!school!"=="Necromancy" set "magictype=necromancer"
	if "!school!"=="Chronomancy" set "magictype=chronomancer"
	if "!school!"=="Elven High Magic" set "magictype=Old Mage"
	if "!school!"=="Truename Magic" set "magictype=Truenamer"
	if "!school!"=="Wild Magic" set "magictype=Wild Mage"
	set "event=!nationname! runs afowl of the legendary !race! !magictype!, !firstname! !lastname!. The !magictype! makes it their mission in life to bring suffering to !nationname!."
	echo !magictype! !firstname! !lastname! >> "!recorddir!\!nationname! - Mage Neighbors.txt"
)
if "%dice1%"=="5" (
	set fetchedfile=cultnames
	call :filefetch
	set "cult=!name!"
	set fetchedfile=culttypes
	call :filefetch
	set "type=!name!"
	set "event=A hostile !type! cult known as the !cult! forms within !nationname!, and rises to prominence. It's goals run counter to those of the government, and they become a serious problem in short order."
	echo !cult! >> "!recorddir!\!nationname! - Cult Neighbors.txt"
)
if "%dice1%"=="6" (
	set fetchedfile=legendarymonstertypes
	call :filefetch
	set "type=!name!"
	set fetchedfile=monsternames
	call :filefetch
	set "monstername=!name!"
	set "event=The legendary !type!, !monstername!, emerges within !nationname!'s lands, proving to be an existential threat in short order."
	echo !monstername! >> "!recorddir!\!nationname! - Monster Neighbors.txt"
)
goto:eof

:: --- NEIGHBOR EXPANSHION ---

:NaturalDisaster
set fetchedfile=negativewords
call :filefetch
set "negativeword=%name%"
set /a onetownpeoplekilled=(%random% %% 200)+100
set /a onetownlivestockkilled=(%random% %% 300)+100
set /a onetownbuildingslost=(%random% %% 80)+20
set /a peoplekilled=(%random% %% 500)+300
set /a livestockkilled=(%random% %% 800)+500
set /a buildingslost=(%random% %% 200)+100
set /a nationpeoplekilled=(%random% %% 500)+600
set /a nationlivestockkilled=(%random% %% 2000)+1000
set /a nationbuildingslost=(%random% %% 300)+200
set fetchedfile=mountainnames
call :filefetch
set "mountain=%name%"
set fetchedfile=cardinalds
call :filefetch
set "side=%name%"
set fetchedfile=lakenames
call :filefetch
set "lake=%name%"
set fetchedfile=laketypes
call :filefetch
set "lake=%name% %lake%"
set fetchedfile=rivernames
call :filefetch
set "river=%name%"
set fetchedfile=rivertypes
call :filefetch
set "river=%name% %river%"

cd /D "%worlddir%\Nations\%nationname%"

set "fetchedfile=%nationname% - Settlments List"
set "name="
set "LINE="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :NDCONT1
)
:NDCONT1
set "doomedtown=%LINE%"

set "fetchedfile=%nationname% - Regions"
set "name="
set "LINE="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :NDCONT2
)
:NDCONT2
set "theregion=%LINE%"


cd /D "%~dp0data"

set /a diceroll=(%random% %% 15)+1
if "%diceroll%"=="1" goto NDBlizards
if "%diceroll%"=="2" goto NDLandslide
if "%diceroll%"=="3" goto NDEarthquake
if "%diceroll%"=="4" goto NDSinkholes
if "%diceroll%"=="5" goto NDVolcano
if "%diceroll%"=="6" goto NDFlood
if "%diceroll%"=="7" goto NDLimbicEruption
if "%diceroll%"=="8" goto NDBlizard
if "%diceroll%"=="9" goto NDHurricane
if "%diceroll%"=="10" goto NDDrought
if "%diceroll%"=="11" goto NDHail
if "%diceroll%"=="12" goto NDHeatwave
if "%diceroll%"=="13" goto NDTornado
if "%diceroll%"=="14" goto NDWildfire
if "%diceroll%"=="15" goto NDPlague

:NDBlizards
call :roll1d2
if "%roll%"=="1" set "event=an unseasonably cold winter resulted in many blizzards overtaking the %nationname%. The unnaturally deep snows and extreme winds caused a series of avalanches which lasted throughout the winter, and killed %peoplekilled% people, %livestockkilled% livestock, and destroyed over %buildingslost% buildings across %nationroot%'s settlements. The winter is forever remembered as The Winter of %negativeword%." & set damagerating=4
if "%roll%"=="2" set "event=an unseasonably cold winter resulted in many blizzards overtaking the %nationname%. The unnaturaly deep snows and extreme winds caused an avalanche which devastated %doomedtown%. The avalanche killed %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and destroyed over %onetownbuildingslost% buildings. It took %doomedtown% a decade to fully rebuild. The incident is forever remembered as The Day of %negativeword%." & set damagerating=2
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDLandslide
set "start=heavy spring rains following an uncharacteristically dry year and a minor earthquake resulted in the collapse of"
call :roll1d4a
if "%subroll%"=="1" set "landmark=the %side% face of Mount %mountain%"
if "%subroll%"=="2" set "landmark=the %side% slope of %mountain% Mountain"
if "%subroll%"=="3" set "landmark=the %side% side of %mountain% Hill"
if "%subroll%"=="4" set "landmark=the %side% side of %mountain% Valley"
call :roll1d4a
if "%subroll%" leq "2" set "doom=the resulting landslide swept across a broad section of %theregion%, devistating many small settlements. In all, %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%" gtr "2" set "doom=the landslide struck %doomedtown%, and devastated the community. %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings were lost to the calamity" & set damagerating=2
set "event=%start% %landmark%. %doom%. The disaster is recorded in history as %negativeword%'s Fall."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDEarthquake
set "start=an earthquake struck the %nationname%"
call :roll1d4a
if "%subroll%" leq "2" set "magnitude=devastated %theregion% causing widespread death and destruction. An estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "magnitude=shook the entire nation, bringing an end to %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings" & set damagerating=6
if "%subroll%"=="4" set "magnitude=brought ruin to %doomedtown%, which lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the earthquake" & set damagerating=2
set "event=%start%. The quake %magnitude%. The day of the quake is remembered by many as %negativeword%'s Day."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDSinkholes
set "start=several years of heavy rains culminated in a peculiar disaster"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=%theregion% developed large holes in the earth, seemingly overnight and without any particular pattern to their placment. An estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=A series of deep holes in the earth opened up at random places all across the %nationadj%. The disaster brought an end to %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings" & set damagerating=6
if "%subroll%"=="4" set "occurance=A great hole opened up beneath %doomedtown%, swallowing large sections of the community. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster" & set damagerating=2
set "event=%start%. %occurance%. This disaster is often refereed to as The %negativeword% Swallowing."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDVolcano
call :roll1d4a
if "%subroll%"=="1" set "landmark=Mount %mountain%" & set "mountaintype=mountain"
if "%subroll%"=="2" set "landmark=%mountain% Mountain" & set "mountaintype=mountain"
if "%subroll%"=="3" set "landmark=%mountain% Peak" & set "mountaintype=peak"
if "%subroll%"=="4" set "landmark=the %mountain% Range" & set "mountaintype=range"
set "start=%landmark%, an iconic vista located within the %nationname%, proved to be volcanic when the %mountaintype% erupted"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=The eruption devastated %theregion%, creating ashlands, leveling existing biomes, and boiling lakes. An estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=The eruption brought great calamity to the entire nation, causing not only a volcanic winter, but also a famine by poisoning the land and ruining a great many farms. The disaster brought an end to %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings" &set damagerating=6
if "%subroll%"=="4" set "occurance=The eruption was isolated to the area around %doomedtown%, which was swallowed in ash, lava flows, and pyroclastic gasses. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster" & set damagerating=2
set "event=%start%. %occurance%. The event is forever remembered as the Day of %negativeword%'s Wrath."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDFlood
call :roll1d4a
if "%subroll%"=="1" set "start=a great storm brought so much rain to %nationname%"
if "%subroll%"=="2" set "start=an otherwise minor earthquake shifted %river%"
if "%subroll%"=="3" set "start=after an anomalously snowy winter, runoff from snow-melt caused %lake% to overflow its banks and spill into %river%"
if "%subroll%"=="4" set "start=an up-welling of water from beneath the earth caused %river% to surge and overflow its banks"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=devastated %theregion%, creating new swamps, leveling existing biomes, and swelling lakes. An estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=brought great calamity to the entire nation, destroying river infrastructure, sweeping crops from their fields, and knocking down the walls of many communities. The disaster brought an end to %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings" & set damagerating=6
if "%subroll%"=="4" set "occurance=was isolated to the area around %doomedtown%, which was swallowed by the waters for several days. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster" & set damagerating=2
set "event=%start%. The resulting flood %occurance%. The disaster is remembered as the %negativeword% Drownings."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDLimbicEruption
set "start=%lake% began to boil, and released a thick toxic cloud from beneath its waters which"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=devastated %theregion%, killing every person and animal in its path which could not escape the cloud. Oddly, the plants of the region flourished in the years after the disaster. An estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=brought great calamity to the entire nation, killing every person and animal in its path which could not escape the cloud. Oddly, the plants of the region flourished in the years after the disaster. The disaster brought an end to %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings" & set damagerating=6
if "%subroll%"=="4" set "occurance=was isolated to the area around %doomedtown%, which was swallowed by the fumes for several days. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster, though it is of note the local plant life flourished after the disaster" & set damagerating=2
set "event=%start% %occurance%. The disaster is referred to as the %negativeword% Wind."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDBlizard
call :roll1d4a
if "%subroll%"=="1" set "start=the %nationname% was struck by an anomalously harsh winter storm which brought extreme cold and deep snows along with its blustering winds"
if "%subroll%"=="2" set "start=the %nationname% was rocked by a string of powerful winter storms"
if "%subroll%" geq "3" set "start=the %nationname% experienced an impossibly long, cold, and stormy winter unlike anything seen before"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=%theregion%, coating everything in a thick layer of ice and freezing countless animals, plants, and people to death. An estimated %peoplekilled% people, and %livestockkilled% livestock were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=the entire nation with equal severity, coating everything in a thick layer of ice and freezing countless animals, plants, and people to death. The disaster brought an end to %nationpeoplekilled% people, and %nationlivestockkilled% livestock" & set damagerating=6
if "%subroll%"=="4" set "occurance=%doomedtown%, coating everything in a thick layer of ice and freezing countless animals, plants, and people to death. %doomedtown% lost %onetownpeoplekilled% people, and %onetownlivestockkilled% livestock in the disaster." & set damagerating=2
set "event=%start%. The worst of the disaster struck %occurance%. The disaster is remembered as the %negativeword% Screams, after the sounds of the winds."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDHurricane
set "start=a great windstorm struck the %nationname%. Its winds were so great they picked up unsecured objects and flung them with enough force to smash brick and skull alike. Buildings collapsed under the gale, burying countless people alive"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=The storm was concentrated on %theregion%. An estimated %peoplekilled% people, and %livestockkilled% livestock were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=The storm struck the entire nation. The disaster brought an end to %nationpeoplekilled% people, and %nationlivestockkilled% livestock" & set damagerating=6
if "%subroll%"=="4" set "occurance=The storm's devistation was focused on the area arround %doomedtown%, which lost %onetownpeoplekilled% people, and %onetownlivestockkilled% livestock in the disaster." & set damagerating=2
set "event=%start%. %occurance%. History remembers the strom as The Storm of %negativeword%."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDDrought
set "start=the %nationname% was struck by a drought when %lake% grew too small to continue feeding %river%,
call :roll1d4a
if "%subroll%" leq "2" set "occurance=cutting %theregion% off from any supply of water. An estimated %peoplekilled% people, and %livestockkilled% livestock were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=which effected the water supply of the entire nation. The disaster brought an end to %nationpeoplekilled% people, and %nationlivestockkilled% livestock" & set damagerating=6
if "%subroll%"=="4" set "occurance=which reduced the available water supply nationwide, but was especially harsh in the area arround %doomedtown%. As the neighboring regions had no water so spare, %doomedtown% lost %onetownpeoplekilled% people, and %onetownlivestockkilled% livestock in the disaster." & set damagerating=2
set "event=%start% %occurance%. The drought lasted for %roll% months, which are remembered as the %negativeword% Thirst."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDHail
set "start=a most peculiar disaster struck %nationname%, causing great chunks of ice to fall from the sky."
call :roll1d4a
if "%subroll%" leq "2" set "occurance=The disaster was concentrated over %theregion%, and an estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=The hail struck most everywhere across the entire nation. An estimated %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings were lost to the disaster" & set damagerating=6
if "%subroll%"=="4" set "occurance=The disaster struck %theregion% specificly, but was especialy harsh in the area around %doomedtown%. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster." & set damagerating=2
set "event=%start% %occurance%. The ice rain is generally remembered as the %negativeword% Rain."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDHeatwave
call :roll1d14
set "start=!nationname! was struck by unseasonably warm weather, causing a sweltering heat to smouther the land for !roll! days."
call :roll1d4a
if "!subroll!" leq "2" set "occurance=The disaster was concentrated over !theregion!, and an estimated !peoplekilled! people and !livestockkilled! livestock were lost to the disaster" & set damagerating=4
if "!subroll!"=="3" set "occurance=Most everywhere across the entire nation suffered greatly in the heat. An estimated !nationpeoplekilled! people and !nationlivestockkilled! livestock were lost to the disaster" & set damagerating=6
if "!subroll!"=="4" set "occurance=The disaster was primarily concentrated within !theregion! specificly, but was especilay harsh in the area around !doomedtown!. !doomedtown! lost !onetownpeoplekilled! people and  !onetownlivestockkilled! livestock in the disaster." & set damagerating=2
set "event=!start! !occurance!. The deadly heat is remembered by most as the !negativeword!'s Flame."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDTornado
set "start=the %nationname% was struck by"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=a group of tornadoes which were concentrated in %theregion%, and an estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=a series of great windstorms which caused tornadoes to form across the entire nation. An estimated %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings were lost to the disaster" & set damagerating=6
if "%subroll%"=="4" set "occurance=a great wind storm. %theregion% was the epicenter of the disaster, but the great funnel cloud itself touched down in %doomedtown%. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster." & set damagerating=2
set "event=%start% %occurance%. The disaster is generally remembered as the Howeling Winds of %negativeword%."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDWildfire
set "start=the %nationname% was ravaged by"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=a great wildfire which burned throughout %theregion%. An estimated %peoplekilled% people, %livestockkilled% livestock, and %buildingslost% buildings were lost to the disaster" & set damagerating=4
if "%subroll%"=="3" set "occurance=a series of wildfires which burned across the entire nation. An estimated %nationpeoplekilled% people, %nationlivestockkilled% livestock, and %nationbuildingslost% buildings were lost to the disaster" & set damagerating=6
if "%subroll%"=="4" set "occurance=a large wildfire. %theregion% was the epicenter of the disaster, but %doomedtown% suffered the most. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster." & set damagerating=2
set "event=%start% %occurance%. The disaster is generally remembered as the Flames of %negativeword%."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:NDPlague
set "start=the %nationname% was ravaged by"
call :roll1d4a
if "%subroll%" leq "2" set "occurance=a great plague which struck %theregion%. An estimated %peoplekilled% people and %livestockkilled% livestock succumbed to the disease" & set damagerating=4
if "%subroll%"=="3" set "occurance=a great plague which struck the entire nation. An estimated %nationpeoplekilled% people and %nationlivestockkilled% livestock succumbed to the disease" & set damagerating=6
if "%subroll%"=="4" set "occurance=a large wildfire. %theregion% was the epicenter of the disaster, but %doomedtown% suffered the most. %doomedtown% lost %onetownpeoplekilled% people, %onetownlivestockkilled% livestock, and %onetownbuildingslost% buildings in the disaster." & set damagerating=2
set "event=%start% %occurance%. The disaster is spoken of in hushed whispers as the Wrath of %negativeword%."
set /a milmod=%milmod%-%damagerating%
set /a expamod=%expamod%-%damagerating%
set /a inframod=%inframod%-%damagerating%
set /a agrimod=%agrimod%-%damagerating%
set /a cultremod=%cultremod%-%damagerating%
set /a econmod=%econmod%-%damagerating%
set /a arcanemod=%arcanemod%-%damagerating%
goto:eof

:: --- NEW RESOURCE ---

:NewResource
set "power="
set "type="
set "hero="
set "firstname="
set "lastname="
set "dieroll="
call :namegen
set "dieroll="
set /a dieroll=(%RANDOM% %% 7)+1
if "%dieroll%"=="1" set "hero=Historian"
if "%dieroll%"=="2" set "hero=Millitary Leader"
if "%dieroll%"=="3" set "hero=Explorer"
if "%dieroll%"=="4" set "hero=Adventurer"
if "%dieroll%"=="5" set "hero=Inventor"
if "%dieroll%"=="6" set "hero=Trader"
if "%dieroll%"=="7" set "hero=Mage"
call :matdev
set "event=the %nationname%'s famious %hero% %firstname% %lastname% discovered %finnewmaterial%"
echo %matname% >> "%recorddir%\%nationname% - Materials List.txt"
echo %firstname% %lastname%, a %hero% who discovered %finnewmaterial%>>"%worlddir%\Nations\%nationname%\%nationname% - Historical Figures.txt"
set econmod=%econmod%+4
goto:eof

:: --- GREAT ANIMALS DISCOVERED ---

:RoamingHerds
	set "catagory=animal"
	set "event="
	set "tailshape="
	set "footshape="
	set "legshape="
	set "legnumber="
	set "headdetail="
	set "headshape="
	set "bodyshape="
	set "animal1="
	set "animal2="
	set "animal3="
	set "size="
	set "diet="
	set "creaturename="
	set "aggro="
	set "lifetype="
	set "animaluse="
	call :namegen
	call :creaturenamer
	echo !creaturename! >> "!recorddir!\!nationname! - Unique Animals List.txt"
	set matname=!creaturename!
	call :roll2d4
	if !roll!==2 set "size=diminutive"
	if !roll!==3 set "size=tiny"
	if !roll!==4 set "size=small"
	if !roll!==5 set "size=medium"
	if !roll!==6 set "size=huge"
	if !roll!==7 set "size=giant"
	if !roll!==8 set "size=colossal"
	call :roll1d3
	if !roll!==1 set "diet=herbivore"
	if !roll!==2 set "diet=carnivore"
	if !roll!==3 set "diet=omnivore"
	call :roll1d3
	if !roll!==1 set "aggro=aggressive"
	if !roll!==2 set "aggro=passive"
	if !roll!==3 set "aggro=docile"
	call :roll1d100
	set "intro=scouts from !nationname!"
	if !roll! geq 34 if !roll! leq 66 (
		set "intro=the Adventurer !firstname! !lastname! from !nationname!"
		echo !firstname! !lastname!, an adventurer who discovered the !creaturename!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	if !roll! geq 67 (
		set "intro=the Explorer !firstname! !lastname! from !nationname!"
		echo !firstname! !lastname!, an explorer who discovered the !creaturename!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	call :roll1d3
	if !roll!==1 set "lifetype=are solitary creatures"
	if !roll!==2 set "lifetype=live in packs"
	if !roll!==3 set "lifetype=live in great herds"
	call :roll1d3
	if !roll!==1 set "animaluse=warbeasts" & set "tehmod=milmod"
	if !roll!==2 set "animaluse=hunting partners" & set "tehmod=agrimod"
	if !roll!==3 set "animaluse=companions" & set "tehmod=cultremod"
	if !roll!==4 set "animaluse=livestock" & set "tehmod=agrimod"
	if !roll!==5 set "animaluse=beasts of burden" & set "tehmod=econmod"
	call :roll1d100
	if !roll! leq 20 (
		set fetchedfile=animals
		call :filefetch
		set animal=!name!
		set "event=!intro! discovered a new breed of creature. !size! !diet!s called !creaturename!, which !lifetype!. They greatly resemble !animal!s, with a few key differences. The creatures would make for good %animaluse% if tamed."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
	if !roll! geq 21 if !roll! leq 40 (
		call :choose2animals
		set "event=!intro! discovered a new breed of creature. !size! !diet!s called !creaturename!, which !lifetype!. They are most easily described as a melding of a !animal1! and a !animal2!. The creatures would make for good %animaluse% if tamed."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
	if !roll! geq 41 if !roll! leq 60 (
		call :choose3animals
		set "event=!intro! discovered a new breed of creature. !size! !diet!s called !creaturename!, which !lifetype!. They are most easily described as a melding of a !animal1!, a !animal2!, and a !animal3!. The creatures would make for good %animaluse% if tamed."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
	if !roll! geq 60 (
		call :roll1d11
		if "!roll!"=="1" set "bodyshape=round"
		if "!roll!"=="2" set "bodyshape=long"
		if "!roll!"=="3" set "bodyshape=snake-like"
		if "!roll!"=="4" set "bodyshape=bullet shaped"
		if "!roll!"=="6" set "bodyshape=flat"
		if "!roll!"=="7" set "bodyshape=hunched"
		if "!roll!"=="8" set "bodyshape=bulky"
		if "!roll!"=="9" set "bodyshape=flat"
		if "!roll!"=="10" set "bodyshape=oblong"
		if "!roll!"=="11" set "bodyshape=horse-like"
		call :roll1d8
		if "!roll!"=="1" set "headshape=blunt"
		if "!roll!"=="2" set "headshape=pointed"
		if "!roll!"=="3" set "headshape=sharp"
		if "!roll!"=="4" set "headshape=dog-like"
		if "!roll!"=="6" set "headshape=broad"
		if "!roll!"=="7" set "headshape=flat-faced"
		if "!roll!"=="8" set "headshape=stone-like"
		call :roll1d11
		if "!roll!"=="1" set "headdetail=with two large horns"
		if "!roll!"=="2" set "headdetail=with a single horn"
		if "!roll!"=="3" set "headdetail=adorned with a crest-like ridge"
		if "!roll!"=="4" set "headdetail=covered in thick bone-armor plates"
		if "!roll!"=="6" set "headdetail=adorned with antlers"
		if "!roll!"=="7" set "headdetail=decorated with frills"
		if "!roll!"=="8" set "headdetail=with a snake-like hood"
		if "!roll!"=="9" set "headdetail=with four large eyes"
		if "!roll!"=="10" set "headdetail=split by a great maw"
		if "!roll!"=="11" set "headdetail=with a mouth that conceals a deadly acid spit"
		call :roll1d100
		if "!roll!" leq "20" set legnumber=two
		if "!roll!" geq "21" if "!roll!" leq "80" set legnumber=four
		if "!roll!" geq "81" if "!roll!" leq "90" set legnumber=six
		if "!roll!" geq "91" set legnumber=eight
		call :roll1d7
		if "!roll!"=="1" set "legshape=long and slender"
		if "!roll!"=="2" set "legshape=short"
		if "!roll!"=="3" set "legshape=muscular"
		if "!roll!"=="4" set "legshape=lanky"
		if "!roll!"=="6" set "legshape=bent"
		if "!roll!"=="7" set "legshape=powerful"
		call :roll1d7
		if "!roll!"=="1" set "footshape=hooves"
		if "!roll!"=="2" set "footshape=cloven hooves"
		if "!roll!"=="3" set "footshape=paws"
		if "!roll!"=="4" set "footshape=broad paws"
		if "!roll!"=="6" set "footshape=claws"
		if "!roll!"=="7" set "footshape=talons"
		call :roll1d7
		if "!roll!"=="1" set "tailshape=a round backside lacking a tail"
		if "!roll!"=="2" set "tailshape=a long feline-like tail"
		if "!roll!"=="3" set "tailshape=a short tail"
		if "!roll!"=="4" set "tailshape=a rabbit-like tail"
		if "!roll!"=="6" set "tailshape=a long reptilian-like"
		if "!roll!"=="7" set "tailshape=a blunt tail"
		set "event=!intro! discovered a new breed of creature. Called !creaturename!, they are !size! !diet!s, which !lifetype!. A !creaturename! looks like nothing else, possessing a !headshape! head !headdetail!, !legnumber! legs !legshape! ending in !footshape!, and !tailshape!. The creatures would make for good %animaluse% if tamed."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
)
goto:eof






:: --- LEGENDARY MONSTER AWAKENS ---

:MonsterAwakens
set "type="
set "name="
set "event="
set fetchedfile=legendarymonstertypes
call :filefetch
set "type=%name%"
set fetchedfile=monsternames
call :filefetch
set "name=%name%"
set "event=The legendary %type%, %name%, emerges within %nationname%'s lands, proving to be an existential threat in short order."
echo %name% >> "%recorddir%\%nationname% - Monster Neighbors.txt"

set /a milmod=%milmod%-2
set /a expamod=%expamod%-2
set /a inframod=%inframod%-2
set /a agrimod=%agrimod%-2
set /a cultremod=%cultremod%-2
set /a econmod=%econmod%-2
set /a arcanemod=%arcanemod%-2
goto:eof

:: ---- ECONOMY GENERATOR ----

:economysetup
set "number="
set "econflag="
call :roll3d6
if %dieroll%==3 set "economy= went bankrupt" & set "number=3" & set "econflag=1"
if %dieroll% geq 4 if %dieroll% leq 7 set "economy='s economy did poorly" & set "number=2" & set "econflag=1"
if %dieroll% geq 8 if %dieroll% leq 9 set "economy='s economy was down" & set "number=1" & set "econflag=1"
if %dieroll% geq 10 if %dieroll% leq 12 set "economy='s economy was fine" & set "number=1" & set "econflag=2"
if %dieroll% geq 13 if %dieroll% leq 14 set "economy='s economy was up" & set "number=2" & set "econflag=2"
if %dieroll% geq 15 if %dieroll% leq 17 set "economy='s economy did great" & set "number=3" & set "econflag=2"
if %dieroll%==18 set "economy= was oppulently wealthy" & set "number=4" & set "econflag=2"
set "ecomod="
if %dieroll% leq 5 set ecomod=2
if %dieroll% geq 6 if %dieroll% leq 8 set ecomod=1
if %dieroll% geq 9 if %dieroll% leq 12 set ecomod=0
if %dieroll% geq 13 if %dieroll% leq 15 set ecomod=-1
if %dieroll% geq 16 set ecomod=-2
if "%econflag%"=="1" (
	call :econsubtract
	set fetchedfile=economydownreasons
	call :filefetch
	set "reason=!name!"
) else (
	call :econadd
	set fetchedfile=economyupreasons
	call :filefetch
	set "reason=!name!"
)
set "fineconomy=%economy% due to %reason%"
goto:eof


:empireexcells
set "expert="
set "area="
set "excelflag="
set "tehmod="
set "excells="
set "action="
call :roll3d6
if %dieroll%==3 set "area=Music"
if %dieroll%==4 set "area=Alchemy"
if %dieroll%==5 set "area=Artistic Trinkets"
if %dieroll%==6 set "area=Mining"
if %dieroll%==7 set "area=Exploration"
if %dieroll%==8 set "area=Seafaring"
if %dieroll%==9 set "area=Fine Carpentry"
if %dieroll%==10 set "area=A type of weaponry"
if %dieroll%==11 set "area=metallurgy"
if %dieroll%==12 set "area=the culinary arts"
if %dieroll%==13 set "area=a fighting style"
if %dieroll%==14 set "area=arcane education"
if %dieroll%==15 set "area=trade"
if %dieroll%==16 set "area=horsemanship"
if %dieroll%==17 set "area=metal working"
if %dieroll%==18 set "area=animal husbandry"
if "%area%"=="Music" set "fetchedfile=musicandplays" & set excelflag=1
if "%area%"=="Alchemy" set "fetchedfile=chemistry" & set excelflag=2
if "%area%"=="Artistic Trinkets" set "fetchedfile=artists" & set excelflag=3
if "%area%"=="Mining" set "fetchedfile=miners" & set excelflag=4
if "%area%"=="Exploration" set "fetchedfile=explorers" & set excelflag=5
if "%area%"=="Seafaring" set "fetchedfile=captains" & set excelflag=5
if "%area%"=="Fine Carpentry" set "fetchedfile=carpenters" & set excelflag=3
if "%area%"=="A type of weaponry" set "fetchedfile=weaponsmith" & set excelflag=6
if "%area%"=="metallurgy" set "fetchedfile=metalurgy" & set excelflag=7
if "%area%"=="the culinary arts" set "fetchedfile=chefs" & set excelflag=8
if "%area%"=="a fighting style" set "fetchedfile=warriors" & set excelflag=9
if "%area%"=="arcane education" set "fetchedfile=teachers" & set excelflag=10
if "%area%"=="trade" set "fetchedfile=merchants" & set excelflag=5
if "%area%"=="horsemanship" set "fetchedfile=equestrians" & set excelflag=11
if "%area%"=="metal working" set "fetchedfile=metalworkers" & set excelflag=3
if "%area%"=="animal husbandry" set "fetchedfile=ranchers" & set excelflag=12
call :filefetch
set "expert=%name%"
if "%excelflag%"=="1" set "fetchedfile=greatmusicoutcomes" & set "tehmod=cultremod"
if "%excelflag%"=="2" set "fetchedfile=greatchemistryoutcomes" & set "tehmod=arcanemod"
if "%excelflag%"=="3" set "fetchedfile=greatartoutcomes" & set "tehmod=cultremod"
if "%excelflag%"=="4" set "fetchedfile=greatminingoutcomes" & set "tehmod=inframod"
if "%excelflag%"=="5" set "fetchedfile=greatexplorationoutcomes" & set "tehmod=expamod"
if "%excelflag%"=="6" set "fetchedfile=greatweaponoutcomes" & set "tehmod=milmod"
if "%excelflag%"=="7" set "fetchedfile=greatmealurgyoutcomes" & set "tehmod=econmod"
if "%excelflag%"=="8" set "fetchedfile=greatcullenaryoutcomes" & set "tehmod=cultremod"
if "%excelflag%"=="9" set "fetchedfile=greatmarshaloutcomes" & set "tehmod=milmod"
if "%excelflag%"=="10" set "fetchedfile=greatscholaroutcomes" & set "tehmod=arcanemod"
if "%excelflag%"=="11" set "fetchedfile=greatequestrianoutcomes" & set "tehmod=milmod"
if "%excelflag%"=="12" set "fetchedfile=greatranchoutcomes" & set "tehmod=agrimod"
call :filefetch
set "action=%name%"
set "excells=%nationname% excelled at %area% in this period. While this was the doings of many, the foremost %expert% of the Cycle was %firstname% %lastname%, who %action%."
set /a math=%tehmod%+4
set %tehmod%=%math%
goto:eof

exit /b

::-----------------
::
:: Subroutines
::
::-----------------

:: ---- File Fetcher ----

:filefetch
set "name="
set "LINE="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :CONT
)
:CONT
set name=%LINE%
goto:eof

:: --- Data Fetch ---

:datafetch
cd /D "%recorddir%"
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :DATACONT
)
:DATACONT
set name=%LINE%
cd /D "%~dp0data"
goto:eof

:: --- Worlddir Fetch ---

:worlddirfetch
cd /d "%worlddir%"
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :WDCONT
)
:WDCONT
set name=%LINE%
cd /D "%~dp0data"
goto:eof

:: --- Person Name Generator ---

:namegen
set "firstname="
set "lastname="
call :languageloader
set fetchedfile=%firstnames%
call :filefetch
set firstname=%name%
set fetchedfile=%lastnames%
call :filefetch
set lastname=%name%
goto:eof

::-----------------
::  Millitary Town Namer
::-----------------

:milltownnamer
set "townpre="
set "townmain="
set "townsuff="
set "cityname="
set fetchedfile=MillTownPrefix
call :filefetch
set townpre=%name%
set fetchedfile=TownMain
call :filefetch
set townmain=%name%
set fetchedfile=TownSuffix
call :filefetch
set townsuff=%name%
set "cityname=%townpre% %townmain%%townsuff%"
goto:eof

::-----------------
:: Number Appender
::-----------------

:numberappender
set "numsuf="
set "numeral="
set test=%eventyear:~-1%
set numsuf=th
if "%test%"=="1" set numsuf=st
if "%test%"=="2" set numsuf=nd
if "%test%"=="3" set numsuf=rd
set "numeral=%eventyear%%numsuf%"
if "%eventyear%"=="11" set "numeral=11th"
if "%eventyear%"=="12" set "numeral=12th"
if "%eventyear%"=="13" set "numeral=13th"
goto:eof

:: --------------
:: Flag Generator
:: --------------

:flaggen
set "dieroll="
set "location="
set "symbol="
set "shape="
set "color1="
set "color2="
set "color3="
set "color4="
set "flagpart="
set "flagpart1="
set "flagpart2="
set "orientation="
set "orientdescript="
set "flag="
set /a dieroll=(%RANDOM% %% 100)+1
if %dieroll% leq 25 (
	call :choose2colors
	call :roll1d100
	if !roll! leq 50 (
			set fetchedfile=symbols
			call :filefetch
			set "symbol=!name!"
			call :symbollocator
			set "flag=a !color1! field with a !color2! !symbol! symbol in the !location!"
		)
		if !roll! gtr 50 (
			set fetchedfile=flagparts
			call :filefetch
			set "flagpart=!name!"
			set "flag=a !color1! field with a !color2! !flagpart!"
		)
)
if %dieroll% gtr 25 if %dieroll% leq 75 (
	call :choose3colors
	call :roll1d100
	if !roll! leq 33 (
		set fetchedfile=symbols
		call :filefetch
		set "symbol=!name!"
		set fetchedfile=flagparts
		call :filefetch
		set "flagpart=!name!"
		call :symbollocator
		set "flag=a !color1! field with a !color2! !flagpart! and a !color3! !symbol! symbol in the !location!"
	)
	if !roll! gtr 34 if !roll! leq 66 (
		call :choose2flagparts
		set fetchedfile=symbols
		call :filefetch
		set "symbol=!name!"
		call :roll1d100B
		if !roll2! leq 33 set "flag=a !color1! field with a !color2! !flagpart1! featuring a !color3! border around the !flagpart1!"
		if !roll2! gtr 34 if !dieroll! leq 66 set "flag=a !color1! field with a !color2! !flagpart1! and a !color3! !flagpart2!"
		if !roll2! gtr 66 set "flag=a !color1! field with a !color2! !flagpart1! and a !color3! !symbol! symbol in the !flagpart1!"
	)
	if !roll! gtr 66 (
		call :roll1d100B
		set orientation=horosontal
		set "orientdescript=left to right"
		if !roll2! geq 50 set orientation=vertical
		if !roll2! geq 50 set "orientdescript=top to bottom"
		set "flag=three !orientation! stripes which are !color1!, !color2!, and !color3! !orientdescript!"
	)
)
if %dieroll% gtr 75 (
	call :choose4colors
	call :roll1d100
	if !roll! leq 33 (
		set fetchedfile=symbols
		call :filefetch
		set "symbol=!name!"
		set fetchedfile=flagparts
		call :filefetch
		set "flagpart=!name!"
		call :symbollocator
		call :shapepicker
		call :roll1d100
		if !roll! leq 55 (
			set "flag=a !color1! field with a !color2! !flagpart! and a !color3! and !color4! !symbol! symbol"
		) else (
			set "flag=a !color1! field with a !color2! !flagpart! and a !color3! !symbol! symbol within a !color4! !shape! in the !location!"
			)
	)
	if !roll! gtr 34 if !roll! leq 66 (
		set fetchedfile=flagparts
		call :filefetch
		set "flagpart1=!name!"
		call :filefetch
		set "flagpart2=!name!"
		if "!flagpart1!"=="!flagpart2!" (
			call :filefetch
			set "flagpart2=!name!"
			set "flag=a !color1! field with a !color2! !flagpart1! featuring a !color3! border around the !flagpart1! as well as a !color4! !flagpart2!"
		)
		set "flag=a !color1! field with a !color2! !flagpart1! featuring a !color3! border around the !flagpart1! as well as a !color4! !flagpart2!"
	)
	if !roll! gtr 66 (
		call :roll1d100B
		set orientation=horosontal
		set "orientdescript=left to right"
		if !roll2! geq 50 set orientation=vertical
		if !roll2! geq 50 set "orientdescript=top to bottom"
		set "flag=three !orientation! stripes which are !color1!, !color2!, !color3!, and !color4! !orientdescript!"
	)
)
goto:eof

:: --- Symbol Locator ---

:symbollocator
set "dieroll="
set "location="
set /a dieroll=(%RANDOM% %% 100)+1
if %dieroll% leq 5 set "location=top right"
if %dieroll% geq 6 if %dieroll% leq 10 set "location=top left"
if %dieroll% geq 11 if %dieroll% leq 15 set "location=bottom right"
if %dieroll% geq 16 if %dieroll% leq 20 set "location=bottom left"
if %dieroll% geq 21 set "location=center"
goto:eof

:: --- Shape Picker ---

:shapepicker
set "dieroll="
set "shape="
set /a dieroll=(%RANDOM% %% 100)+1
if "%dieroll%"=="1" set "shape=circle"
if "%dieroll%"=="2" set "shape=diamond"
if "%dieroll%"=="3" set "shape=rhombus"
if "%dieroll%"=="4" set "shape=triangle"
if "%dieroll%"=="5" set "shape=square"
if "%dieroll%"=="6" set "shape=rectangle"
goto:eof

:: --- HERO MAKER ---

:heromaker
set "hero1="
set "tehmod="
set "heros="
call :namegen
call :roll3d6
if "%dieroll%"=="3" set "hero1=Musician" & set "tehmod=cultremod"
if "%dieroll%"=="4" set "hero1=Sculptor" & set "tehmod=cultremod"
if "%dieroll%"=="5" set "hero1=Artist" & set "tehmod=cultremod"
if "%dieroll%"=="6" set "hero1=Poet" & set "tehmod=cultremod"
if "%dieroll%"=="7" set "hero1=Author" & set "tehmod=cultremod"
if "%dieroll%"=="8" set "hero1=Historian" & set "tehmod=arcanemod"
if "%dieroll%"=="9" set "hero1=Military Leader" & set "tehmod=milmod"
if "%dieroll%"=="10" set "hero1=City Leader" & set "tehmod=cultremod"
if "%dieroll%"=="11" set "hero1=Explorer" & set "tehmod=expamod"
if "%dieroll%"=="12" set "hero1=Adventurer" & set "tehmod=expamod"
if "%dieroll%"=="13" set "hero1=Inventor" & set "tehmod=inframod"
if "%dieroll%"=="14" set "hero1=Diplomat" & set "tehmod=cultremod"
if "%dieroll%"=="15" set "hero1=Trader" & set "tehmod=econmod"
if "%dieroll%"=="16" set "hero1=Humanitarian" & set "tehmod=cultremod"
if "%dieroll%"=="17" set "hero1=Mage" & set "tehmod=arcanemod"
if "%dieroll%"=="18" set "hero1=Beast Tamer" & set "tehmod=agrimod"
set "heros=the %hero1% %firstname% %lastname%"
set /a math=%tehmod%+2
set %tehmod%=%math%
goto:eof

:: --- Scientific FIeld Selector ---

:scientificfieldpicker
set "dieroll="
set "field="
set /a dieroll=(%RANDOM% %% 13)+1
if "%dieroll%"=="1" set "field=mathematics"
if "%dieroll%"=="2" set "field=literature"
if "%dieroll%"=="3" set "field=chemistry"
if "%dieroll%"=="4" set "field=alchemy"
if "%dieroll%"=="5" set "field=arcane"
if "%dieroll%"=="6" set "field=medicine"
if "%dieroll%"=="7" set "field=physics"
if "%dieroll%"=="8" set "field=metallurgy"
if "%dieroll%"=="9" set "field=logic"
if "%dieroll%"=="10" set "field=statistics"
if "%dieroll%"=="11" set "field=zoology"
if "%dieroll%"=="12" set "field=botany"
if "%dieroll%"=="13" set "field=agriculture"
goto:eof

:: ---------------------
::
::     Town Founder
::
:: ---------------------

:townfounder
if not exist "%recorddir%\Settlments" mkdir "%recorddir%\Settlments"

set "dice1="
set "townpre="
set "townmain="
set "townsuff="
set "cityname="
set "resource="
set "action="
set "outcome="
set "fiends="
	set "outputlocation=%worlddir%\Nations\%nationname%"
	set "outputname=%nationname%"
if "%newkingdomfounding%"=="1" (
	set "outputlocation=%worlddir%\Nations\%newnationname%"
	set "outputname=%newnationname%"
	if not exist "%worlddir%\Nations\%newnationname%\Settlments" mkdir "%worlddir%\Nations\%newnationname%\Settlments"
)

call :languageloader

set test=%townfirst:~-1%
if "%test%"=="1" (
	call :roll1d6
	if !roll! leq 4 (
		set "fetchedfile=!TownFirst!"
		call :filefetch
		set "townpre=!name!"
		set "fetchedfile=!TownMid!"
		call :filefetch
		set "townmain=!name!"
		set "fetchedfile=!TownEnd!"
		call :filefetch
		set "townsuff=!name!"
		set "cityname=!townpre! !townmain!!townsuff!"
	)
	if !roll! geq 5 (
		set "fetchedfile=!TownFirst!"
		call :filefetch
		set "townmain=!name!"
		set "fetchedfile=!TownEnd!"
		call :filefetch
		set "townsuff=!name!"
		set "cityname=!townmain!!townsuff!"
	)
) else (
	call :roll1d6
	if !roll! leq 4 (
		set "fetchedfile=!TownFirst!"
		call :filefetch
		set "townpre=!name!v
		set "fetchedfile=!TownMid!"
		call :filefetch
		set "townmain=!name!"
		set "fetchedfile=!TownEnd!"
		call :filefetch
		set "townsuff=!name!"
		set "cityname=!townpre!!townmain!!townsuff!"
	)
	if !roll! geq 5 (
		set "fetchedfile=!TownFirst!"
		call :filefetch
		set "townmain=!name!"
		set "fetchedfile=!TownEnd!"
		call :filefetch
		set "townsuff=!name!"
		set "cityname=!townmain!!townsuff!"
	)
)
if "%milltownflag%"=="1" (
	set fetchedfile=MillTownPrefix
	call :filefetch
	set "milltype=!name!"
	set "cityname=!milltype! !cityname!"
)



:towntype
if "%milltownflag%"=="1" (
	set "resource=millitary"
	set "resourceterm=a perceived weakness in !nationname!'s defenses"
	call :towntypemod5
	set tff=1
) else (
	call :roll1d16
	if "!roll!"=="1" (
		set "resource=food producing"
		set "resourceterm=a wave of food shortages"
		call :towntypemod1
		set tff=2
	)
	if "!roll!"=="2" (
		set "resource=mining"
		set "resourceterm=the discovery of a valuable mineral deposit"
		call :towntypemod2
		set tff=3
	)
	if "!roll!"=="3" (
		set "resource=industrial"
		set "resourceterm=pressure from the tradesmen guilds seeking to expand their businesses"
		call :towntypemod3
		set tff=3
	)
	if "!roll!"=="4" (
		set "resource=trade"
		set "resourceterm=problems within the trade network result in"
		call :towntypemod4
		set tff=4
	)
	if "!roll!"=="5" (
		set "resource=millitary"
		set "resourceterm=a perceived weakness in !nationname!'s defenses"
		call :towntypemod5
		set tff=1
	)
	if "!roll!"=="6" (
		set "resource=religious"
		set "resourceterm=the church's insistance on expanding the reach of their faith"
		call :towntypemod6
		set tff=5
	)
)
if "%tff%"=="1" set /a milmod=%milmod%+2
if "%tff%"=="1" set /a econmod=%econmod%+2
if "%tff%"=="2" set /a econmod=%econmod%+2
if "%tff%"=="2" set /a agrimod=%agrimod%+2
if "%tff%"=="3" set /a inframod=%inframod%+2
if "%tff%"=="3" set /a econmod=%econmod%+2
if "%tff%"=="4" set /a cultremod=%cultremod%+2
if "%tff%"=="4" set /a econmod=%econmod%+2
if "%tff%"=="5" set /a cultremod=%cultremod%+2
if "%tff%"=="5" set /a arcanemod=%arcanemod%+2




:townfounding
set "roll="
set "location="
set "shortloc="
set "dieroll="
set fetchedfile=hivesandswarms
call :filefetch
set "fiends=%name%"
call :namegen
set "dudebro=%firstname% %lastname%"
set "fetchedfile=%nationgovtitles%"
call :filefetch
set "townfoundername=%name% %dudebro%"

echo %townfoundername%, founder of %cityname%>>"%outputlocation%\%outputname% - Historical Figures.txt"

set "holdingline="
set fetchedfile=townfoundingaction
call :filefetch
set "holdingline=%name%"
set "holdingline=%holdingline:[nationname]=!nationname!%"
set "holdingline=%holdingline:[cityname]=!cityname!%"
set "holdingline=%holdingline:[fiends]=!fiends!%"
set "holdingline=%holdingline:[townfoundername]=!townfoundername!%"
set "foundingoutcome=The founding of %cityname% %holdingline%"


call :roll1d28
if "%roll%"=="28" set "location=along the edge of a cliff" & set "shortloc=cliffside"
if "%roll%"=="27" set "location=upon the side of a cliff" & set "shortloc=cliffside"
if "%roll%"=="26" set "location=along a major road" & set "shortloc=roadside"
if "%roll%"=="25" set "location=on a river delta" & set "shortloc=rivertop"
if "%roll%"=="24" set "location=next to a river delta" & set "shortloc=riverside"
if "%roll%"=="23" set "location=within a forest" & set "shortloc=wooded"
if "%roll%"=="22" set "location=next to a forest" & set "shortloc=wooded"
if "%roll%"=="21" set "location=on the side of a minor river" & set "shortloc=riverside"
if "%roll%"=="20" set "location=on either side of a minor river" & set "shortloc=riverside"
if "%roll%"=="19" set "location=on the side of a major river" & set "shortloc=riverside"
if "%roll%"=="18" set "location=on either side of a major river" & set "shortloc=riverside"
if "%roll%"=="17" set "location=in the middle of a large expanse of grassland" & set "shortloc=agrarian"
if "%roll%"=="16" set "location=in a swamp" & set "shortloc=byou"
if "%roll%"=="15" set "location=next to a swamp" & set "shortloc=boggside"
if "%roll%"=="14" set "location=at the intersection of two rivers" & set "shortloc=riverside"
if "%roll%"=="13" set "location=at the intersection of several rivers" & set "shortloc=riverside"
if "%roll%"=="12" set "location=at the intersection of two minor roads" & set "shortloc=roadside"
if "%roll%"=="11" set "location=at the intersection of two major roads" & set "shortloc=roadside"
if "%roll%"=="10" set "location=at the intersection of several roads" & set "shortloc=roadside"
if "%roll%"=="9" set "location=next to a natural spring" & set "shortloc=lakeside"
if "%roll%"=="8" set "location=around a natural spring" & set "shortloc=lakeside"
if "%roll%"=="7" set "location=next to a mage-spring" & set "shortloc=lakeside"
if "%roll%"=="6" set "location=around a mage-spring" & set "shortloc=lakesideside"
if "%roll%"=="5" set "location=atop a large hill" & set "shortloc=hilltop"
if "%roll%"=="4" set "location=on the side of a large hill" & set "shortloc=hillside"
if "%roll%"=="3" set "location=in a valley formed by a sereis of large hills" & set "shortloc=valley"
if "%roll%"=="2" set "location=in a mountain valley" & set "shortloc=valley"
if "%roll%"=="1" set "location=on the side of a mountain" & set "shortloc=mountain"

set "roll="
set /a roll=(%random% %% 100)+1
if "%firstcityflag%"=="1" set roll=105
if "%secondcityflag%"=="1" set /a roll=(%RANDOM% %% 20)+87
if "%thirdcityflag%"=="1" set /a roll=(%RANDOM% %% 20)+87

if %roll% leq 5 (
	set "size=Thorp"
	set shortsize=thorp
	set "buildnum2=scant few structures"
)
if %roll% geq 6 (
	set "size=Hamlet"
	set shortsize=hamlet
	set "buildnum2=few structures"
)
if %roll% geq 11 (
	set "size=Village"
	set shortsize=village
	set "buildnum2=humble selection of homes and shops"
)
if %roll% geq 56 (
	set "size=Small Town"
	set shortsize=town
	set "buildnum2=modest number of homes, shops, and establishments"
)
if %roll% geq 66 (
	set "size=Medium Town"
	set shortsize=town
	set "buildnum2=growing array of homes, shops, and other establishments"
)
if %roll% geq 76 (
	set "size=Large Town"
	set shortsize=town
	set "buildnum2=many homes, shops, chapels, and other establishments"
)
if %roll% geq 86 (
	set "size=Small City"
	set shortsize=city
	set "buildnum2=many homes, shops, churches, and other establishments"
)
if %roll% geq 96 (
	set "size=Medium City"
	set shortsize=city
	set "buildnum2=wealth of homes, shops, churches, and other establishments"
)
if "%roll%"=="99" (
	set "size=Large City"
	set shortsize=city
	set "buildnum2=plethora of homes, temples, shops, and establishments"
)
if %roll% geq 100 (
	set "size=Metropolis"
	set shortsize=metropolis
	set "buildnum2=excess of homes, manors, shops, cathedrals, arenas, and other establishments"
)
if "%size%"=="Metropolis" set /a "population=(%RANDOM% %% 300000)+150000" & set "sizemod=6" & set "buildnum=countless"
if "%size%"=="Large City" set /a "population=(%RANDOM%*27000/32768)+12000" & set "sizemod=4" & set "size=Large City" & set "buildnum=vast array of"
if "%size%"=="Medium City" set /a "population=(%RANDOM%*10500/32768)+8000" & set "sizemod=2" & set "size=Medium City" & set "buildnum=sprawling"
if "%size%"=="Small City" set /a "population=(%RANDOM%*8500/32768)+6000" & set "sizemod=1" & set "size=Small City" & set "buildnum=many"
if "%size%"=="Large Town" set /a "population=(%RANDOM%*5500/32768)+3000" & set "sizemod=1" & set "size=Large Town" & set "buildnum=good number of"
if "%size%"=="Medium Town" set /a "population=(%RANDOM%*2500/32768)+1000" & set "sizemod=0" & set "size=Medium Town" & set "buildnum=many"
if "%size%"=="Small Town" set /a "population=(%RANDOM%*800/32768)+200" & set "sizemod=0" & set "size=Small Town" & set "buildnum=modest selection of"
if "%size%"=="Village" set /a "population=(%RANDOM%*500/32768)+200" & set "sizemod=-1" & set "buildnum=handfull of"
if "%size%"=="Hamlet" set /a "population=(%RANDOM%*250/32768)+80" & set "sizemod=-2" & set "buildnum=few"
if "%size%"=="Thorp" set /a "population=(%RANDOM%*120/32768)+40" & set "sizemod=-4" & set "buildnum=scant few"

set "roll="
set /a roll=((%random% %% 100)+1)+%sizemod%
if %roll% geq 100 set "popden=who live in terribly cramped conditions"
if %roll% leq 99 if %roll% geq 98 set "popden=who are crammed into extremely close quarters"
if %roll% leq 97 if %roll% geq 91 set "popden=living in quite the dense urban environment"
if %roll% leq 90 if %roll% geq 81 set "popden=living in a fairly dense urban environment"
if %roll% leq 80 if %roll% geq 21 set "popden=with each having enough space to be comfortable"
if %roll% leq 20 if %roll% geq 11 set "popden=who enjoy fairly spacious yards"
if %roll% leq 10 if %roll% geq 4 set "popden=who enjoy extremely spacious dwellings and yards"
if %roll% leq 3 if %roll% geq 2 set "popden=who clearly prefer their personal space, given the distance between dwellings"
if %roll% leq 1 set "popden=spread out almost unnaturally far from one another"

::set /a xvalue=(%random% %% 100)+1
::set /a yvalue=(%random% %% 100)+1

::if %xvalue% leq 33 set moral=Evil
::if %xvalue% geq 34 if %xvalue% leq 66 set moral=Neutral
::if %xvalue% geq 67 set moral=Good

::if %yvalue% leq 33 set ethic=Chaotic
::if %yvalue% geq 34 if %yvalue% leq 66 set ethic=Neutral
::if %yvalue% geq 67 set ethic=Lawful

::set "alignment=%ethic% %moral%"
::if "%ethic%"=="%moral%" set "alignment=True Neutral"
::set "fullalignment=%ethic% %moral% ^(%yvalue%, %xvalue%^)"


set "roll="
set /a roll=(%random% %% 19)+1
if "%roll%"=="19" (
	set "leadership=Mageocrasy"
	set leader=archmage
)
if "%roll%"=="18" (
	set "leadership=City Council"
	set leader=council
)
if "%roll%"=="17" (
	set "leadership=Technocrasy"
	set leader=board
)
if "%roll%"=="16" (
	set "leadership=Guild Holding"
	set leader=Guildmaster
)
if "%roll%"=="15" (
	set leadership=Lordship
	set leader=Lord
)
if "%roll%"=="14" (
	set leadership=Oligarchy
	set "leader=Grand Banker"
)
if "%roll%"=="13" (
	set leadership=Oligarchy
	set leader=Representatives
)
if "%roll%"=="12" (
	set leadership=Oligarchy
	set leader=Fellowship
)
if "%roll%"=="11" (
	set leadership=Township
	set leader=Mayor
)
if "%roll%"=="10" (
	set leadership=Township
	set "leader=Lord Mayor"
)
if "%roll%"=="9" (
	set leadership=Plutocracy
	set "leader=Land Lords"
)
if "%roll%"=="8" (
	set leadership=Aristocracy
	set "leader=Council of Local Lords"
)
if "%roll%"=="7" (
	set leadership=Aristocracy
	set "fetchedfile=%nationgovtitles%"
	call :filefetch
	set "leader=A %name%"
)
if "%roll%"=="6" (
	set leadership=Aristocracy
	set "leader=Council of Noble Houses"
)
if "%roll%"=="5" (
	set leadership=Theocrasy
	set "leader=The Local Church"
)
if "%roll%"=="4" (
	set "leadership=City State"
	set "leader=High Lord"
)
if "%roll%"=="3" (
	set "leadership=City State"
	set leader=Laird
)
if "%roll%"=="2" (
	set "leadership=City State"
	set leader=Warlord
)
if "%roll%"=="1" (
	set "leadership=City State"
	set "fetchedfile=%nationgovtitles%"
	call :filefetch
	set "leader=A !name!"
)



:racemaker
call :nationracenumcounter
if "%numberofraces%"=="1" goto RMOne
if "%numberofraces%"=="2" goto RMTwo
:RMMany

call :raceconfig3
set "foundingrace=%race1%"
set "towntype=%race1adj%"
set "demographics=%majoirty%%% %race1%, %minority1%%% %race2%, and %minority2%%% %race3%, with a %hyperminority%%% %race4% minority"
goto racespicked

:RMOne

call :raceconfig
set "foundingrace=%race1%"
set "towntype=%race1adj%"
set "demographics=%majoirty%%% %race1%, with a %minority%%% %race2adj% minority" 
goto racespicked
:RMTwo

call :raceconfig2
set "foundingrace=%race1%"
set "towntype=%race1adj%"
set "demographics=%majoirty%%% %race1%, and %minority%%% %race2%, with a %hyperminority%%% a %race3% minority"
goto racespicked

:racespicked

set "outputlocation=%worlddir%\Nations\%nationname%"
set "outputname=%nationname%"

if "%newkingdomfounding%"=="1" (
	set "outputlocation=%worlddir%\Nations\%newnationname%"
	set "outputname=%newnationname%"
)


set fetchedfile=townbuildingstyles
call :filefetch
set "style=%name%"

::selects a terrain feature for the natural feature street pattern result, and ensures it is logical for the town's location


cd /D "%outputlocation%"
set "fetchedfile=%outputname% - Regions"

for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :DATACONT
)
:DATACONT
set "regionname=%LINE%"
cd /D "%~dp0data"

(
set /p regiondisc=
set /p riverflag=
set /p hillflag=
set /p mountainflag=
set /p lakeflag=
set /p pondflag=
set /p swampflag=
)<"%worlddir%\Regions\%regionname%.txt"

:townlocationlooper
set /a roll=(%random% %% 6)+1
if "%roll%"=="1" if "%riverflag%"=="1" goto townrivermaker
if "%roll%"=="2" if "%hillflag%"=="1" goto townhillmaker
if "%roll%"=="2" if "%daleflag%"=="1" goto townhillmaker
if "%roll%"=="3" if "%mountainflag%"=="1" goto townmountainmaker
if "%roll%"=="4" if "%lakeflag%"=="1" goto townlakemaker
if "%roll%"=="5" if "%pondflag%"=="1" goto townpondmaker
if "%roll%"=="6" if "%swampflag%"=="1" goto townswampmaker
goto townrivermaker

:townrivermaker
call :roll1d5
if "%roll%"=="1" (
	set fetchedfile=rivernames
	call :filefetch
	set "river1=!name!"
	call :filefetch 
	set "river2=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "river1=!river1! !name!"
	call :filefetch 
	set "river2=!river2! !name!"
	set "feature=rivers"
	set "location=at the intersection of !river1! and !river2!, two major rivers within the !regionname!"
	set "shortloc=riverside"
)
if "%roll%"=="2" (
	set fetchedfile=rivernames
	call :filefetch
	set "river1=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "river1=!river1! !name!"
	set "feature=rivers"
	set "location=on the side of !river1!, a minor river within the !regionname!"
	set "shortloc=riverside"
)
if "%roll%"=="3" (
	set fetchedfile=rivernames
	call :filefetch
	set "river1=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "river1=!river1! !name!"
	set "feature=rivers"
	set "location=on either side of !river1!, a minor river within the !regionname!"
	set "shortloc=riverside"
)
if "%roll%"=="4" (
	set fetchedfile=rivernames
	call :filefetch
	set "river1=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "river1=!river1! !name!"
	set "feature=rivers"
	set "location=on the side of !river1!, a major river within the !regionname!"
	set "shortloc=riverside"
)
if "%roll%"=="5" (
	set fetchedfile=rivernames
	call :filefetch
	set "river1=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "river1=!river1! !name!"
	set "feature=rivers"
	set "location=on either side of !river1!, a major river within the !regionname!"
	set "shortloc=riverside"
)
goto townlocfin
:townhillmaker
call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=mountainnames
	call :filefetch
	set "hill1=!name!"
	set fetchedfile=hilltypes
	call :filefetch
	set "hill1=!hill1! !name!"
	set "feature=hill"
	set "location=on the side of !hill1!, a large hill within the !regionname!"
	set "shortloc=hillside"
)
if "%roll%"=="2" (
	set fetchedfile=mountainnames
	call :filefetch
	set "hill1=!name! Valley"
	set "feature=valley"
	set "location=in !hill1!, a valley formed by a series of large hills within the !regionname!"
	set "shortloc=valley"
)
if "%roll%"=="3" (
	set fetchedfile=mountainnames
	call :filefetch
	set "hill1=!name! Dale"
	set "feature=dale"
	set "location=in !hill1!, a broad and shallow valley in the middle of a small range of hills within the !regionname!"
	set "shortloc=valley"
)
goto townlocfin
:townmountainmaker
call :roll1d6
if "%roll%"=="1" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mount1=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "mount1=!mount1! !name!"
	set "feature=mountain"
	set "location=on the side of !mount1!, a mountain within the !regionname!"
	set "shortloc=mountain"
)
if "%roll%"=="2" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mount1=!name!"
	call :filefetch
	set "mount2=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "mount1=!mount1! !name!"
	call :filefetch
	set "mount2=!mount2! !name!"
	set "feature=gorge"
	set "location=in a mountian valley between !mount1! and !mount2!, a pair of mountains within the !regionname!"
	set "shortloc=valley"
)
if "%roll%"=="3" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mount1=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "mount1=!mount1! !name!"
	set "feature=gorge"
	set "location=in a gorge on the side of !mount1!, a mountain within the !regionname!"
	set "shortloc=mountain"
)
if "%roll%"=="4" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mount1=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "mount1=!mount1! !name!"
	set "feature=cliff"
	set "location=along the edge of a cliff situated on !mount1!, a mountain within the !regionname!"
	set "shortloc=cliffside"
)
if "%roll%"=="5" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mount1=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "mount1=!mount1! !name!"
	set "feature=cliff"
	set "location=upon the side of a cliff situated on !mount1!, a mountain within the !regionname!"
	set "shortloc=cliffside"
)
if "%roll%"=="6" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mount1=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "mount1=!mount1! !name!"
	set "feature=valley"
	set "location=in a mountian valley located between the peaks of !mount1!, a mountain within the !regionname!"
	set "shortloc=valley"
)
goto townlocfin
:townpondmaker
set fetchedfile=lakenames
call :filefetch
set "lake1=!name!"
set fetchedfile=pondtypes
call :filefetch
set "lake1=!lake1! !name!"
set "feature=pond"
set "location=next to !lake1!, a natural spring within the !regionname!"
set "shortloc=lakeside"

goto townlocfin
:townlakemaker
set fetchedfile=lakenames
call :filefetch
set "lake1=!name!"
set fetchedfile=laketypes
call :filefetch
set "lake1=!lake1! !name!"
set "feature=lake"
set "location=next to !lake1!, a lake within the !regionname!"
set "shortloc=lakeside"

goto townlocfin
:townswampmaker
call :roll1d2
if "%roll%"=="1" (
	set fetchedfile=swampnames
	call :filefetch
	set "swamp1=!name!"
	set fetchedfile=swamptypes
	call :filefetch
	set "swamp1=!swamp1! !name!"
	set "feature=swamp"
	set "location=in !swamp1!, a swamp within the !regionname!"
	set "shortloc=byou"
)
if "%roll%"=="2" (
	set fetchedfile=swampnames
	call :filefetch
	set "swamp1=!name!"
	set fetchedfile=swamptypes
	call :filefetch
	set "swamp1=!swamp1! !name!"
	set "feature=swamp"
	set "location=next to !swamp1!, a swamp within the !regionname!"
	set "shortloc=byou"
)
goto townlocfin

:townlocfin

::determines street type

set "roll="
set /a roll=(%random% %% 6)+1
if "%roll%"=="1" set "roadwidth=broad"
if "%roll%"=="2" set "roadwidth=narrow"
if "%roll%"=="3" set "roadwidth=restrictive"
if "%roll%"=="4" set "roadwidth=cramped"
if "%roll%"=="5" set "roadwidth=spacious"
if "%roll%"=="6" set "roadwidth=permissive"

if "%shortloc%"=="riverside" (
	call :roll1d100
	if !roll! leq 40 set "roadmat=cobblestone"
	if !roll! geq 41 if !roll! leq 60 set "roadmat=flagstone"
	if !roll! geq 61 if !roll! leq 75 set "roadmat=packed earth"
	if !roll! geq 76 if !roll! leq 95 set "roadmat=baked earthen"
	if !roll! geq 95 set "roadmat=canals"
	set "streettype=!roadwidth! !roadmat!"
)
if "%shortloc%"=="lakeside" (
	call :roll1d100
	if !roll! leq 40 set "roadmat=cobblestone"
	if !roll! geq 41 if !roll! leq 60 set "roadmat=flagstone"
	if !roll! geq 61 if !roll! leq 75 set "roadmat=packed earth"
	if !roll! geq 76 if !roll! leq 95 set "roadmat=baked earthen"
	if !roll! geq 95 set "roadmat=canals"
	set "streettype=!roadwidth! !roadmat!"
)
if "%shortloc%"=="mountain" (
	call :roll1d100
	if !roll! leq 20 set "roadmat=cobblestone"
	if !roll! geq 21 if !roll! leq 30 set "roadmat=flagstone"
	if !roll! geq 31 if !roll! leq 40 set "roadmat=packed earth"
	if !roll! geq 41 if !roll! leq 50 set "roadmat=gravel"
	if !roll! geq 51 if !roll! leq 55 set "roadmat=woodchip"
	if !roll! geq 56 if !roll! leq 90 set "roadmat=paverstone"
	if !roll! geq 91 if !roll! leq 95 set "roadmat=carved bedrock"
	if !roll! geq 96 set "roadmat=worn bedrock"
	set "streettype=!roadwidth! !roadmat!"
)
if "%shortloc%"=="cliffside" (
	call :roll1d100
	if !roll! leq 20 set "roadmat=cobblestone"
	if !roll! geq 21 if !roll! leq 30 set "roadmat=flagstone"
	if !roll! geq 31 if !roll! leq 40 set "roadmat=packed earth"
	if !roll! geq 41 if !roll! leq 50 set "roadmat=gravel"
	if !roll! geq 51 if !roll! leq 55 set "roadmat=woodchip"
	if !roll! geq 56 if !roll! leq 90 set "roadmat=paverstone"
	if !roll! geq 91 if !roll! leq 95 set "roadmat=carved bedrock"
	if !roll! geq 96 set "roadmat=worn bedrock"
	set "streettype=!roadwidth! !roadmat!"
)
if "%shortloc%"=="valley" (
	call :roll1d100
	if !roll! leq 20 set "roadmat=cobblestone"
	if !roll! geq 21 if !roll! leq 30 set "roadmat=flagstone"
	if !roll! geq 31 if !roll! leq 40 set "roadmat=packed earth"
	if !roll! geq 41 if !roll! leq 50 set "roadmat=gravel"
	if !roll! geq 51 if !roll! leq 55 set "roadmat=woodchip"
	if !roll! geq 56 if !roll! leq 90 set "roadmat=paverstone"
	if !roll! geq 91 if !roll! leq 95 set "roadmat=carved bedrock"
	if !roll! geq 96 set "roadmat=worn bedrock"
	set "streettype=!roadwidth! !roadmat!"
)
if "%shortloc%"=="byou" (
	call :roll1d100
	if !roll! leq 40 set "roadmat=split-log ties"
	if !roll! geq 41 if !roll! leq 65 set "roadmat=packed earth"
	if !roll! geq 61 if !roll! leq 90 set "roadmat=baked earthen"
	if !roll! geq 91 set "roadmat=canals"
	set "streettype=!roadwidth! !roadmat!"
)


set fetchedfile=buildingarangment
call :filefetch
set "holdingline=%name%"
set "holdingline=%holdingline:[streettype]=!streettype!%"
set "holdingline=%holdingline:[shortsize]=!shortsize!%"
set "holdingline=%holdingline:[feature]=!feature!%"
set "holdingline=%holdingline:[cityname]=!cityname!%"
set "arrangment=%holdingline%"

::--- Chooses town defences ---

set /a roll=(((%random% %% 20)+1)+(%sizemod% * 2))

if %roll% leq 1 (
	set "defences=lacks any defensive features, though certainly constructing even a simple fence or digging a ditch is at the forefront of the !leader!'s mind"
	set "defencesdesc=At least, one would hope so"
	goto townfoundingskipdefences
)
if "%roll%"=="2" (
	set "defences=is protected by a series of wooden fences ringing the !shortsize!'s parameter, which are likely intended to keep varrious beasts out of town rather than protect it from attack by any intelligent agents"
	set "protectionlevel=bare minimum defenses"
)
if "%roll%"=="3" (
	set "defences=emploies a series of defensive earthworks and fences to provide minimal protection against wild beasts and smaller groups of intelligent foes"
	set "protectionlevel=somewhat sufficient"
)
if "%roll%"=="4" (
	set "defences=emploies a series of defensive earthworks, spikes, and fences to provide some protection against wild beasts and smaller groups of intelligent foes"
	set "protectionlevel=minimally sufficient"
)
if "%roll%"=="5" (
	set "defences=is protected by a humble stone fence which is tall enough to provide sufficient cover for defenders to fire from, but no more than that"
	set "protectionlevel=peasent-grade"
)
if "%roll%"=="6" (
	set "defences=is protected by a well-crafted cobblestone fence tall enough to provide sufficient cover for defenders to fire from, but no more than that"
	set "protectionlevel=frontieer-style defences"
)
if "%roll%"=="7" (
	set "defences=is protected by a reinforced stone fence which sits atop earthwork defenses, for some of the best inexpencive defences a !shortsize! of !cityname!'s size could have"
	set "protectionlevel=well-designed, yet cheep"
)
if "%roll%"=="8" (
	set "defences=sits comfortably behind a palisade wall complete with a timber gatehouse and battlements"
	set "protectionlevel=timber-based walls"
)
if "%roll%"=="9" (
	set "defences=resides behind a palisade wall complete with battlements, a moat, and timber gatehouses with drawbridges"
	set "protectionlevel=robustly designed timber walls"
)
if "%roll%"=="10" (
	set "defences=sits behind a stone-reinforced palisade wall, with stone gatehouses and timber drawbridges for their trench"
	set "protectionlevel=would-be-castle fortifications"
)
if "%roll%"=="11" (
	set "defences=has a fortified albeit thin brick wall. The wall has most of the features of a typical castle wall, just on a much smaller scale and and budget. Notably brick isn't a particularity solid choice for resisting siege weapons. !cityname!'s wall wouldn't hinder a proper army, but it is more than sufficient for bandits and other small marauding groups"
	set "protectionlevel=monster and outlaw focused fortifications"
)
if "%roll%"=="12" (
	set "defences=possesses a fortified albit thin wall of quarried stone. This wall possesses most of the features of a castle wall, though it is constructed from cheaper inferior stone. It would pose a minor challenge for an attacking army, though it's clear the wall's true purpose is to crush the hopes of bandits and marauders"
	set "protectionlevel=failry decent fortifications"
)
if "%roll%"=="13" (
	set "defences=has a defensive wall made from large clay bricks. The wall is constructed to the exact specifications of military fortifications, but the nature of its clay brick construction leaves it vulnerable to even outdated siege equipment. That said, the !shortsize! is well defended against anything short of an army"
	set "protectionlevel=brittle defenses"
)
if "%roll%"=="14" (
	set "defences=has a defensive wall made from quarried stone. The wall is equipped with a full set of battlements but the nature of its construction methodology leaves it somewhat vulnerable to siege equipment. That said, the !shortsize! is well defended against anything short of an army"
	set "protectionlevel=cost-cutting-focused defenses"
)
if "%roll%"=="15" (
	set "defences=rests behind a thick wall made from clay bricks. The wall has all of the proper fortifications and is well made. Unfortuantly the nature of clay brick leaves it quite vulnerable to siege equipment, though the thickness of the wall lends it similar resistance to a thinner hard-rock wall"
	set "protectionlevel=millitarily questionable fortifications"
)
if "%roll%"=="16" (
	set "defences=possesses a mighty albeit amateurishly crafted stone wall. It was built using queried stone blocks and possesses all of the standard defensive features, including a few watch towers. While it would last against a siege, the wall's outdated and simplistic construction method precludes the possibility of !cityname! weathering a full scale bombardment during a siege"
	set "protectionlevel=budget focused military grade defenses"
)
if "%roll%"=="17" (
	set "defences=sits behind an impressive looking clay brick wall. The wall is notable for quarried stone blocks being used to reinforce the clay bricks in the expected manner and locations. While the wall was built to the exact specifications of modern fortifications, one has to wonder why the money invested into creating such a well fortified wall wasn't spent on a less impressive looking wall crated from sturdier materials. !cityname!'s walls would endure a brief bombardment, but only from light siege weapons. It seems more likely the !shortsize!'s walls were not designed with defense in mind but rather lending the town a certain air with visitors"
	set "protectionlevel=boondoggle-of-a-fortified wall"
)
if "%roll%"=="18" (
	set "defences=is the proud owner of a properly designed set of reinforced walls made from mighty quarried stone blocks. Their construction and material choices would make a dwarf weep with joy, for each and every part of the elaborate fortifications are purely functional and robust well beyond reason. Even non-experts can tell the walls are an excellent defensive structure"
	set "protectionlevel=exceptionally well made fortifications"
)
if "%roll%"=="19" (
	set "defences=rests behind the absurdity that is a thick, timber braced, wall made of clay bricks. While visually impressive and certainly an aesthetic, !cityname!'s wall provides no actual defense against siege equipment due to the choice of its construction materials. Even non-experts can tell the town is trying to impress rather than defend with its walls, towers, and gatehouses. Though admittedly, they do look nice... To primitive tribals who have never seen fortifications before"
	set "protectionlevel=political statement focused walls"
)
if "%roll%"=="20" (
	set "defences=is the proud owner of a thick set of fortified walls fashioned from quarried stone blocks. While not up to snuff for a fort or castle wall, the !shortsize%!'s walls are naturally much larger than those of forts or castles. Therefore, the construction such a wall is most expensive. !cityname!'s budget focused wall would serve its community well in battle in spite of looking unimpressive compared to castles and fortresses"
	set "protectionlevel=top tier civilian fortifications"
)
if "%roll%"=="21" (
	set "defences=rests behind a thin stone wall. The wall's design was likly directly copied from a castle's perimeter deference. It's simply that the architect made !cityname!'s wall substantially thinner than a castle's walls. While the towers and gatehouses are adequate, the obvious cost savings measure of making the walls drastically thinner reduces their ability to resist siege weapons greatly. The !shortsize!'s impressive-looking wall could fail at a critical moment in battle, and would likely not even resist a few bandits with improvised siege equipment"
	set "protectionlevel=budget oriented"
)
if "%roll%"=="22" (
	set "defences=is the proud owner of a proper castle-style stone wall complete with all of the trimmings. It has towers, a moat, gatehouses, drawbridges, and even MERTICULATIONS! All built to proper specifications. It is a monument to the !shortsize!'s economy and !leadership!'s forsite. Or perhaps paranoia. Either way, a professional army would have a hard time taking !cityname!."
	set "protectionlevel=perhaps unnecessarily well built defenses"
)
if "%roll%"=="23" (
	set "defences=rests behind a set of well fortified walls, with gatehouses, watch towers, and battlements. !cityname!'s walls are, however, fashioned from stone and timber. While unorthodox, the design looks to be functional to a reasonable degree. With luck, the untested design will remain untested for years to come"
	set "protectionlevel=unusual yet seemingly effective fortifications"
)
if "%roll%"=="24" (
	set "defences=has a set of well fortified walls, with gatehouses, watch towers, battlements, and even a moat, which are fashioned from stone and timber. !cityname!'s walls are, however, fashioned from stone and timber. While unorthodox, the design looks to be functional to a reasonable degree. With luck, the untested design will remain untested for years to come"
	set "protectionlevel=unusual though effective defenses"
)
if "%roll%"=="25" (
	set "defences=is in possession of a finally crafted dwarvern style fortified fighting wall, completer with lower, middle, and upper battlements for use in sloped-fire defense strategies, murder holes, and statues which may or may not be constructs, and, of course, MERTICULATIONS! The sheer cost of such robust fortifications make it quite likely the !shortsize! was built over the ruins of some previous settlement. Unless of course !cityname! is one of the wealthiest and politically connected settlements in the world."
	set "protectionlevel=Ragnarock-era relics
)
if %roll% geq 26 (
	set "defences=is defended by arcane means. It's hard to spot at first, but there's a tell tell shimmer in the air around !cityname!, and you can spot the occasional warding glyph carved into a rock or tree all around town. These mystical deference are ancient, unknowable, and unassailable by current means... Assuming everything is in working order. Otherwise, the wards are little more than a deathtrap"
	set "protectionlevel=Relic of the World That Was"
)

set "holdingline="
set fetchedfile=towndefenceconditions
call :filefetch
set "holdingline=%name%"
set "holdingline=%holdingline:[protectionlevel]=!protectionlevel!%"
set "holdingline=%holdingline:[leader]=!leader!%"
set "holdingline=%holdingline:[cityname]=!cityname!%"
set "holdingline=%holdingline:[shortsize]=!shortsize!%"
set "defencesdesc=%holdingline%"



:townfoundingskipdefences


set "holdingline="
set fetchedfile=townfeels
call :filefetch
set "holdingline=%name%"
set "holdingline=%holdingline:[cityname]=!cityname!%"
set "holdingline=%holdingline:[shortsize]=!shortsize!%"
set "townfeel=%holdingline%"

:modifiers
set qualtotal=1
if "%size%"=="Metropolis" set qualtotal=6
if "%size%"=="Large City" set qualtotal=5
if "%size%"=="Medium City" set qualtotal=4
if "%size%"=="Small City" set qualtotal=4
if "%size%"=="Large Town" set qualtotal=4
if "%size%"=="Medium Town" set qualtotal=3
if "%size%"=="Small Town" set qualtotal=3
if "%size%"=="Village" set qualtotal=2

set qualcounter=0
:TFQualloop
call :qualitiestable
if "%qualcounter%"=="0" (set "finalqualitylist=%quality%") else (set "finalqualitylist=%finalqualitylist% %quality%")
if "%qualcounter%"=="0" (set "finalqualflavor=%qualflavor%") else (set "finalqualflavor=%finalqualflavor% %qualflavor%")
set /a qualcounter=%qualcounter%+1
if "%qualcounter%" lss "%qualtotal%" goto TFQualloop

:Townfoundingalldone
cd /D "%outputlocation%"
set /p nationalstyle=<"%outputname% - Cycle %cyclecount% Arcatecture Style.txt"
cd /D "%outputlocation%\Settlments"
echo %cityname% is a %shortsize% founded by the %outputname%. The %shortsize% is located %location%. %cityname% has a population of %population%, and is predominantly a %race1adj% %shortsize%, with its citizens being %demographics%. >> "%cityname% - %age% Cycle.txt"
echo. >> "%cityname% - %age% Cycle.txt"
echo %cityname% was built durring the %age% Cycle, using %outputname%'s architectural style of the time. %nationalstyle% >> "%cityname% - %age% Cycle.txt"
echo. >> "%cityname% - %age% Cycle.txt"
echo The %shortsize% makes itself distinct with buildings that feature %style%. >> "%cityname% - %age% Cycle.txt"
echo. >> "%cityname% - %age% Cycle.txt"
(
echo %cityname%'s %arrangment%. The %shortloc% %shortsize% %defences%.
echo.
echo %defencesdesc%.
echo.
echo %townfeel%
echo.
echo %finalqualflavor%
) >> "%cityname% - %age% Cycle.txt"
cd /D "%~dp0data"
goto:eof

:: --- Creature namer ---

:creaturenamer
set "dieroll="
set "dieroll2="
set "dieroll3="
set "dieroll4="
set "first="
set "second="
set "third="
set "fourth="
set "creaturename="
set /a dieroll=(%RANDOM% %% 100)+1
if %dieroll% leq 35 (
	call :roll1d100
	if !roll! leq 75 (
		set "fetchedfile=vowellistcaps"
		set sybflag=0
		call :filefetch
		set first=!name!
	)
	if !roll! geq 76 (
		set "fetchedfile=consonatelistcaps"
		set sybflag=1
		set "first="
		call :filefetch
		set first=!name!
	)
	if "!sybflag!"=="0" set fetchedfile=consonatelist
	if "!sybflag!"=="1" set fetchedfile=vowellist
	set "second="
	call :filefetch
	set second=!name!
	set "creaturename=!first!!second!"
)
if %dieroll% geq 36 if %dieroll% leq 81 (
	call :roll1d100
	if !roll! leq 75 (
		set "fetchedfile=vowellistcaps"
		set sybflag=1
		call :filefetch
		set first=!name!
	)
	if !roll! geq 76 (
		set "fetchedfile=consonatelistcaps"
		set sybflag=0
		call :filefetch
		set first=!name!
	)
	if !sybflag!==1 set fetchedfile=consonatelist
	if !sybflag!==0 set fetchedfile=vowellist
	call :filefetch
	set second=!name!
	call :roll1d100
	if !roll! leq 60 (
	set fetchedfile=consonatelist
		call :filefetch
		set third=!name!
		set "creaturename=!first!!second!!third!
		)
	if !roll! geq 61 (
		set fetchedfile=vowellist
		call :filefetch
		set third=!name!
		set "creaturename=!first!!second!!third!"
	)
)
if %dieroll% geq 81 (
	call :roll1d100
	if !roll! leq 75 (
		set "fetchedfile=vowellistcaps"
		set sybflag=1
		call :filefetch
		set first=!name!
	)
	if !roll! geq 76 (
		set "fetchedfile=consonatelistcaps"
		set sybflag=0
		call :filefetch
		set first=!name!
	)
	if !sybflag!==1 set fetchedfile=consonatelist
	if !sybflag!==0 set fetchedfile=vowellist
	call :filefetch
	set second=!name!
	call :roll1d100
	if !roll! leq 60 (
		set "fetchedfile=consonatelist"
		set sybflag=0
		call :filefetch
		set third=!name!
	)
	if !roll! geq 61 (
		set "fetchedfile=vowellist"
		set sybflag=1
		call :filefetch
		set third=!name!
	)
	if !sybflag!==1 set fetchedfile=consonatelist
	if !sybflag!==0 set fetchedfile=vowellist
	call :filefetch
	set fourth=!name!
	set "creaturename=!first!!second!!third!!fourth!"
)
goto:eof

:: --- Nationscore First Setup ---

:nationscoresetup
set millitaryscore=0
set expanshionscore=0
set infrastructurescore=0
set agriculturescore=0
set culturescore=0
set economyscore=0
set arcanescore=0
goto:eof

:: --- Clear Nationscore Mods

:nationmodclear
set milmod=0
set expamod=0
set inframod=0
set agrimod=0
set cultremod=0
set econmod=0
set arcanemod=0
goto:eof

:: --- Nationscore Calculation ---

:nationscorecalc
set /a millitaryscore=%milmod%+1
set /a expanshionscore=%expamod%+1
set /a infrastructurescore=%inframod%+1
set /a agriculturescore=%agrimod%+1
set /a culturescore=%cultremod%+1
set /a economyscore=%econmod%+1
set /a arcanescore=%arcanemod%+1
echo %nationname%,%millitaryscore%,%expanshionscore%,%infrastructurescore%,%agriculturescore%,%culturescore%,%economyscore%,%arcanescore% >> "%savedir%\Nation Data\%nationname% - Nation Score Spreadsheet.csv"
goto:eof


:: --- Year Counter ---

:yearcounter
set /a eventyear=(%RANDOM% %% 50)+1
if "%yearmod%"=="0" set /a eventyear=(%RANDOM%*50/32768)+1
if "%yearmod%"=="1" set /a eventyear=(%RANDOM%*50/32768)+10
if "%yearmod%"=="2" set /a eventyear=(%RANDOM%*50/32768)+20
if "%yearmod%"=="3" set /a eventyear=(%RANDOM%*50/32768)+30
if "%yearmod%"=="4" set /a eventyear=(%RANDOM%*50/32768)+40
set decadeyear=%eventyear%
call :numberappender
set numeral2=%numeral%
goto:eof

:: --- Nationscore Finisher ---

:nationscorefinisher
cd /d "%savedir%"
set /a lines=%cyclecount%

REM MAGIC SCRIPT CONTROLLER! DO NOT DISTIRB!
REM VVV                                  VVV

set /a count=0
for /F "tokens=* delims=" %%m in ('Type "rootnations.txt"') do (
	set /a count+=1
	set "nsfoutput[!count!]=%%m"
)
For /L %%j in (1,1,%Count%) Do (
	set "nationname=!nsfoutput[%%j]!"
	call :nationscorefinisherA
)

REM ^^^                                  ^^^
REM MAGIC SCRIPT CONTROLLER! DO NOT DISTIRB!
cd /D "%~dp0data"
goto:eof


:nationscorefinisherA
echo Total,=SUM^(B2:B%lines%^),=SUM^(C2:C%lines%^),=SUM^(D2:D%lines%^),=SUM^(E2:E%lines%^),=SUM^(F2:F%lines%^),=SUM^(G2:G%lines%^),=SUM^(H2:H%lines%^) >> " "%savedir%\Nation Data\%nationname% - Nation Score Spreadsheet.csv"

goto:eof

:: --- Generates Fashions ---

:fashionpoliece
set fetchedfile=fashions
call :filefetch
set "fashion=%name%"
goto:eof

:: --- Generates some political intrigue ---
:legalchalanges
set "law=
set "lawyer1a=
set "lawyer2a=
set "lawyer1=
set "lawyer2=
set "lawyergoal=
set "dice2="
set "dice1="
set fetchedfile=laws
call :filefetch
set "law=%name%"
call :roll1d2
if "%roll%"=="1" (
	call :clergypicker
	call :namegen
	set "lawyer1=!religioustitle! !firstname! !lastname!"
)
if "%roll%"=="2" (
	set "fetchedfile=!nationgovtitles!"
	call :filefetch
	set "title=!name!"
	call :namegen
	set "lawyer1=!title! !firstname! !lastname!"
)
call :roll1d2
if "%roll%"=="1" (
	call :clergypicker
	call :namegen
	set "lawyer2=!religioustitle! !firstname! !lastname!"
)
if "%roll%"=="2" (
	set "fetchedfile=!nationgovtitles!"
	call :filefetch
	set "title=!name!"
	call :namegen
	set "lawyer2=!title! !firstname! !lastname!"
)
set fetchedfile=legalprocedings
call :filefetch
set "lawyergoal=%name%"
set /a dice1=(%RANDOM% %% 6)+1
set /a dice2=(%RANDOM% %% 100)+1
set "victor=%lawyer1%"
if %dice2% geq 50 set "victor=%lawyer2%"
set "legalisue=A major legal debate of %nationname% during the %age% Cycle occurred over %law%. The major parties to the debate were %lawyer1%, who favored the status quo, and %lawyer2% who wished to %lawyergoal%. The debate concluded after %dice1% years, with %victor% emerging as the victor."
goto:eof

:: --- Arcatecture Picker ---

:archatect
set "thestyle="
set "arcatecturestyle="
set "dieroll="
set fetchedfile=arcatecturalstyles

if "%newkingdomfounding%"=="1" (
	set "outputlocation=%worlddir%\Nations\%newnationname%"
	set "outputname=%newnationname%"
) else (
	set "outputlocation=%worlddir%\Nations\%nationname%"
	set "outputname=%nationname%"
)


if "%cyclesexisted%"=="0" (
	call :filefetch
	set "thestyle=!name!"
	set "arcatecturestyle=Durring the !age! Cycle, !outputname! was known for a distinctive arcatectureal style !thestyle!."
	echo !arcatecturestyle! > "!outputlocation!\!outputname! - Arcatecture Style.txt"
	echo !arcatecturestyle! >  "!outputlocation!\!outputname! - Cycle !cyclecount! Arcatecture Style.txt"
) else (
	call :roll1d100
	if !roll! lss 80 (
		call :archmath
		type  "!outputlocation!\!outputname! - Cycle !math! Arcatecture Style.txt" >  "!outputlocation!\!outputname - Cycle !cyclecount! Arcatecture Style.txt"
		set "arcatecturestyle=!outputname!'s primary arcatectural style remained unchanged from the previous cycle, though pleny of fringe arcatects exparimented with new designs when premitted."
	)
	if !roll! geq 80 (
		call :filefetch
		set "thestyle=!name!"
		set "arcatecturestyle=Durring the !age! Cycle, !outputname! was known for a distinctive arcatectureal style !thestyle!."
		echo !arcatecturestyle! >  "!outputlocation!\!outputname! - Arcatecture Style.txt"
		echo !arcatecturestyle! >  "!outputlocation!\!outputname! - Cycle !cyclecount! Arcatecture Style.txt"
	)
)
goto:eof

:archmath
set /a math=%cyclecount%-1
goto:eof

:: --- Primes the RTF Document ---

:docprimer
echo Cycle;Year;Nation;Event > "%savedir%\%univerce% Timeline Spreadsheet.csv"
type NUL > "%savedir%\%univerce% Timeline.rtf"
(
echo {\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0Verdana;}{\f1\fnil\fcharset0 Arial;}}
echo {\*\generator Riched20 10.0.19041}\viewkind4\uc1 
echo \pard\sa200\sl276\slmult1\qc\b\f0\fs40\lang9 The History of\par
echo %univerce%\par
echo \par
echo \fs32 Diligently Recorded by\par
echo \i\fs24 Apophenia Eolipile\i0\fs32\par
echo \fs40\par
echo.
)>> "%savedir%\%univerce% Timeline.rtf"
goto:eof

:: --- Develops fictional materials ---

:matdev
set "color1="
set "color2="
set "color3="
set "dieroll="
set "matdescriptor="
set "matspec="
set "matfinish="
set /a dieroll=(%RANDOM% %% 7)+1
if "%dieroll%"=="1" (
	set "catagory=stone"
	call :creaturenamer
	call :roll1d100
	set "matdescriptor=stone"
	if !roll! geq 75 set "matdescriptor=pressious stone"
	call :roll1d7
	if !roll!==1 set "matname=!creaturename!"
	if !roll!==2 set "matname=!creaturename!aline"
	if !roll!==3 set "matname=!creaturename!erite"
	if !roll!==4 set "matname=!creaturename!anite"
	if !roll!==5 set "matname=!creaturename!mene"
	if !roll!==6 set "matname=!creaturename!site"
	if !roll!==7 set "matname=!creaturename!alite"
	if "!matdescriptor!"=="pressious stone" set "matname=!creaturename!"
	call :choose3colors
	call :roll1d6
	if !roll!==1 set "matfinish=smooth"
	if !roll!==2 set "matfinish=rough"
	if !roll!==3 set "matfinish=glassey smooth"
	if !roll!==4 set "matfinish=striated"
	if !roll!==5 set "matfinish=lumpy"
	if !roll!==6 set "matfinish=powdery"
	call :roll1d5
	if !roll!==1 set "matspec=glossey"
	if !roll!==2 set "matspec=very glossey"
	if !roll!==3 set "matspec=matte"
	if !roll!==4 set "matspec=prefectly matte"
	if !roll!==5 set "matspec=satin"
	call :roll1d100
	if !roll! leq 55 set "matappearance=A !matfinish! !matspec! !color1! !matdescriptor!"
	if !roll! geq 56 if !roll! leq 80 (
		call :roll1d100
		if !roll! leq 35 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! streaks."
		if !roll! geq 36 if !roll! leq 45 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! flecks."
		if !roll! geq 46 if !roll! leq 80 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! spots."
		if !roll! geq 81 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! ribbons."
	)
	if !roll! geq 81 (
		call :roll1d100
		if !roll! leq 35 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! streaks and small glints of !color3!."
		if !roll! geq 36 if !roll! leq 45 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! flecks and small glints of !color3!."
		if !roll! geq 46 if !roll! leq 80 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! spots and small glints of !color3!."
		if !roll! geq 81 set "matappearance=A !matfinish! !matspec! predominantly !color1! !matdescriptor! with !color2! ribbons and small glints of !color3!."
	)
)
if %dieroll%==2 (
	set "catagory=wood"
	call :creaturenamer
	call :roll1d100
	set "matdescriptor=stone"
	if !roll! geq 75 set "matdescriptor=pressious stone"
	call :roll1d100
	if !roll! leq 45 set "matname=!creaturename!"
	if !roll! geq 46 if !roll! leq 49 set "matname=!creaturename! Pine"
	if !roll! geq 50 if !roll! leq 53 set "matname=!creaturename! Oak"
	if !roll! geq 54 if !roll! leq 57 set "matname=!creaturename! Ceder"
	if !roll! geq 58 if !roll! leq 61 set "matname=!creaturename! Maple"
	if !roll! geq 62 if !roll! leq 65 set "matname=!creaturename! Willow"
	if !roll! geq 66 if !roll! leq 69 set "matname=!creaturename! Sequoia"
	if !roll! geq 70 if !roll! leq 73 set "matname=!creaturename! Ash"
	if !roll! geq 74 if !roll! leq 77 set "matname=!creaturename! Beech"
	if !roll! geq 78 if !roll! leq 81 set "matname=!creaturename! Cottonwood"
	if !roll! geq 82 if !roll! leq 85 set "matname=!creaturename! Birch"
	if !roll! geq 86 if !roll! leq 89 set "matname=!creaturename! Spruce"
	if !roll! geq 90 if !roll! leq 93 set "matname=!creaturename! Larch"
	if !roll!==94 set "matname=!creaturename! Magnolia"
	if !roll!==95 set "matname=!creaturename! Suber"
	if !roll!==96 set "matname=!creaturename! Apple"
	if !roll!==97 set "matname=!creaturename! Orange"
	if !roll!==99 set "matname=!creaturename! Cherry"
	if !roll! geq 100 set "matname=!creaturename! Pear"
	set fetchedfile=trees
	call :choose2colors
	call :roll1d5
	if !roll!==1 set "matfinish=smooth"
	if !roll!==2 set "matfinish=rough"
	if !roll!==3 set "matfinish=glassey smooth"
	if !roll!==4 set "matfinish=ripply"
	if !roll!==5 set "matfinish=rigged"
	call :roll1d100
	if !roll! leq 35 set "matappearance=A !matfinish! !color1! wood with a pale grain."
	if !roll! geq 36 if !roll! leq 65 set "matappearance=A !matfinish! !color1! wood with a dark grain."
	if !roll! geq 66 if !roll! leq 83 set "matappearance=A !matfinish! !color1! wood with a nearly invisible grain."
	if !roll! geq 84 set "matappearance=A !matfinish! !color1! wood with !color2! grain."
)
if %dieroll%==3 (
	set "catagory=crystal"
	call :creaturenamer
	call :roll1d100
	set "matdescriptor=stone"
	if !roll! geq 75 set "matdescriptor=pressious stone"
	call :roll1d7
	if !roll!==1 set "matname=!creaturename!"
	if !roll!==2 set "matname=!creaturename!aline"
	if !roll!==3 set "matname=!creaturename!erite"
	if !roll!==4 set "matname=!creaturename!anite"
	if !roll!==5 set "matname=!creaturename!mene"
	if !roll!==6 set "matname=!creaturename!site"
	if !roll!==7 set "matname=!creaturename!alite"
	set fetchedfile=crystals
	call :choose2colors
	call :roll1d5
	if !roll!==1 set "matfinish=smooth"
	if !roll!==2 set "matfinish=rough"
	if !roll!==3 set "matfinish=glassey smooth"
	if !roll!==4 set "matfinish=streaky"
	if !roll!==5 set "matfinish=ribbed"
	call :roll1d9
	if !roll!==1 set "crystalshape=triangular"
	if !roll!==2 set "crystalshape=square"
	if !roll!==3 set "crystalshape=rhomboid"
	if !roll!==4 set "crystalshape=octogonal"
	if !roll!==5 set "crystalshape=trapazoidal"
	if !roll!==6 set "crystalshape=rectangular"
	if !roll!==7 set "crystalshape=septagonal"
	if !roll!==8 set "crystalshape=pentagonal"
	if !roll!==9 set "crystalshape=round"
	call :roll1d100
	if !roll! leq 35 set "matappearance=A !matfinish! !crystalshape! !color1! crystal."
	if !roll! geq 36 if !roll! leq 65 set "matappearance=A !matfinish! !crystalshape! !color1! crystal which glows dimly."
	if !roll! geq 66 if !roll! leq 83 set "matappearance=A !matfinish! !crystalshape! !color1! crystal which glimmers in the light."
	if !roll! geq 84 set "matappearance=A !matfinish! !crystalshape! !color1! crystal which has a!color2! sheen when it catches the light."
)
if %dieroll%==4 (
	set "catagory=metal"
	call :creaturenamer
	call :roll1d7
	if !roll!==1 set "matname=!creaturename!"
	if !roll!==2 set "matname=!creaturename!ena"
	if !roll!==3 set "matname=!creaturename!erite"
	if !roll!==4 set "matname=!creaturename!anite"
	if !roll!==5 set "matname=!creaturename!mene"
	if !roll!==6 set "matname=!creaturename!abar"
	if !roll!==7 set "matname=!creaturename!alite"
	call :choose3colors
	call :roll1d5
	if !roll!==1 set "matfinish=smooth"
	if !roll!==2 set "matfinish=rough"
	if !roll!==3 set "matfinish=glassey smooth"
	if !roll!==4 set "matfinish=gritty"
	if !roll!==5 set "matfinish=oily"
	call :roll1d100
	if !roll! leq 35 set "matappearance=A !matfinish! !color1! ore."
	if !roll! geq 36 if !roll! leq 65 set "matappearance=A !matfinish! !color1! ore with splotches of !color2!."
	if !roll! geq 66 if !roll! leq 83 set "matappearance=A !matfinish! !color1! ore with splotches of !color2!, and flecks of !color3!"
	if !roll! geq 84 set "matappearance=A !matfinish! !color1! ore with splotches of !color2! and !color3!"
)
if %dieroll%==5 (
set "catagory=plant"
call :creaturenamer
call :roll1d4
	if "!roll!"=="1" (
		set "mattype=annual"
		set "fetchedfile=annuals"
		call :roll1d16
		if !roll!==1 set "matname=!creaturename!"
		if !roll!==2 set "matname=!creaturename! Susan"
		if !roll!==3 set "matname=!creaturename! Cinca"
		if !roll!==4 set "matname=!creaturename! Sage"
		if !roll!==5 set "matname=!creaturename! Lily"
		if !roll!==6 set "matname=!creaturename! Pink"
		if !roll!==7 set "matname=!creaturename! Zinnia"
		if !roll!==8 set "matname=!creaturename! Pansy"
		if !roll!==9 set "matname=!creaturename! Verbena"
		if !roll!==10 set "matname=!creaturename! Amaranth"
		if !roll!==11 set "matname=!creaturename! Geranium"
		if !roll!==12 set "matname=!creaturename! Impatiens"
		if !roll!==13 set "matname=!creaturename! Pepper"
		if !roll!==14 set "matname=!creaturename! Potato"
		if !roll!==15 set "matname=!creaturename! Begonia"
		if !roll!==16 set "matname=!creaturename! Cosmos"
		call :filefetch
		set plant1=!name!
		call :filefetch
		set plant2=!name!
		call :filefetch
		call :roll1d100
		if !roll! leq 35 set "matappearance=A !mattype! similar to !plant1! and !plant2!."
		if !roll! geq 36 if !roll! leq 65 set "matappearance=A !mattype! similar to !plant1! and !plant2!, which is most poisionious."
		if !roll! geq 66 if !roll! leq 83 set "matappearance=A !mattype! similar to !plant1! and !plant2! that is somewhat poisionious."
		if !roll! geq 84 set "matappearance=A !mattype! similar to !plant1! and !plant2! which bears delicious produce."
	)
	if "!roll!"=="2" (
		set "mattype=perennial"
		set "fetchedfile=perennials"
		call :roll1d20
		if !roll!==1 set "matname=!creaturename!"
		if !roll!==2 set "matname=!creaturename! Balm"
		if !roll!==3 set "matname=!creaturename! Susan"
		if !roll!==4 set "matname=!creaturename! Heart"
		if !roll!==5 set "matname=!creaturename! Cranesbill"
		if !roll!==6 set "matname=!creaturename! Fescue"
		if !roll!==7 set "matname=!creaturename! Weed"
		if !roll!==8 set "matname=!creaturename! Yarrow"
		if !roll!==9 set "matname=!creaturename! Iris"
		if !roll!==10 set "matname=!creaturename! Grass"
		if !roll!==11 set "matname=!creaturename! Indigo"
		if !roll!==12 set "matname=!creaturename! Hosta"
		if !roll!==13 set "matname=!creaturename! Lily"
		if !roll!==14 set "matname=!creaturename! Phlox"
		if !roll!==15 set "matname=!creaturename! Kabitan"
		if !roll!==16 set "matname=!creaturename! Astilbe"
		if !roll!==17 set "matname=!creaturename! Mantle"
		if !roll!==18 set "matname=!creaturename! Aster"
		if !roll!==19 set "matname=!creaturename! Sage"
		if !roll!==20 set "matname=!creaturename! Holly"
		call :filefetch
		set plant1=!name!
		call :filefetch
		set plant2=!name!
		call :filefetch
		call :roll1d100
		if !roll! leq 35 set "matappearance=A !mattype! similar to !plant1! and !plant2!."
		if !roll! geq 36 if !roll! leq 65 set "matappearance=A !mattype! similar to !plant1! and !plant2!, which is most poisionious."
		if !roll! geq 66 if !roll! leq 83 set "matappearance=A !mattype! similar to !plant1! and !plant2! that is somewhat poisionious."
		if !roll! geq 84 set "matappearance=A !mattype! similar to !plant1! and !plant2! which bears delicious produce."
	)
	if "!roll!"=="3" (
		set "mattype=shrub"
		set "fetchedfile=shrubs"
		call :roll1d16
		if !roll!==1 set "matname=!creaturename!"
		if !roll!==2 set "matname=!creaturename! Trumpet"
		if !roll!==3 set "matname=!creaturename! Shrub"
		if !roll!==4 set "matname=!creaturename! Laural"
		if !roll!==5 set "matname=!creaturename! Berry"
		if !roll!==6 set "matname=!creaturename! Wood"
		if !roll!==7 set "matname=!creaturename! Flower"
		if !roll!==8 set "matname=!creaturename! Myrtle"
		if !roll!==9 set "matname=!creaturename! Duster"
		if !roll!==10 set "matname=!creaturename! Cassia"
		if !roll!==11 set "matname=!creaturename! Shrub"
		if !roll!==12 set "matname=!creaturename!ia"
		if !roll!==13 set "matname=!creaturename! Plant"
		if !roll!==14 set "matname=!creaturename!ea"
		if !roll!==15 set "matname=!creaturename!ela"
		if !roll!==16 set "matname=!creaturename! Verbena"
		call :filefetch
		set plant1=!name!
		call :filefetch
		set plant2=!name!
		call :filefetch
		call :roll1d100
		if !roll! leq 35 set "matappearance=A !mattype! similar to !plant1! and !plant2!."
		if !roll! geq 36 if !roll! leq 65 set "matappearance=A !mattype! similar to !plant1! and !plant2!, which is most poisionious."
		if !roll! geq 66 if !roll! leq 83 set "matappearance=A !mattype! similar to !plant1! and !plant2! that is somewhat poisionious."
		if !roll! geq 84 set "matappearance=A !mattype! similar to !plant1! and !plant2! which bears delicious produce."
	)
	if "!roll!"=="4" (
		set "mattype=herb"
		set "fetchedfile=herbs"
		call :roll1d8
		if !roll!==1 set "matname=!creaturename!"
		if !roll!==2 set "matname=!creaturename! Pepper"
		if !roll!==3 set "matname=!creaturename! Myrtle"
		if !roll!==4 set "matname=!creaturename! Berry"
		if !roll!==5 set "matname=!creaturename! Weed"
		if !roll!==6 set "matname=!creaturename! Sage"
		if !roll!==7 set "matname=!creaturename! Root"
		if !roll!==8 set "matname=!creaturename! Bean"
		call :filefetch
		set plant1=!name!
		call :filefetch
		set plant2=!name!
		call :filefetch
		call :roll1d100
		if !roll! leq 35 set "matappearance=A !mattype! similar to !plant1! and !plant2!."
		if !roll! geq 36 if !roll! leq 65 set "matappearance=A !mattype! similar to !plant1! and !plant2!, which is most poisionious."
		if !roll! geq 66 if !roll! leq 83 set "matappearance=A !mattype! similar to !plant1! and !plant2! that is somewhat poisionious."
		if !roll! geq 84 set "matappearance=A !mattype! similar to !plant1! and !plant2! which bears delicious produce."
	)
)
if %dieroll%==6 (
	set "catagory=fluid"
	call :creaturenamer
	call :roll1d5
	if !roll!==1 set "matname=!creaturename!" & set "mattype=fluid"
	if !roll!==2 set "matname=!creaturename! oil" & set "mattype=oil"
	if !roll!==3 set "matname=!creaturename! milk" & set "mattype=milk"
	if !roll!==4 set "matname=liquid !creaturename!" & set "mattype=fluid"
	set fetchedfile=crystals
	call :choose2colors
	set fetchedfile=liquids
	call :filefetch
	set oder=!name!
	call :roll1d5
	if !roll!==1 set "matfinish=gloopy"
	if !roll!==2 set "matfinish=thick"
	if !roll!==3 set "matfinish=syrupy"
	if !roll!==4 set "matfinish=thin"
	if !roll!==5 set "matfinish=wattery"
	call :roll1d100
	if !roll! leq 35 set "matappearance=A !matfinish! !color1! !mattype! which !oder!."
	if !roll! geq 36 if !roll! leq 65 set "matappearance=A !matfinish! !color1! !mattype! with a !color2! sheen which !oder!."
	if !roll! geq 66 if !roll! leq 83 set "matappearance=A !matfinish! !color1! !mattype! with !color2! ribbons running through it which !oder!."
	if !roll! geq 84 set "matappearance=A !matfinish! !color1! !mattype! which glows !color2! and !oder!."
)
if %dieroll%==7 (
	set "catagory=animal"
	set "event="
	set "tailshape="
	set "footshape="
	set "legshape="
	set "legnumber="
	set "headdetail="
	set "headshape="
	set "bodyshape="
	set "animal1="
	set "animal2="
	set "animal3="
	set "size="
	set "diet="
	set "creaturename="
	set "aggro="
	set "lifetype="
	set "animaluse="
	call :namegen
	call :creaturenamer
	echo !creaturename% >> "!recorddir!\!nationname! - Unique Animals List.txt"
	set matname=!creaturename!
	call :roll2d4
	if !roll!==2 set "size=diminutive"
	if !roll!==3 set "size=tiny"
	if !roll!==4 set "size=small"
	if !roll!==5 set "size=medium"
	if !roll!==6 set "size=huge"
	if !roll!==7 set "size=giant"
	if !roll!==8 set "size=colossal"
	call :roll1d3
	if !roll!==1 set "diet=herbavore"
	if !roll!==2 set "diet=carnivore"
	if !roll!==3 set "diet=omnivore"
	call :roll1d3
	if !roll!==1 set "aggro=agressive"
	if !roll!==2 set "aggro=passive"
	if !roll!==3 set "aggro=dosscile"
	call :roll1d100
	set "intro=Scouts from !nationname!"
	if !roll! geq 34 if !roll! leq 66 set "intro=The Adventurer !firstname! !lastname! from !nationname!"
	if !roll! leq 67 set "intro=The Explorer !firstname! !lastname! from !nationname!"
	call :roll1d3
	if !roll!==1 set "lifetype=are solitary creatures"
	if !roll!==2 set "lifetype=live in packs"
	if !roll!==3 set "lifetype=live in great herds"
	call :roll1d3
	if !roll!==1 set "animaluse=warbeasts" & set "tehmod=milmod"
	if !roll!==2 set "animaluse=hunting partners" & set "tehmod=agrimod"
	if !roll!==3 set "animaluse=companions" & set "tehmod=cultremod"
	if !roll!==4 set "animaluse=livestock" & set "tehmod=agrimod"
	if !roll!==5 set "animaluse=beasts of burden" & set "tehmod=econmod"
	call :roll1d100
	if !roll! leq 20 (
		call :roll1d11
		if !roll!==1 set "usefullmat=bones" & set "matname=!creaturename! bone"
		if !roll!==2 set "usefullmat=hide" & set "matname=!creaturename! hide"
		if !roll!==3 set "usefullmat=organs" & set "matname=!creaturename! offal"
		if !roll!==4 set "usefullmat=blood" & set "matname=!creaturename! blood"
		if !roll!==5 set "usefullmat=urine" & set "matname=!creaturename! urine"
		if !roll!==6 set "usefullmat=milk" & set "matname=!creaturename! milk"
		if !roll!==7 set "usefullmat=cerebral fluid" & set "matname=!creaturename! cerebral fluid"
		if !roll!==8 set "usefullmat=puss" & set "matname=!creaturename! puss"
		if !roll!==9 set "usefullmat=fluids" & set "matname=!creaturename! fluid"
		if !roll!==10 set "usefullmat=flesh" & set "matname=!creaturename! flesh"
		if !roll!==11 set "usefullmat=leavings" & set "matname=!creaturename! dung"
		set fetchedfile=animals
		call :filefetch
		set animal=!name!
		set "matappearance=!intro! discovered a new breed of creature. !size! !diet!s called !creaturename!, which !lifetype!. They greatly resemble !animal!s, with a few key differences. The !aggro!'s !usefullmat! holds special properties."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
	if !roll! geq 21 if !roll! leq 40 (
		call :roll1d11
		if !roll!==1 set "usefullmat=bones" & set "matname=!creaturename! bone"
		if !roll!==2 set "usefullmat=hide" & set "matname=!creaturename! hide"
		if !roll!==3 set "usefullmat=organs" & set "matname=!creaturename! offal"
		if !roll!==4 set "usefullmat=blood" & set "matname=!creaturename! blood"
		if !roll!==5 set "usefullmat=urine" & set "matname=!creaturename! urine"
		if !roll!==6 set "usefullmat=milk" & set "matname=!creaturename! milk"
		if !roll!==7 set "usefullmat=cerebral fluid" & set "matname=!creaturename! cerebral fluid"
		if !roll!==8 set "usefullmat=puss" & set "matname=!creaturename! puss"
		if !roll!==9 set "usefullmat=fluids" & set "matname=!creaturename! fluid"
		if !roll!==10 set "usefullmat=flesh" & set "matname=!creaturename! flesh"
		if !roll!==11 set "usefullmat=leavings" & set "matname=!creaturename! dung"
		call :choose2animals
		set "matappearance=!intro! discovered a new breed of creature. !size! !diet!s called !creaturename!, which !lifetype!. They are most easily described as a melding of a !animal1! and a !animal2!. The !aggro!'s !usefullmat! holds special properties."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
	if !roll! geq 41 if !roll! leq 60 (
		call :roll1d11
		if !roll!==1 set "usefullmat=bones" & set "matname=!creaturename! bone"
		if !roll!==2 set "usefullmat=hide" & set "matname=!creaturename! hide"
		if !roll!==3 set "usefullmat=organs" & set "matname=!creaturename! offal"
		if !roll!==4 set "usefullmat=blood" & set "matname=!creaturename! blood"
		if !roll!==5 set "usefullmat=urine" & set "matname=!creaturename! urine"
		if !roll!==6 set "usefullmat=milk" & set "matname=!creaturename! milk"
		if !roll!==7 set "usefullmat=cerebral fluid" & set "matname=!creaturename! cerebral fluid"
		if !roll!==8 set "usefullmat=puss" & set "matname=!creaturename! puss"
		if !roll!==9 set "usefullmat=fluids" & set "matname=!creaturename! fluid"
		if !roll!==10 set "usefullmat=flesh" & set "matname=!creaturename! flesh"
		if !roll!==11 set "usefullmat=leavings" & set "matname=!creaturename! dung"
		call :choose3animals
		set "matappearance=!intro! discovered a new breed of creature. !size! !diet!s called !creaturename!, which !lifetype!. They are most easily described as a melding of a !animal1!, a !animal2!, and a !animal3!. The !aggro!'s !usefullmat! holds special properties."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
	if !roll! geq 60 (
		call :roll1d11
		if !roll!==1 set "usefullmat=bones" & set "matname=!creaturename! bone"
		if !roll!==2 set "usefullmat=hide" & set "matname=!creaturename! hide"
		if !roll!==3 set "usefullmat=organs" & set "matname=!creaturename! offal"
		if !roll!==4 set "usefullmat=blood" & set "matname=!creaturename! blood"
		if !roll!==5 set "usefullmat=urine" & set "matname=!creaturename! urine"
		if !roll!==6 set "usefullmat=milk" & set "matname=!creaturename! milk"
		if !roll!==7 set "usefullmat=cerebral fluid" & set "matname=!creaturename! cerebral fluid"
		if !roll!==8 set "usefullmat=puss" & set "matname=!creaturename! puss"
		if !roll!==9 set "usefullmat=fluids" & set "matname=!creaturename! fluid"
		if !roll!==10 set "usefullmat=flesh" & set "matname=!creaturename! flesh"
		if !roll!==11 set "usefullmat=leavings" & set "matname=!creaturename! dung"
		call :roll1d11
		if !roll!==1 set "bodyshape=round"
		if !roll!==2 set "bodyshape=long"
		if !roll!==3 set "bodyshape=snake-like"
		if !roll!==4 set "bodyshape=bullet shaped"
		if !roll!==6 set "bodyshape=flat"
		if !roll!==7 set "bodyshape=hunched"
		if !roll!==8 set "bodyshape=bulky"
		if !roll!==9 set "bodyshape=flat"
		if !roll!==10 set "bodyshape=oblong"
		if !roll!==11 set "bodyshape=horse-like"
		call :roll1d8
		if !roll!==1 set "headshape=blunt"
		if !roll!==2 set "headshape=pointed"
		if !roll!==3 set "headshape=sharp"
		if !roll!==4 set "headshape=dog-like"
		if !roll!==6 set "headshape=broad"
		if !roll!==7 set "headshape=flat-faced"
		if !roll!==8 set "headshape=stone-like"
		call :roll1d11
		if !roll!==1 set "headdetail=with two large horns"
		if !roll!==2 set "headdetail=with a single horn"
		if !roll!==3 set "headdetail=adorned with a crest-like ridge"
		if !roll!==4 set "headdetail=covered in thick bone-armor plates"
		if !roll!==6 set "headdetail=adorned with antlers"
		if !roll!==7 set "headdetail=decorated with frills"
		if !roll!==8 set "headdetail=with a snake-like hood"
		if !roll!==9 set "headdetail=with four large eyes"
		if !roll!==10 set "headdetail=split by a great maw"
		if !roll!==11 set "headdetail=with a mouth that conceals a deadly acid spit"
		call :roll1d100
		if !roll! leq 20 set legnumber=two
		if !roll! geq 21 if !roll! leq 80 set legnumber=four
		if !roll! geq 81 if !roll! leq 90 set legnumber=six
		if !roll! geq 91 set legnumber=eight
		call :roll1d7
		if !roll!==1 set "legshape=long and slender"
		if !roll!==2 set "legshape=short"
		if !roll!==3 set "legshape=muscular"
		if !roll!==4 set "legshape=lankey"
		if !roll!==6 set "legshape=bent"
		if !roll!==7 set "legshape=powerful"
		call :roll1d7
		if !roll!==1 set "footshape=hooves"
		if !roll!==2 set "footshape=cloven hooves"
		if !roll!==3 set "footshape=paws"
		if !roll!==4 set "footshape=broad paws"
		if !roll!==6 set "footshape=claws"
		if !roll!==7 set "footshape=talons"
		call :roll1d7
		if !roll!==1 set "tailshape=a round backside lacking a tail"
		if !roll!==2 set "tailshape=a long feline-like tail"
		if !roll!==3 set "tailshape=a short tail"
		if !roll!==4 set "tailshape=a rabbit-like tail"
		if !roll!==6 set "tailshape=a long reptilian-like tail"
		if !roll!==7 set "tailshape=a blunt tail"
		set "matappearance=!intro! discovered a new breed of creature. Called !creaturename!, they are !size! !diet!s, which !lifetype!. A !creaturename! looks like nothing else, possessing a !headshape! head !headdetail!, !legnumber! legs !legshape! ending in !footshape!, and !tailshape!. The creature's !usefullmat! holds special properties."
		echo !creaturename! >> "!recorddir!\!nationname! - Creature List.txt"
	)
)

set "dieroll="
set /a dieroll=(%RANDOM% %% 5)+1
if %dieroll%==1 set "matpowertype=Its properties are entirely mundane"
if %dieroll%==2 set "matpowertype= properties are mostly mundane but augmented with natural magic"
if %dieroll%==3 set "matpowertype=Its properties are a blend of its material nature and magical makeup"
if %dieroll%==4 set "matpowertype=Its properties are mostly magical in nature, but do make use of its natural makeup"
if %dieroll%==5 set "matpowertype=Its properties are entirely magical in nature"
set "dieroll="
set /a dieroll=(%RANDOM% %% 100)+1
if %dieroll% leq 35 set "matuse=in the construction of weapons"
if %dieroll% geq 36 if %dieroll% leq 65 set "matuse=in the construction of armor
if %dieroll% geq 66 if %dieroll% leq 85 set "matuse=to the arcane arts"
if %dieroll% geq 86 if %dieroll% leq 91 set "matuse=within the field of alchemy"
if %dieroll% geq 92 if %dieroll% leq 96 set "matuse=for energy production"
if %dieroll%==97 set "matuse=in construction"
if %dieroll%==98 set "matuse=to the agricultural industry"
if %dieroll%==99 set "matuse=in the field of cloth making"
if %dieroll% geq 100 set "matuse=for dyemaking"
set "finnewmaterial=%matname%. %matappearance% %matpowertype% and it is uniquely useful %matuse%."
goto:eof

:: --- Dynasty Maker ---

:dynasty
if "%democrasyflag%" neq "0" if "%democrasyflag%" neq "1" set democrasyflag=0

if "%cyclesexisted%"=="0" (
	call :namegen
	set "theruler=!rulertitle! !firstname! !lastname!"
	echo !lastname! > "!recorddir!\!nationname! - Current Dynasty.txt"
	echo !theruler! >> "!recorddir!\!nationname! - Rulers.txt"
	echo !theruler! > "!recorddir!\!nationname! - Current Ruler.txt"
) else (
	set /p theruler=
	set /p remremainder=
)<"!recorddir!\!nationname! - Current Ruler.txt"

if "%remremainder%"=="" set remremainder=0
set remcycleyears=50-%remremainder%

if "%reignmod%" leq "5" set "rulerdice=call :roll1d5"
if "%reignmod%" gtr "5" if "%reignmod%" leq "10" set "rulerdice=call :roll4d3"
if "%reignmod%" gtr "10" if "%reignmod%" leq "15" set "rulerdice=call :roll3d5"
if "%reignmod%" gtr "15" if "%reignmod%" leq "20" set "rulerdice=call :roll4d7"
if "%reignmod%" gtr "20" if "%reignmod%" leq "25" set "rulerdice=call :roll6d6"
if "%reignmod%" gtr "25" if "%reignmod%" leq "30" set "rulerdice=call :roll5d7"
if "%reignmod%" gtr "30" if "%reignmod%" leq "35" set "rulerdice=call :roll8d7"
if "%reignmod%" gtr "35" if "%reignmod%" leq "40" set "rulerdice=call :roll7d9"
if "%reignmod%" gtr "40" if "%reignmod%" leq "45" set "rulerdice=call :roll9d9"
if "%reignmod%" gtr "45" set "rulerdice=call :roll6d18"
%rulerdice%
set ruledfor=%roll%
set /a remcycleyears=%remcycleyears%-%ruledfor%
set /a actualruledfor=%roll%+%remremainder%
if %remcycleyears% geq 50 goto ruledwholeage
if %democrasyflag%==0 (
	call :roll1d100B
	if !roll2! leq 50 (
		set "reignender=untill they died of natural causes"
		set "rulertext=The !nationname!'s first !rulertitle! of the !age! Cycle was !rulertitle! !firstname! !lastname!. They ruled for !actualruledfor! years, !reignender!."
		set rulercount=2
		call :longlivetheking		
	)
	if !roll2! geq 51 if !roll2! leq 80 (
				set "fetchedfile=reignenders"
		call :filefetch
		set "reignender=!name!"
		set "rulertext=The !nationname!'s first !rulertitle! of the !age! Cycle was !rulertitle! !firstname! !lastname!. They ruled for !actualruledfor! years, !reignender!."
		set rulercount=2
		call :longlivetheking
	)
	if !roll2! geq 81 (
		set "fetchedfile=abdications"
		call :filefetch
		set "reignender=!name!"
		set "rulertext=The !nationname!'s first !rulertitle! of the !age! Cycle was !rulertitle! !firstname! !lastname!. They ruled for !actualruledfor! years, !reignender!."
		set rulercount=2
		call :longlivetheking
	)
) else (
call :roll1d100B
	if !roll2! leq 50 (
		set "reignender=untill they were voted out of office"
		set "rulertext=The !nationname!'s first !rulertitle! of the !age! Cycle was !rulertitle! !firstname! !lastname!. They ruled for !actualruledfor! years, !reignender!."
		set rulercount=2
		call :holdtheelection
		
	)
	if !roll2! geq 51 if !roll2! leq 80 (
		set "fetchedfile=reignenders"
		call :filefetch
		set "reignender=!name!"
		set rulertext=The !nationname!'s first !rulertitle! of the !age! Cycle was !rulertitle! !firstname! !lastname!. They ruled for !actualruledfor! years, !reignender!.
		set rulercount=2
		call :holdtheelection
	)
	if !roll2! geq 81 (
		set "fetchedfile=abdications"
		call :filefetch
		set "reignender=!name!"
		set rulertext=The !nationname!'s first !rulertitle! of the !age! Cycle was !rulertitle! !firstname! !lastname!. They ruled for !actualruledfor! years, !reignender!.
		set rulercount=2
		call :holdtheelection
	)
)
goto:eof


:ruledwholeage
set year=%age:~-2%
set /a nextage=%year%+1
set "rulertext=%rulertitle% %firstname% %lastname% presided over the %nationname% during the %age% Cycle and saw the dawn of the %nextage% Cycle."
set remremainder=%remcycleyears%*-1
(
	echo !theruler!
	echo !reignrem!
)>"!recorddir!\!nationname! - Current Ruler.txt"
goto:eof

:longlivetheking
set "guyincharge="
set "theruler="
call :namegen
call :roll1d100
if "%roll%" leq "85" (
	set /p lastname=<"!recorddir!\!nationname! - Current Dynasty.txt"
	) else (
	echo !lastname!>"!recorddir!\!nationname! - Current Dynasty.txt"
)
set "guyincharge=%rulertitle% %firstname% %lastname%"
%rulerdice%
set ruledfor=%roll%
set /a remcycleyears=%remcycleyears%-%ruledfor%
set test=%rulercount:~-1%
set numsuf=th
if "%test%"=="1" set numsuf=st
if "%test%"=="2" set numsuf=nd
if "%test%"=="3" set numsuf=rd
set "adjrulercount=%rulercount%%numsuf%"
if "%rulercount%"=="11" set "adjrulercount=11th"
if "%rulercount%"=="12" set "adjrulercount=12th"
if "%rulercount%"=="13" set "adjrulercount=13th"
call :roll1d100
if !roll! leq 50 (
	set "reignender=untill they died of natural causes"
	set placeholder=!rulertext!
	set rulertext=!placeholder! the !nationname!'s !adjrulercount! !rulertitle! of the !age! Cycle was %guyincharge%. They ruled for !ruledfor! years, !reignender!.
)
if !roll! geq 51 if !roll! leq 80 (
	set "fetchedfile=reignenders"
	call :filefetch
	set "reignender=!name!"
	set placeholder=!rulertext!
	set rulertext=!placeholder! the !nationname!'s !adjrulercount! !rulertitle! of the !age! Cycle was %guyincharge%. They ruled for !ruledfor! years, !reignender!.
)
if !roll! geq 81 (
	set "fetchedfile=abdications"
	call :filefetch
	set "reignender=!name!"
	set placeholder=!rulertext!
	set rulertext=!placeholder! the !nationname!'s !adjrulercount! !rulertitle! of the !age! Cycle was %guyincharge%. They ruled for !ruledfor! years, !reignender!.
)
set /a rulercount=%rulercount%+1
if %remcycleyears% gtr 0 goto :longlivetheking
set remremainder=%remcycleyears%*-1
(
	echo !guyincharge!
	echo !reignrem!
)>"!recorddir!\!nationname! - Current Ruler.txt"
goto:eof

:holdtheelection
set "theruler="
set "guyincharge="
call :namegen
set "theruler=%rulertitle% %firstname% %lastname%"
%rulerdice%
set ruledfor=%roll%
set /a remcycleyears=%remcycleyears%-%ruledfor%
set test=%rulercount:~-1%
set numsuf=th
if "%test%"=="1" set numsuf=st
if "%test%"=="2" set numsuf=nd
if "%test%"=="3" set numsuf=rd
set "adjrulercount=%rulercount%%numsuf%"
if "%rulercount%"=="11" set "adjrulercount=11th"
if "%rulercount%"=="12" set "adjrulercount=12th"
if "%rulercount%"=="13" set "adjrulercount=13th"
call :roll1d100
if !roll! leq 50 (
	set "reignender=untill they were voted out of office"
	set placeholder=!rulertitletext!
	set rulertext=!placeholder! the !nationname!'s !adjrulercount! !rulertitle! of the !age! Cycle was %guyincharge%. They ruled for !ruledfor! years, !reignender!.
)
if !roll! geq 51 if !roll! leq 80 (
	set "fetchedfile=reignenders"
	call :filefetch
	set "reignender=!name!"
	set placeholder=!rulertext!
	set rulertext=!placeholder! the !nationname!'s !adjrulercount! !rulertitle! of the !age! Cycle was %guyincharge%. They ruled for !ruledfor! years, !reignender!.
)
if !roll! geq 81 (
	set "fetchedfile=abdications"
	call :filefetch
	set "reignender=!name!"
	set placeholder=!rulertext!
	set rulertext=!placeholder! the !nationname!'s !adjrulercount! !rulertitle! of the !age! Cycle was %guyincharge%. They ruled for !ruledfor! years, !reignender!.
)
set /a rulercount=%rulercount%+1
if %remcycleyears% gtr 0 goto :holdtheelection
set remremainder=%remcycleyears%*-1
(
	echo !theruler!
	echo !reignrem!
)>"!recorddir!\!nationname! - Current Ruler.txt"
goto:eof

:: --- Roll 5d7 ---

:roll5d7
set "die1="
set "die2="
set "die3="
set "die4="
set "die5="
set "dieroll="
set /a die1=(%RANDOM% %% 7)+1
set /a die2=(%RANDOM% %% 7)+1
set /a die3=(%RANDOM% %% 7)+1
set /a die4=(%RANDOM% %% 7)+1
set /a die5=(%RANDOM% %% 7)+1
set /a dieroll=%die1%+%die2%+%die3%+%die4%+%die5%
goto:eof

:: --- Decides if a nation's flag changes ---

:nationflagchangecheck
set "dieroll="
set "die1="
set /a dieroll=(%RANDOM% %% 100)+1
set /a die1=(%RANDOM% %% 50)+1
set "nfcnumsuf="
set "nfcnumeral="
set test=%die1:~-1%
set nfcnumsuf=th
if %test%==1 set nfcnumsuf=st
if %test%==2 set nfcnumsuf=nd
if %test%==3 set nfcnumsuf=rd
set "nfcnumeral=%die1%%numsuf%"
if %die1%==11 set "nfcnumeral=11th"
if %die1%==12 set "nfcnumeral=12th"
if %die1%==13 set "nfcnumeral=13th"
call :flaggen
set "flagchange=%nationname% retained its flag through the end of the %age% Cycle."
if %dieroll% leq 10 set "flagchange=%nationname% elected to change its flag in the %nfcnumeral% year of the %age% Cycle. The new flag consisted of %flag%."
if %dieroll% geq 45 if %dieroll% leq 55 set "flagchange=%nationname% elected to change its flag in the %nfcnumeral% year of the %age% Cycle. The new flag consisted of %flag%."
if %dieroll% geq 90 set "flagchange=%nationname% elected to change its flag in the %nfcnumeral% year of the %age% Cycle. The new flag consisted of %flag%."
goto:eof

:: --- Race Configs ---

:raceconfig

set "outputname=%nationroot%"
if "%newkingdomfounding%"=="1" set "outputname=%newnationroot%"

cd /D "%worlddir%\nationconfigdata"

call :nationpeopleselector
set "race1=%race%"
call :racepicker
set "race2=%race%"

if "%race2%"=="%race1%" set "race2=%race2% ^(different culture^)"

set /a majoirty=100-((%random% %% 15)+1)
set /a minority=100-%majoirty%
cd /d "%~dp0data"
goto:eof

:raceconfig2

set "outputname=%nationroot%"
if "%newkingdomfounding%"=="1" set "outputname=%newnationroot%"

call :nationpeopleselector
set "race1=%race%"
call :nationpeopleselector
set "race2=%race%"
call :racepicker
set "race3=%race%"

if "%race2%"=="%race1%" set "race2=%race2% ^(different culture^)"
if "%race3%"=="%race1%" set "race3=%race3% ^(different culture^)"
if "%race3%"=="%race2%" set "race3=%race3% ^(different culture^)"

set /a majoirty=100-((%random% %% 40)+1)
set /a minority=100-%majoirty%
set /a hyperminority=%minority%/5
set /a minority=%minority%-%hyperminority%

cd /d "%~dp0data"

goto:eof

:raceconfig3

set "outputname=%nationroot%"
if "%newkingdomfounding%"=="1" set "outputname=%newnationroot%"

call :nationpeopleselector
set "race1=%race%"
call :nationpeopleselector
set "race2=%race%"
call :nationpeopleselector
set "race3=%race%"
call :racepicker
set "race4=%race%"

if "%race1%"=="%race2%" set "race2=%race2% ^(different culture^)"
if "%race1%"=="%race3%" set "race3=%race3% ^(different culture^)"
if "%race1%"=="%race4%" set "race4=%race4% ^(different culture^)"
if "%race2%"=="%race3%" set "race3=%race3% ^(different culture^)"
if "%race2%"=="%race4%" set "race4=%race4% ^(different culture^)"
if "%race3%"=="%race4%" set "race4=%race4% ^(different culture^)"

set /a majoirty=100-((%random% %% 10)+40)
set /a minority1=100-%majoirty%
set /a minority2=%minority1%/((%random% %% 2)+2)
set /a minority1=%minority1%-%minority2%
set /a hyperminority=%minority2%/5
set /a minority2=%minority2%-%hyperminority%

cd /d "%~dp0data"


goto:eof

:nationpeopleselector
set "outputname=%nationroot%"
if "%newkingdomfounding%"=="1" set "outputname=%newnationroot%"

cd /D "%worlddir%\nationconfigdata"
set "fetchedfile=%outputname% - Peoples"
set "name="
set "LINE="
set "COUNT="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :NPSCCONT1
)
:NPSCCONT1
set "race=%LINE%"
cd /d "%~dp0data"
goto:eof



:: --- Town Qualities Table ---

:qualitiestable
set "dieroll="
set /a dieroll=(%random% %% 12)+1
if "%dieroll%"=="1" (
	call :roll1d20T
	if !roll! geq 25 set "fame=remarkably famous"
	if !roll! leq 24 set "fame=well known and respected"
	if !roll! leq 20 set "fame=often mentioned"
	if !roll! leq 15 set "fame=sometimes mentioned"
	if !roll! leq 10 set "fame=developing"
	if !roll! leq 5 set "fame=fledgling"
	call :roll1d8
		if "!roll!"=="1" (
			set "facility=trade school"
			Set "filefetch=SchoolNames"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a significant part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="2" (
			set "facility=university"
			set "filefetch=SchoolNames"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a significant part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="3" (
			set "facility=dojo"
			set "filefetch=templenames"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a prosperous part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="4" (
			set "facility=monistary"
			set "filefetch=templenames"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a prosperous part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="5" (
			set "facility=library"
			set "filefetch=Libraries"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a significant part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="6" (
			set "facility=war collage"
			set "filefetch=MillitaryColages"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a significant part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="7" (
			set "facility=millitary adacadamy"
			set "filefetch=MillitaryColages"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a significant part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
		if "!roll!"=="8" (
			set "facility=adventurer school"
			set "filefetch=CampNames"
			call :filefetch
			set "academicname=!name!"
			set quality=Academic
			set "qualflavor=!cityname! is home to !academicname!, a !fame! !facility!. Its presence forms a significant part of !cityname!'s income and culture and !academicname! is thus located in one of the more prosperous parts of the !shortsize!."
		)
)
if "%dieroll%"=="2" (
	set fetchedfile=Gods
	call :filefetch
	set godgame=!name!
	call :roll1d10T
	if !roll! geq 15 set "holeybuild=cathedril"
	if !roll! leq 14 set "holeybuild=temple"
	if !roll! leq 10 set "holeybuild=church"
	if !roll! leq 5 set "holeybuild=shrine"
	set "quality=Holy Site"
	set "qualflavor=!cityname! is known for its !holeybuild! dedicated to !godname!, which has shaped the city's history and culture greatly over the years. The !holeybuild! is known to train many priests, clerics, and even paladins."
)
if "%dieroll%"=="3" (
	call :roll1d20
	set "isolationtype=is located well away from other settlements, such that it rarely sees too many casual visitors"
	if !roll! geq 11 set "isolationtype=is drastically different religiously speaking from its closest neighbors"
	set quality=Insular
	set "qualflavor=!cityname! !isolationtype! which has resulted in its citizens forming their own unique culture of self reliance and loyalty to one's community. It's also made them somewhat suspishious of outsiders."
)
if "%dieroll%"=="4" (
	set fetchedfile=MagicLocations
	call :filefetch
	set magicloc=!name!
	set "quality=Magically Attuned"
	set "qualflavor=!cityname! was built !magicloc! which has made it a haven for spell casters of all kinds. This has made !cityname! a center of academia where the average commoner knows far more about the arcane than even certain scholars and sages from other lands."
)
if "%dieroll%"=="5" (
	set quality=Superstitious
	set "qualflavor=!cityname!'s citizens hae a deep and abiding fear of magic and the unexplained, but this fear has caused its citizens to become more supportive and loyal to each other and their !shortloc!."
)
if "%dieroll%"=="6" (
	set fetchedfile=Gods
	call :filefetch
	set godname=!name!
	set quality=Pious
	set "qualflavor=!cityname! is known for its inhabitants overwhelming devotion to !godname!. Nearly everyone in the !shortsize! is a devout follower of theirs."
)
if "%dieroll%"=="7" (
	if "!shortloc!"=="riverside" set "fetchedfile=RiverStrat"
	if "!shortloc!"=="hillside" set "fetchedfile=HillStrat"
	if "!shortloc!"=="mountain" set "fetchedfile=MountainStrat"
	if "!shortloc!"=="lakeside" set "fetchedfile=LakeStrat"
	if "!shortloc!"=="byou" set "fetchedfile=ByouStrat"
	if "!shortloc!"=="valley" set "fetchedfile=ValleyStrat" 
	if "!shortloc!"=="cliffside" set "fetchedfile=CliffStrat" 
	call :filefetch
	set "strategiclocation=!name!"
	set "quality=Strategic Location"
	set "qualflavor=!cityname! is located !strategiclocation!. Naturally, this brings much comfort to !cityname!'s citizens though it also makes them just a little cocky."
)
if "%dieroll%"=="8" (
	call :roll1d14
	if "!roll!"=="1" set "qualflavor=The !shortloc! !cityname! is located near happens to be a place of exceptional natural beauty. People come from far and wide to paint the landscape, drink it in, or be inspired by nature's wonders."
	if "!roll!"=="2" set "qualflavor=Many years ago, a major even in the region's history occurred in %cityname%. People come from far and wide to see where it happened and speak to the descendants of those who lived it. A significant portion of !cityname!'s economy comes from selling relics to tourists."
	if "!roll!"=="3" set "qualflavor=!cityname! contains a monument to a local hero, which sees many pilgrims come to offer tribute to the hero's birthplace and descendants."
	if "!roll!"=="4" set "qualflavor=An ancient ruined temple to an unknown god rests just outside of !cityname!. Many people come to study it, or make pilgimages to honor the unknown god and the culture which built the temple."
	if "!roll!"=="5" set "qualflavor=!cityname! is home to a quite impressive botanical garden, such that it offers cuttings, seedpods, and bulbs from its many plants for sale as one of its main sources of income."
	if "!roll!"=="6" set "qualflavor=!cityname! has a small zoo of exotic and local wildlife. The zoo is mostly intended as a means of educating rangers and warriors on how to handle these creatures, but is also open to the public."
	if "!roll!"=="7" set "qualflavor=!cityname! has a small zoo of exotic and local wildlife. The zoo is intended as a cuieiro for the wealthy, but sometime permits rangers, warriors, and scholars to study the animals in their keeping."
	if "!roll!"=="8" set "qualflavor=!cityname! has a small zoo of exotic and local monsters. The zoo is mostly intended as a means of educating rangers and warriors on how to handle these creatures, but is also open to the public on select ocasions."
	if "!roll!"=="9" set "qualflavor=!cityname! is home to a an extensive manangere of monsters. The zoo is mostly intended as a means of educating rangers and warriors on how to handle these creatures, but is also open to the public on select ocasions."
	if "!roll!"=="10" set "qualflavor=A major feature of !cityname! is an old museum displaying curios and relics of the local region's history. The museum is quite the tourist draw, ensuring merchants, trade caravans, and travelers continue to flow through the !shortloc!."
	if "!roll!"=="11" set "qualflavor=An artist living in !cityname! posthumously became a well known and celebrated figure. A small gallery of their lesser known works has been erected in their home !shortsize! to draw in a little bit of coin for the community."
	if "!roll!"=="12" set "qualflavor=!cityname! is home to an ancient fort which the community formed around. The fort is more of a historically important structure than an active defensive structure, and as a result many people come from all around the region to visit the fort, weather for personal reasons, library access, or to participate in politics."
	if "!roll!"=="13" set "qualflavor=A large carnival regularly stops in !cityname!, resulting in the !shortsize! having a dedicated space on the edge of town for the carnival to set up. It makes its stop at !cityname! twice a year, leading to a regular and dependable influx of travelers and coin."
	if "!roll!"=="14" set "qualflavor=!cityname! is for some reason unknown to its neighbors, a hotbed of erotic artwork. The entire !shortsize! is covered in erotic sculptures, murals, paintings, and all manner of other art installations created by countless different artists over many years. The art draws many curiosity seekers from lands far and wide. Though, they are not typically the most upstanding and cultured of visitors."
	set "quality=Tourist Attraction"
)
if "%dieroll%"=="9" (
	set quality=Notorious
	set "qualflavor=!cityname! has a reputation for being a den of iniquity, corruption, and greed. Thieves, rogues, and cutthroats are much more common in !cityname! than in surrounding communities, and travelers thus tend to avoid the !shortsize!."
)
if "%dieroll%"=="10" (
	set quality=Prosperous
	set "qualflavor=!cityname! is built upon an intersection of popular trade routes. The !shortsize! is often packed with merchants, and the citizens live much better than those of a typical !shortsize! of !cityname!'s size."
)
if "%dieroll%"=="11" (
	set "quality=Racially Intolerant"
	set "qualflavor=!cityname!'s citizens are known to harbor deep prejudices for certain races. No one is able to provide a full list of people whom !cityname! is hostile towards, but their hatred seems to stem mostly towards people looking to settle in their community. Travelers may be harassed, but are unlikely to get into serious trouble at the hands of !cityname!'s citizens."
)
if "%dieroll%"=="12" (
	set "quality=Rumormongering Citizens"
	set "qualflavor=!cityname!s citizens are nosy and gossipy to a fault. Very little happens in the settlement that no one knows about. Since its almost impossible to keep a secrete, most anyone can tell anyone else of anything out of the ordinary. Ironically, this has made !cityname! a very safe community."
)
goto:eof

:SummonGod

cd /D "%worlddir%\nationconfigdata"

set "fetchedfile=%nationroot% - Religions"

set "name="
set "LINE="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :PICONT1
)
:PICONT1
set "religion=%LINE%"

cd /D "%worlddir%\religionconfigdata"

set "fetchedfile=%religion% - Gods"

set "name="
set "LINE="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :PICONT2
)
:PICONT2
set "chosengod=%LINE%"

cd /D "%~dp0data"
goto:eof

:clergypicker
cd /D "%worlddir%\religionconfigdata"

set "fetchedfile=%religion% - Titles"

set "name="
set "LINE="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :PICONT2
)
:PICONT2
set "religioustitle=%LINE%"

cd /D "%~dp0data"
goto:eof

:: --- Political Intrigue Maker ---

:politicalintriguer
call :SummonGod

set kingpickedflag=0
set "fetchedfile=%nationgovtitles%"
call :filefetch
set "title1=%name%"
call :filefetch
set "title2=%name%"
call :filefetch
set "title3=%name%"
call :namegen
set "Noble=%title1% %firstname% %lastname%"
set /a roll=(%random% %% 100)+1
if "%roll%" geq "90" set /p Noble=< "!recorddir!\!nationname! - Current Ruler.txt"
if "%roll%" geq "90" set kingpickedflag=1
call :namegen
set "Noble1=%title2% %firstname% %lastname%"
set /a roll=(%random% %% 100)+1
if "%roll%" geq "90" if "%kingpickedflag%"==0 set /p Noble=< "!recorddir!\!nationname! - Current Ruler.txt"
call :namegen
set "Noble2=%title3% %firstname% %lastname%"
set kingpickedflag=0
call :clergypicker
set "religioustitle1=%religioustitle%"
call :clergypicker
set "religioustitle2=%religioustitle%"
call :clergypicker
set "religioustitle3=%religioustitle%"
call :namegen
set "Clergy=%religioustitle1% %firstname% %lastname%"
call :namegen
set "Clergy1=%religioustitle2% %firstname% %lastname%"
call :namegen
set "Clergy2=%religioustitle3% %firstname% %lastname%"

set "fetchedfile=policies"
call :filefetch
set "Policy=%name%"

set "fetchedfile=peoples"
call :filefetch
set "People=%name%"

set /p ruler=< "%recorddir%\%nationname% - Current Ruler.txt"
set "fetchedfile=motovation"
call :filefetch
set "Motivation=%name%"

:: --- enamypicker table ---
set "fetchedfile=enamies"
call :filefetch
set "Enemy=%name%"
if "%Enemy%"=="Bandits" if exist "%recorddir%\%nationname% - Bandit Neighbors.txt" (
	set "fetchedfile=!nationname! - Bandit Neighbors"
	call :datafetch
	set "Enemy=the !name!"
)
if "%Enemy%"=="Religion" if exist "%recorddir%\%nationname% - Cult Neighbors.txt" (
	set "fetchedfile=!nationname! - Cult Neighbors"
	call :datafetch
	set "Enemy=the !name!"
)
if "%Enemy%"=="Cult" if exist "%recorddir%\%nationname% - Cult Neighbors.txt" (
	set "fetchedfile=!nationname! - Cult Neighbors"
	call :datafetch
	set "Enemy=the !name!"
)
if "%Enemy%"=="Sect" if exist "%recorddir%\%nationname% - Cult Neighbors.txt" (
	set "fetchedfile=!nationname! - Cult Neighbors"
	call :datafetch
	set "Enemy=the !name!"
)
if "%Enemy%"=="Wizard" if exist "%recorddir%\%nationname% - Mage Neighbors.txt" (
	set "fetchedfile=!nationname! - Mage Neighbors"
	call :datafetch
	set "Enemy=the !name!"
)
if "%Enemy%"=="Monster" if exist "%recorddir%\%nationname% - Monster Neighbors.txt" (
	set "fetchedfile=!nationname! - Monster Neighbors"
	call :datafetch
	set "Enemy=the legendary monster !name!"
)
if "%Enemy%"=="Hive" if exist "%recorddir%\%nationname% - Hive Neighbors.txt" (
	set "fetchedfile=!nationname! - Hive Neighbors"
	call :datafetch
	set "Enemy=the !name! hive"
)

:: --- end enamy picker table ---

set "fetchedfile=hostableevents"
call :filefetch
set "thing=%name%"

set "fetchedfile=%nationname% - Settlments List"
call :datafetch
set "cityname=!name!"


set "dieroll="
set /a dieroll=(%RANDOM% %% 93)+1

if "%dieroll%"=="1" (
	set "event=an assassination attempt is made on !Noble!. A large political upheaval follows as the plot is revealed."
	echo !Noble!, assassination attempt caused political upheaval>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="2" (
	set "event=an assassination attempt was made on !Clergy!. A large political upheaval follows as the plot was revealed."
	echo !Clergy!, assassination attempt caused political upheaval>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="3" (
	call :roll1d3
	set occurance=loss
	if "!roll!"=="2" set occurance=defeat
	if "!roll!"=="3" set occurance=disease
	set "event=!Noble! went through a life-changing !occurance! and it reflected in their work as an official."
)
if "%dieroll%"=="4" set "event=a public political convention %Policy% was held."
if "%dieroll%"=="5" set "event=a new %Policy% became divisive among %People%."
if "%dieroll%"=="6" (
	set "event=!Clergy! motivated by !Motivation! plotted to overthrow the !ruler! and becomes a ring leader of a group of conspritors."
	echo !Clergy!, conspired to overthrow !ruler!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="7" (
	call :roll1d4
	set group=religion
	if "!roll!"=="2" set group=culture
	if "!roll!"=="3" set group=nationality
	if "!roll!"=="4" set group=ethnisity
	set "event=!ruler! ordered the prosecution of a minority !group!."
)
if "%dieroll%"=="8" (
	call :roll1d3
	set occurance=protest
	if "!roll!"=="2" set occurance=rebellion
	if "!roll!"=="3" set occurance=riot
	set "event=there was a !occurance! initiated by !People!."
)
if "%dieroll%"=="9" set "event=a new %Policy% caused %People% to stage a rebellion."
if "%dieroll%"=="10" set "event=a new %Policy% initiated by %Clergy% brought greater power to the %religion% church."
if "%dieroll%"=="11" (
		call :roll1d4
	set occurance=religion
	if "!roll!"=="2" set occurance=culture
	if "!roll!"=="3" set occurance=nationality
	if "!roll!"=="4" set occurance=ethnisity
	set "event=after a season of tumultuous disagreement in the court, !ruler! the regent focused on their new desire: !Motivation!."
)
if "%dieroll%"=="12" set "event=a sudden threat from %Enemy% emerged, forcing the court to act swiftly and without much planning, resulting in great panic."
if "%dieroll%"=="13" (
	set "event=!ruler! became desperate for an heir, and enlisted the help of their confadant !noble! in their quest."
	echo !noble!, assisted !ruler! in finding an heir>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="14" (
	call :roll1d4
	set occurance=religion
	if "!roll!"=="2" set occurance=culture
	if "!roll!"=="3" set occurance=nationality
	if "!roll!"=="4" set occurance=ethnisity
	set "event=a general public yearning for !Motivation! results in terrorist activity in an attempt to force the government to capitulate."
)
if "%dieroll%"=="15" (
	call :roll1d3
	set occurance=loss
	if "!roll!"=="2" set occurance=defeat
	if "!roll!"=="3" set occurance=disease
	set "event=a spy ring was revealed in the court by !Noble!. The conspiracy ran deep."
	echo !noble!, uncovered a spyring>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="16" (
	set "event=the young upstart !Noble!, motovated by !Motivation! challenges the !ruler!'s decision !Policy!."
	echo !noble! chalanged !ruler!'s !policy!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="17" set "event=%noble% attempted to bribe %noble2% for %Motivation%."
if "%dieroll%"=="18" set "event=%Clergy% attempted to bribe %noble2% for %Motivation%."
if "%dieroll%"=="19" set "event=an economic boom brought %people% increaced wealth and new opertunities."
if "%dieroll%"=="20" (
	set "event=an economic boom brought !Noble! increaced wealth and new opertunities."
	echo !noble!, a wealthy figure of their time>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="21" set "event=%Clergy% attempted to bribe %noble2% for %Motivation%."
if "%dieroll%"=="22" (
	set "event=a new political movement was founded by !Clergy! based on !Motivation!."
	echo !clergy!, began a political movement about !motovation!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="23" set "event=a new political movment was founded by %People% based on %Motivation%."
if "%dieroll%"=="24" (
	set "event=the young !noble! gained the recognition of his peers and was widely projected to become a new strong leader."
	echo !noble!, a person of fame and potential>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="25" (
	set "event=a grand !thing! was arranged by !noble!."
	echo !noble!, arranged a grand !thing!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="26" (
	set "event=a grand !thing! was arranged by !Clergy!."
	echo !Clergy!, arranged a grand !thing!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="27" (
	call :roll1d3
	set "occurance=a matter of honor"
	if "!roll!"=="2" set "occurance=due to economic disagreements"
	if "!roll!"=="3" set "occurance=over a romantic interest"
	set "event=a fude occured between !noble! and !noble2! !occurance!."
	echo !noble! and !noble2!, who began a bloodfude with eachother>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="28" set "event=a minor skirmish occured involving %Enemy% resulting in heavy casualties and damage."
if "%dieroll%"=="29" set "event=a dule occured between %noble% and %noble2% over %Motivation%."
if "%dieroll%"=="30" (
	set "event=a major disagreement between !noble! and !noble2! transformed into a bloodfeud."
	echo !noble! and !noble2!, who began a bloodfude with eachother>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="31" (
	call :roll1d2
	set "occurance=creates a major power vacume within their local region"
	if "!roll!"=="2" set "occurance=results in a major change in !Policy!"
	set "event=the unexpected death of !noble! !occurance!."
	echo !noble!, who'se death !occurance!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="32" set "event=a bountiful harvest brought a surplus of food to %nationname%."
if "%dieroll%"=="33" (
	set "event=public execution of !noble! caused general uproar and chaos."
	echo !noble!, exicution caused chaos>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="34" set "event=public execution of %Enemy% caused general uproar and chaos."
if "%dieroll%"=="35" (
	set "event=public execution of !Clergy! caused general uproar and chaos."
	echo !clergy!, exicution caused chaos>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="36" set "event=public execution of a group of %People% caused general uproar and chaos."
if "%dieroll%"=="37" set "event=a new %Policy% is enacted to counter a neighboring nation."
if "%dieroll%"=="38" (
	call :roll1d5
	set "occurance=political"
	if "!roll!"=="2" set "occurance=economic"
	if "!roll!"=="3" set "occurance=romantic"
	if "!roll!"=="4" set "occurance=religious"
	if "!roll!"=="5" set "occurance=adultry"
	set "event=!Clergy! was the center of a major !occurance! scandle."
	echo !Clergy!, a controvercial figure>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="39" (
	call :roll1d5
	set "occurance=political"
	if "!roll!"=="2" set "occurance=economic"
	if "!roll!"=="3" set "occurance=romantic"
	if "!roll!"=="4" set "occurance=religious"
	if "!roll!"=="5" set "occurance=adultry"
	set "event=!Noble! was the center of a major !occurance! scandle."
	echo !Noble!, a controvercial figure>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="40" (
	call :roll1d5
	set "occurance=political"
	if "!roll!"=="2" set "occurance=economic"
	if "!roll!"=="3" set "occurance=romantic"
	if "!roll!"=="4" set "occurance=religious"
	if "!roll!"=="5" set "occurance=adultry"
	set "event=!Clergy! was the center of serious government corruption."
	echo !clergy!, the center of corruption>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="41" (
	set "event=!Noble! was the center of serious government corruption."
	echo !noble!, the center of corruption>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="42" (
	set "event=!Clergy! claimed to have the power to call a new divine, and gained influence due to their claims."
	echo !clergy!, who claimed they could channel the power ofa new god>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="43" (
	call :roll1d8
	set "occurance=spring rains"
	if "!roll!"=="2" set "occurance=summer rains"
	if "!roll!"=="3" set "occurance=autumn rains"
	if "!roll!"=="4" set "occurance=spring storms"
	if "!roll!"=="5" set "occurance=summer storms"
	if "!roll!"=="6" set "occurance=autumn storms"
	if "!roll!"=="7" set "occurance=winter storms"
	if "!roll!"=="8" set "occurance=snowfall"
	set "event=abnormaly long and sever !occurance! force roads and ports to close for extended periods, bringing great financial ruin to many."
)
if "%dieroll%"=="44" (
	set "event=a public vote was held on new !policy!, to which the influential !Clergy! was strongly opposed."
	echo !clergy!, who opposed !policy!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="45" set "event=a public vote was held on new %policy%, to which the influencial members of the %People% were strongly opposed."
if "%dieroll%"=="46" set "event=a string of attacks by %Enemy% claimed numerous lives and minor vilages, as well as great quanties of important resources."
if "%dieroll%"=="47" (
	set "event=a power struggle between !Clergy! and !Clergy2! created a major religious divide."
	echo !clergy! and !clergy2!, who created a religious devide>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="48" set "event=%king%, without many other options, called for a war of extermination against %Enemy%."
if "%dieroll%"=="49" (
	call :roll1d2
	set set "Enemy=wildlife"
	if "!roll!"=="2" set "Enemy=Hive"		
		if "!Enemy!"=="Hive" if exist "!recorddir!\!nationname! - Hive Neighbors.txt" (
		set "fetchedfile=!recorddir!\!nationname! - Hive Neighbors"
		call :filefetch
		set "Enemy=members of the !name! hive"
		) else (set "Enemy=monsterious creatures"
		set /p king=< "!recorddir!\!nationname! - Current Ruler.txt"
	set "event=rampaging !Enemy! caused significent economic damage, forcing new measure to be taken to counter them."
)
if "%dieroll%"=="50" (
	call :roll1d2
	set "occurance=succumbs to alchoholisum"
	if "!roll!"=="2" set "occurance=developed a debilitating narcotics addiction"
	set "event=the influential !Clergy! !occurance!, which greatly impaired their judgment."
	echo !clergy!, and influential figure who !occurance!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="51" (
	call :roll1d2
	set "occurance=succumbs to alchoholisum"
	if "!roll!"=="2" set "occurance=developed a debilitating narcotics addiction"
	set "event=the influential !Noble! !occurance!, which greatly impaired their judgment."
	echo !noble!, an influential figure who !occurance!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="52" (
	call :roll1d5
	set "occurance=scocial policies"
	if "!roll!"=="2" set "occurance=the political process"
	if "!roll!"=="3" set "occurance=economic policies"
	if "!roll!"=="4" set "occurance=the laws of the land"
	if "!roll!"=="5" set "occurance=the church"
	set "event=the !people! demanded large scale refomation of !occurance!."
)
if "%dieroll%"=="53" (
	call :roll1d3
	set "occurance=heratics"
	if "!roll!"=="2" set "occurance=sinners"
	if "!roll!"=="3" set "occurance=deamons"
	set "event=the influential !Clergy! launched an inquisition to root out !occurance! with the support of the state."
	echo !clergy!, began an inquisition>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="54" (
	call :roll1d3
	set "occurance=heratics"
	if "!roll!"=="2" set "occurance=sinners"
	if "!roll!"=="3" set "occurance=deamons"
	set "event=the influential !Clergy! launched an inquisition to root out !occurance! without the support of the state."
	echo !clergy!, began an inquisition>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="55" set "event=a great fire was started in %cityname% by a group of %people% in protest to %Policy%."
if "%dieroll%"=="56" set "event=%king%'s plans were disrupted due to sabatoge by a group of disgruntled %people%."
if "%dieroll%"=="57" set "event=the influencial %Clergy% made a grave mistake, causing widespread chaos and suffering. They pass the blame onto %Enemy%."
if "%dieroll%"=="58" set "event=%Noble% made a grave mistake, causing widespread chaos and suffering. They pass the blame onto %Enemy%."
)		
if "%dieroll%"=="59" (
	call :roll1d3
	set "occurance=religion"
	if "!roll!"=="2" set "occurance=group"
	if "!roll!"=="3" set "occurance=people"
	set "event=longterm systemic oppression of a minority !occurance! escalated into violence."
)
if "%dieroll%"=="60" set "event=%cityname% was roughtlessly sacked by %Enemy%."
if "%dieroll%"=="61" set "event=the %people% developed strong opposition arose to the general politics of the time."
if "%dieroll%"=="62" set "event=the %people% developed strong opposition arose to the general politics of the time."
if "%dieroll%"=="63" set "event=A nationwide plague cripples trade and causes food reserves to run low."
if "%dieroll%"=="64" (
	cd /d "!worlddir!"
	set fetchedfile=rootnations
	call :filefetch
	set "nationname2=!name!"
		if "!nationname!"=="!nationname2!" (
			call :filefetch
			set "nationname2=!name!"
		)
		if "!nationname!"=="!nationname2!" (
			call :filefetch
			set "nationname2=!name!"
		)
	cd /d "!storage!data"
	set "fetchedfile=clergy"
	call :filefetch
	set "title=!name!"
	call :namegen
	set Clergy=!title! !firstname! !lastname!
	set "event=!nationname! experienced great cultural influence from !nationname2!, which greatly upset the influential theologian !clergy!."
	echo !clergy!, who opposed cultural influence from !nationname2!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	cd /D "%~dp0data"
)
if "%dieroll%"=="66" (
	set "event=a secret agreement between !Noble! and !Clergy! was exposed, and rumors about corruption began to spread."
	echo !noble! and !clergy!, who were part of a corruption ring>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="67" (
	set "event=the regent granted extended rights and powers to the church after demands from !Clergy! became politicaly unavoidable to address."
	echo !clergy!, who gained more power and rights for the church>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="68" set "event=!cityname! along with its associated county attempted to declare independence based on !Motivation!."
if "%dieroll%"=="69" (
	set "event=the beloved !Clergy! proposes radical changes to !Policy!, causing a problematic schism."
	echo !clergy!, who opposed radical changes to !policy!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="70" (
	if exist "!recorddir!\!nationname! - Cult Neighbors.txt" (
		set "fetchedfile=!recorddir!\!nationname! - Cult Neighbors"
		call :filefetch
		set "Enemy=the !name!"
	)
	if not exist "!recorddir!\!nationname! - Cult Neighbors.txt" set "Enemy=a cult"
	set "event=!Enemy! manages to gain influence over !Clergy!, which in turn starts to influence the politics." & echo !clergy! who was swayed to !enamy!'s side>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	if "!roll!"=="2" set "event=!Enemy! manages to gain influence over many of the !People!, which in turn starts to influence the politics."
)
if "%dieroll%"=="71" set "event=a significant number of refugees arise after a particularly serious wave of attacks by %Enemy% attack devistates %cityname%."
)
if "%dieroll%"=="72" set "event=a consperacy against the crown forms based on %Motivation%."
if "%dieroll%"=="73" (
	cd /d "!worlddir!"
	set fetchedfile=rootnations
	call :filefetch
	set "nationname2=!name!"
		if "!nationname!"=="!nationname2!" (
			call :filefetch
			set "nationname2=!name!"
		)
		if "!nationname!"=="!nationname2!" (
			call :filefetch
			set "nationname2=!name!"
		)
	cd /d "!storage!data"
	set "event=an arranged marage was made between !noble! and !noble2! of !nationname2! in an attempt to improve relations."
	echo !noble!, who married !noble2! of !nationname2! to improve relations>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	cd /D "%~dp0data"
)
if "%dieroll%"=="74" (
	call :roll1d2
	set occurance=famious
	if "!roll!"=="2" set occurance=infamous
	set "event=the !occurance! !noble! hosts a feast in their home in !cityname!, attracting visitors from far and wide."
	echo !noble!, who threw an incredible feast>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="75" (
	call :roll1d2
	set occurance=famious
	if "!roll!"=="2" set occurance=infamous
	set "event=the !occurance! !noble! begins planning a coup in their home in !cityname!. They are aided in their plot by a large group of !people!."
	echo !noble!, who plotted a coup>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="76" (
	set "event=a !policy! caused a large dispute, leading to a large group of !people! becoming the sworn enamies of !noble!."
	echo !noble!, who became the sworn enamy of !people!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="77" set "event=a significant dispute between multiple temple doctrines occurs, leading to talks of wide scale political reformation."
if "%dieroll%"=="78" (
	set "event=A controversial doctrine by !Clergy! leads to book burning and prosecutions supported by the politicians."
	echo !clergy!, who organized book burnings and persecutions>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="79" (
	call :roll1d2
	if "!roll!"=="1" (
		set "event=a sensational crime rocks the court, for which blame is placed on !Clergy!."
		echo !clergy!, who was accused for a serious crime>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	if "!roll!"=="2" (
		set "event=a sensational crime rocks the court, for which blame is placed on !Noble!."
		echo !noble!, who was blamed for a serious crime>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	
)
if "%dieroll%"=="80" (
	call :roll1d2
	set "event=in an attempt to calm tensions, the regent denounces violence against !Enemy!."
	if "!roll!"=="2" set "event=in an attempt force !Enemy! to back down from their current activities, the regent openly calls for violence against them."
)
if "%dieroll%"=="81" (
	call :roll1d2
	if "!roll!"=="1" (
		set "event=!Noble! falls desperately in love with !Noble2!, which causes controversy as their love is seen as inappropriate."
		echo !noble!, whose love with !noble2! is seen as deeply taboo and causes controvercy>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	if "!roll!"=="2" (
		set "event=!Noble! falls desperately in love with !Clergy!, which causes controversy as their love is seen as inappropriate."
		echo !noble!, whose love with !clergy! is seen as deeply taboo and causes controvercy>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
)
if "%dieroll%"=="82" (
	call :namegen
	set "event=an influential !People!, !firstname! !lastname!, makes a political statement about !Policy! and is met by praise."
	echo !firstname! !lastname!, a !people! who was very influential>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="83" (
	call :roll1d7
	set "occurance=of a particular people"
	if "!roll!"=="2" set "occurance=of a particular people"
	if "!roll!"=="3" set "occurance=of a certain culture"
	if "!roll!"=="4" set "occurance=towards a particular nationality"
	if "!roll!"=="5" set "occurance=of a certain bloodline"
	if "!roll!"=="6" set "occurance=of the practices of a small religion"
	if "!roll!"=="7" set "occurance=of a community"
	set "event=!Noble! becomes intolerant !occurance!, desiring they be periscuted, even banned if possible."
	echo !noble!, who persicuted !occurance!>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="84" (
	set "event=the influential !clergy! deems a particular book to eb blasphemous and calls for its banning."
	echo !clergy!, who attempted to ban a particular blasphemous book>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
)
if "%dieroll%"=="85" set "event=%nationname% goes through a deep social conflict between tradition and social progress."
if "%dieroll%"=="86" (
	call :roll1d2
	set occurance=economic
	if "!roll!"=="2" set occurance=moral
	if "!roll!"=="2" set occurance=social
	call :roll1d2
	if "!roll!"=="1" (
		set "event=!nationname! goes through a !occurance! crisis, and it falls to !noble! to amend it."
		echo !noble!, who amended a !occurenace! crisis>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
	if "!roll!"=="2" (
		set "event=!nationname! goes through a !occurance! crisis, and it falls to !Clergy! to amend it."
		echo !clergy!, who mended a !occurance! crisis>>"!worlddir!\Nations\!nationname!\!nationname! - Historical Figures.txt"
	)
)
if "%dieroll%"=="87" set "event=a political movement helps to centralize power."
if "%dieroll%"=="88" set "event=a political movement helps to decentralize power."
if "%dieroll%"=="89" set "event=%Enemy% makes a push, using dishonorable tactics to gain influence and power within the region."
if "%dieroll%"=="90" set "event=Forged documents circulating in the court causing mass confusion and incorrect decisions to be made."
if "%dieroll%"=="91" set "event=%Enemy% takes advantage of a peasant revolt to gain regional advantage and acomplish one of their goals."
if "%dieroll%"=="92" set "event=the %People%'s demands escalated into an ultimatum, and then civil unrest as the ultimatum wasn't met."
if "%dieroll%"=="93" set "event=a foreign diplomat visits the court to address a number of pressing issues. Clever negotiation decided the future of the realm^(s^)."
goto:eof

:: --- Color Pickers ---

:choose3colors
set fetchedfile=colors
call :filefetch
set color1=%name%
call :filefetch
set color2=%name%
call :filefetch
set color3=%name%
if "%color1%"=="%color2%" goto choose3colors
if "%color1%"=="%color3%" goto choose3colors
if "%color2%"=="%color3%" goto choose3colors
goto:eof

:choose2colors
set fetchedfile=colors
call :filefetch
set color1=%name%
call :filefetch
set color2=%name%
if "%color1%"=="%color2%" goto choose2colors
goto:eof

:: --- Animal Pickers ---

:choose3animals
set fetchedfile=animals
call :filefetch
set "animal1=%name%"
call :filefetch
set "animal2=%name%"
call :filefetch
set "animal3=%name%"
if "%animal1%"=="%animal2%" goto choose3animals
if "%animal1%"=="%animal3%" goto choose3animals
if "%animal3%"=="%animal2%" goto choose3animals
goto:eof

:choose2animals
set fetchedfile=animals
call :filefetch
set "animal1=%name%"
call :filefetch
set "animal2=%name%"
if "%animal1%"=="%animal2%" goto choose2animals
goto:eof

:: --- Town Mod Calculator ---

:towntypemod1
set /a math=%agrimod%+3
set /a agrimod=%math%
set /a math=%expamod%+3
set /a expamod=%math%
goto:eof
:towntypemod2
set /a math=%inframod%+3
set /a inframod=%math%
set /a math=%econmod%+3
set /a econmod=%math%
goto:eof
:towntypemod3
set /a math=%econmod%+3
set /a econmod=%math%
set /a math=%inframod%+3
set /a inframod=%math%
goto:eof
:towntypemod4
set /a math=%cultremod%+3
set /a cultremod=%math%
set /a math=%econmod%+3
set /a econmod=%math%
goto:eof
:towntypemod5
set /a math=%milmod%+3
set /a milmod=%math%
set /a math=%arcanemod%+3
set /a arcanemod=%math%
goto:eof
:towntypemod6
set /a math=%arcanemod%+3
set /a arcanemod=%math%
set /a math=%cultremod%+3
set /a cultremod=%math%
goto:eof

:: --- Town Demographics Calculator ---

:1racemath
set "races=%race1%"
set /a race1demo=(%RANDOM% %% 9)+91
set /a minority=100-%race1demo%
set "demographics=%race1demo% percent %raceadj1% and %minority% percent fringe minorities"
goto:eof

:2racemathA
set /a race1demo=(%RANDOM% %% 10)+76
set /a minority=100-%race1demo%
set /a math=%minority%-((%RANDOM% %% 3)+1)
set hyperminority=%math%
set /a math=%minority%-%hyperminority%
set minority=%math%
goto:eof

:2racemathB
set /a race1demo=(%RANDOM% %% 15)+61
set /a minority=100-%race1demo%
set /a math=%minority%-((%RANDOM% %% 3)+1)
set hyperminority=%math%
set /a math=%minority%-%hyperminority%
set minority=%math%
goto:eof

:2racemathC
set /a race1demo=(%RANDOM% %% 14)+52
set /a minority=100-%race1demo%
set /a math=%minority%-((%RANDOM% %% 3)+1)
set hyperminority=%math%
set /a math=%minority%-%hyperminority%
set minority=%math%
goto:eof

:2racemathD
set /a race1demo=(%RANDOM% %% 8)+52
set /a minority=100-%race1demo%
set /a math=%minority%-((%RANDOM% %% 3)+1)
set hyperminority=%math%
set /a math=%minority%-%hyperminority%
set minority=%math%
goto:eof

:3racemath
set /a race1demo=(%RANDOM% %% 10)+46
set /a lowerbound=((100-%race1demo%)/3)*2
set /a upperbound=((100-%race1demo%)/6)*5
set /a race2demo=(%RANDOM% %% %upperbound%)+(%lowerbound%+1)
set /a minority=100-(%race1demo%+%race2demo%)
set /a math=%minority%-((%RANDOM% %% 3)+1)
set hyperminority=%math%
set /a math=%minority%-%hyperminority%
set minority=%math%
goto:eof

: --- Kingdom Namer ---

:KNnamer
set "dieroll="
set /a dieroll=(%RANDOM% %% 6)+1
if "%dieroll%"=="1" (
	call :KNname
	set kingdomname=!knname!
)
if "%dieroll%"=="2" (
	call :KNname
	set fetchedfile=govtypes
	call :filefetch
	set govtype=!name!
	set "kingdomname=!knname! !govtype!"
)
if "%dieroll%"=="3" (
	call :KNname
	set fetchedfile=govtypes
	call :filefetch
	set govtype=!name!
	set fetchedfile=nationhonorifics
	call :filefetch
	set honorif=!name!
	set "kingdomname=!honorif! !knname! !govtype!"
)
if "%dieroll%"=="4" (
	call :KNname
	set fetchedfile=govtypes
	call :filefetch
	set govtype=!name!
	set fetchedfile=nationhonorifics
	call :filefetch
	set honorif=!name!
	set "kingdomname=!honorif! !govtype! of !knname!"
)
if "%dieroll%"=="5" (
	call :KNname
	set fetchedfile=govtypes
	call :filefetch
	set govtype=!name!
	set "kingdomname=!govtype! of !knname!"
)
if "%dieroll%"=="6" (
	call :KNname
	set fetchedfile=govtypes
	call :filefetch
	set fetchedfile=nationhonorifics
	call :filefetch
		set honorif=!name!
	set "kingdomname=!honorif! !knname!"
)
goto:eof

:KNname
set "dieroll="
set /a dieroll=(%RANDOM% %% 6)+1
if "%dieroll%" leq "2" (
	call :roll1d6
	if "!roll!" leq "5" (
		set fetchedfile=capcons
		call :filefetch
		set capc=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set firstpart=!capc!!vow1!
	)
	if "!roll!"=="6" (
		set fetchedfile=capvowels
		call :filefetch
		set capv=!name!
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set firstpart=!capv!!con1!
	)
	call :roll1d20
	if "!roll!" leq "6" (
		set fetchedfile=cons
		call :filefetch
		set midpart=!name!
	)
	if "!roll!" gtr "6" if "!roll!" leq "12" (
		set fetchedfile=vowels
		call :filefetch
		set midpart=!name!
	)
	if "!roll!"=="13" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		call :filefetch
		set con2=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart=!con1!'!con2!!vow1!
	)
	if "!roll!"=="14" (
		set fetchedfile=capcons
		call :filefetch
		set capc=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart=-!capc!!vow1!
	)
	if "!roll!" gtr "14" if "!roll!" leq "17" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart=!vow1!!con1!
	)
	if "!roll!" gtr "17" if "!roll!" leq "20" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		call :filefetch
		set vow2=!name!
		set midpart=!vow1!!vow2!!con1!
	)
	call :roll1d20
	if "!roll!" leq "6" (
		set fetchedfile=cons
		call :filefetch
		set midpart2=!name!
	)
	if "!roll!" gtr "6" if "!roll!" leq "12" (
		set fetchedfile=vowels
		call :filefetch
		set midpart2=!name!
	)
	if "!roll!"=="13" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		call :filefetch
		set con2=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart2=!con1!'!con2!!vow1!
	)
	if "!roll!"=="14" (
		set fetchedfile=capcons
		call :filefetch
		set capc=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart2=-!capc!!vow1!
	)
	if "!roll!" gtr "14" if "!roll!" leq "17" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart2=!vow1!!con1!
	)
	if "!roll!" gtr "17" if "!roll!" leq "20" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		call :filefetch
		set vow2=!name!
		set midpart2=!vow1!!vow2!!con1!
	)
	call :roll1d10
	if "!roll!"=="1" set suffix=ada
	if "!roll!"=="2" set suffix=an
	if "!roll!"=="3" set suffix=ate
	if "!roll!"=="4" set suffix=ea
	if "!roll!"=="5" set suffix=ia
	if "!roll!"=="6" set suffix=ian
	if "!roll!"=="7" set suffix=ic
	if "!roll!"=="8" set suffix=na
	if "!roll!"=="9" set suffix=os
	if "!roll!"=="10" set suffix=ose
	set "knname=!firstpart!!midpart!!midpart2!!suffix!"

)
if "%dieroll%" gtr "2" if "%dieroll%" leq "5" (
	call :roll1d6
	if "!roll!" leq "5" (
		set fetchedfile=capcons
		call :filefetch
		set capc=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set firstpart=!capc!!vow1!
	)
	if "!roll!"=="6" (
		set fetchedfile=capvowels
		call :filefetch
		set capv=!name!
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set firstpart=!capv!!con1!
	)
	call :roll1d20
	if "!roll!" leq "6" (
		set fetchedfile=cons
		call :filefetch
		set midpart=!name!
	)
	if "!roll!" gtr "6" if "!roll!" leq "12" (
		set fetchedfile=vowels
		call :filefetch
		set midpart=!name!
	)
	if "!roll!"=="13" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		call :filefetch
		set con2=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart=!con1!'!con2!!vow1!
	)
	if "!roll!"=="14" (
		set fetchedfile=capcons
		call :filefetch
		set capc=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart=-!capc!!vow1!
	)
	if "!roll!" gtr "14" if "!roll!" leq "17" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set midpart=!vow1!!con1!
	)
	if "!roll!" gtr "17" if "!roll!" leq "20" (
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		call :filefetch
		set vow2=!name!
		set midpart=!vow1!!vow2!!con1!
	)
	call :roll1d10
	if "!roll!"=="1" set suffix=ada
	if "!roll!"=="2" set suffix=an
	if "!roll!"=="3" set suffix=ate
	if "!roll!"=="4" set suffix=ea
	if "!roll!"=="5" set suffix=ia
	if "!roll!"=="6" set suffix=ian
	if "!roll!"=="7" set suffix=ic
	if "!roll!"=="8" set suffix=na
	if "!roll!"=="9" set suffix=os
	if "!roll!"=="10" set suffix=ose
	set "knname=!firstpart!!midpart!!suffix!"
)
if "%dieroll%"=="6" (
	call :roll1d6
	if "!roll!" leq "5" (
		set fetchedfile=capcons
		call :filefetch
		set capc=!name!
		set fetchedfile=vowels
		call :filefetch
		set vow1=!name!
		set firstpart=!capc!!vow1!
	)
	if "!roll!"=="6" (
		set fetchedfile=capvowels
		call :filefetch
		set capv=!name!
		set fetchedfile=cons
		call :filefetch
		set con1=!name!
		set firstpart=!capv!!con1!
	)
	call :roll1d10
	if "!roll!"=="1" set suffix=ada
	if "!roll!"=="2" set suffix=an
	if "!roll!"=="3" set suffix=ate
	if "!roll!"=="4" set suffix=ea
	if "!roll!"=="5" set suffix=ia
	if "!roll!"=="6" set suffix=ian
	if "!roll!"=="7" set suffix=ic
	if "!roll!"=="8" set suffix=na
	if "!roll!"=="9" set suffix=os
	if "!roll!"=="10" set suffix=ose
	set "knname=!firstpart!!suffix!
)
goto:eof

:artandstuff
call :roll1d3
if "%roll%"=="1" goto VisualArtsTable
if "%roll%"=="2" goto LiteraryArts
if "%roll%"=="3" goto PreformingArts

:VisualArtsTable
set "start=During this Cycle, the %nationname% greatly favored the visual arts."

call :roll1d4
if "%roll%"=="1" (
	set fetchedfile=drawingtypes
	set artkeyword=drawing
	set guykeyword=artist
)
if "%roll%"=="2" (
	set fetchedfile=paintingtypes
	set artkeyword=painting
	set guykeyword=painter
)
if "%roll%"=="3" (
	set fetchedfile=printmakingtypes
	set "artkeyword=print making"
	set guykeyword=printer
)
if "%roll%"=="4" (
	set fetchedfile=sculpturetypes
	set "artkeyword=sculpting"
	set guykeyword=sculpter
)
call :filefetch
set "specificartform=%name%"

set fetchedfile=drawandpaintartstyles
call :filefetch
set "ohgodthislistishuge=%name%"
call :namegen

set "midart=They primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. Their art showed a particular emphasis on %ohgodthislistishuge%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typicaly the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."
set "theirbigart=%start% %midart%"

call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=poetrytypes
	set artkeyword=poetry
	set guykeyword=poet
)
if "%roll%"=="2" (
	set fetchedfile=literaturetypes
	set artkeyword=literature
	set guykeyword=author
)
if "%roll%"=="3" (
	set fetchedfile=fictiontypes
	set artkeyword=literary fiction
	set guykeyword=author
)
call :filefetch
set "specificartform=%name%"

call :namegen

set "midart1=In the Literary Arts, they primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typically the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=theatertypes
	set artkeyword=theater
	set guykeyword=thesbian
)
if "%roll%"=="2" (
	set fetchedfile=dancetypes
	set artkeyword=dance
	set guykeyword=dancer
)
if "%roll%"=="3" (
	call :musicatron9000
	set artkeyword=music
	set guykeyword=musicisian
)
if "%roll%" neq "3" call :filefetch
if "%roll%" neq "3" set "specificartform=%name%"
call :namegen

set "midart2=In the Preforming Arts, they primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typically the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

set "artfin=%theirbigart% \par \tab %midart1% \par \tab %midart2%"
goto:eof

:LiteraryArts
set "start=Durring this Cycle, the %nationname% greatly favored the literary arts."

call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=poetrytypes
	set artkeyword=poetry
	set guykeyword=poet
)
if "%roll%"=="2" (
	set fetchedfile=literaturetypes
	set artkeyword=literature
	set guykeyword=author
)
if "%roll%"=="3" (
	set fetchedfile=fictiontypes
	set artkeyword=literary fiction
	set guykeyword=author
)
call :filefetch
set "specificartform=%name%"

call :namegen

set "midart=They primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typically the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

set "theirbigart=%start% %midart%"

call :roll1d4
if "%roll%"=="1" (
	set fetchedfile=drawingtypes
	set artkeyword=drawing
	set guykeyword=artist
)
if "%roll%"=="2" (
	set fetchedfile=paintingtypes
	set artkeyword=painting
	set guykeyword=painter
)
if "%roll%"=="3" (
	set fetchedfile=printmakingtypes
	set "artkeyword=print making"
	set guykeyword=printer
)
if "%roll%"=="4" (
	set fetchedfile=sculpturetypes
	set "artkeyword=sculpting"
	set guykeyword=sculpter
)
call :filefetch
set "specificartform=%name%"

set fetchedfile=drawandpaintartstyles
call :filefetch
set "ohgodthislistishuge=%name%"
call :namegen

set "midart1=In the Visual Arts, they primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. Their art showed a particular emphasis on %ohgodthislistishuge%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typicaly the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=theatertypes
	set artkeyword=theater
	set guykeyword=thesbian
)
if "%roll%"=="2" (
	set fetchedfile=dancetypes
	set artkeyword=dance
	set guykeyword=dancer
)
if "%roll%"=="3" (
	call :musicatron9000
	set artkeyword=music
	set guykeyword=musicisian
)
if "%roll%" neq "3" call :filefetch
if "%roll%" neq "3" set "specificartform=%name%"
call :namegen

set "midart2=In the Preforming Arts, they primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typicaly the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

set "artfin=%theirbigart% \par \tab %midart1% \par \tab %midart2%"
goto:eof

:PreformingArts
set "start=During this Cycle, the %nationname% greatly favored preforming arts."

call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=theatertypes
	set artkeyword=theater
	set guykeyword=thesbian
)
if "%roll%"=="2" (
	set fetchedfile=dancetypes
	set artkeyword=dance
	set guykeyword=dancer
)
if "%roll%"=="3" (
	call :musicatron9000
	set artkeyword=music
	set guykeyword=musicisian
)
if "%roll%" neq "3" call :filefetch
if "%roll%" neq "3" set "specificartform=%name%"
call :namegen

set "midart=They primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typically the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

set "theirbigart=%start% %midart%"

call :roll1d4
if "%roll%"=="1" (
	set fetchedfile=drawingtypes
	set artkeyword=drawing
	set guykeyword=artist
)
if "%roll%"=="2" (
	set fetchedfile=paintingtypes
	set artkeyword=painting
	set guykeyword=painter
)
if "%roll%"=="3" (
	set fetchedfile=printmakingtypes
	set "artkeyword=print making"
	set guykeyword=printer
)
if "%roll%"=="4" (
	set fetchedfile=sculpturetypes
	set "artkeyword=sculpting"
	set guykeyword=sculpter
)
call :filefetch
set "specificartform=%name%"

set fetchedfile=drawandpaintartstyles
call :filefetch
set "ohgodthislistishuge=%name%"
call :namegen

set "midart1=In the Visual Arts, they primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. Their art showed a particular emphasis on %ohgodthislistishuge%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typicaly the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."

call :roll1d3
if "%roll%"=="1" (
	set fetchedfile=poetrytypes
	set artkeyword=poetry
	set guykeyword=poet
)
if "%roll%"=="2" (
	set fetchedfile=literaturetypes
	set artkeyword=literature
	set guykeyword=author
)
if "%roll%"=="3" (
	set fetchedfile=fictiontypes
	set artkeyword=literary fiction
	set guykeyword=author
)
call :filefetch
set "specificartform=%name%"

call :namegen

set "midart2=in the Literary Arts, they primarily focused on %artkeyword%, with their greatest works consisting of %specificartform%. The foremost artisan within this medium and time was the %guykeyword% %firstname% %lastname%, whose works are typicaly the first ones thought of and mentioned when discussing the %nationroot%'s artwork of the %cyclecount% Cycle."
set "artfin=%theirbigart% \par \tab %midart1% \par \tab %midart2%"
goto:eof


:musicatron9000
set fetchedfile=musictones
call :filefetch
set "tone=%name%"
set fetchedfile=musictimbre
call :filefetch
set "timbre=%name%"
set fetchedfile=dynamicmusicdynamics
call :filefetch
set "dynamics=%name%"
set fetchedfile=musicharmonies
call :filefetch
set "harmoney=%name%"
set fetchedfile=musicmelodies
call :filefetch
set "melody=%name%"
set fetchedfile=musicforms
call :filefetch
set "form=%name%"
set fetchedfile=musictextures
call :filefetch
set "texture=%name%"
set fetchedfile=musicrythems
call :filefetch
set "rythem=%name%"
set "specificartform=a %texture% style which is %tone% in tone, while favoring %dynamics% %timbre% sounds with movements generally %dynamicdynamics% making use of %melody% utilizing %harmoney% with a %rythem%, all arranged in %form%."
goto:eof

:: --- Neighbor Check ---

:neighborscheck
set "fetchedfile=%nationname% - Minor Neighbors"
call :datafetch
set "fetchedfile=kingdom
set "neighborname=%name%"
call :KNnamer
set "otherneighborname=%kingdomname%"
if "%neighborname%"=="%otherneighborname%" goto :neighborscheck
goto:eof

:minorfactiondevmath
set /a math=%econmod%+1
set econmod=%math%
goto:eof

:banditfactiontablemath
set /a math=%econmod%-2
set econmod=%math%
set /a math=%milmod%-2
set milmod=%math%
goto:eof

:hivefactiontablemath
set /a math=%econmod%-2
set econmod=%math%
set /a math=%milmod%-2
set milmod=%math%
goto:eof

:magefactiontablemath
set /a math=%econmod%-2
set econmod=%math%
set /a math=%milmod%-2
set milmod=%math%
set /a math=%arcanemod%-2
set arcanemod=%math%
goto:eof

:cultfactiontablemath
set /a math=%inframod%-1
set inframod=%math%
set /a math=%arcanemod%-1
set arcanemod=%math%
goto:eof

:monsterfactiontablemath
set /a math=%milmod%-1
set milmod=%math%
set /a math=%expamod%-1
set expamod=%math%
set /a math=%inframod%-1
set inframod=%math%
set /a math=%agrimod%-1
set agrimod=%math%
set /a math=%cultremod%-1
set cultremod=%math%
set /a math=%econmod%-1
set econmod=%math%
set /a math=%arcanemod%-1
set arcanemod=%math%
goto:eof

:neighborexpandsmath
set /a math=%econmod%+1
set econmod=%math%
set /a math=%cultremod%+1
set cultremod=%math%
goto:eof

:econsubtract
set /a math=%econmod%-%number%
set econmod=%math%
goto:eof

:econadd
set /a math=%econmod%+%number%
set econmod=%math%
goto:eof

:choose4colors
set fetchedfile=colors
call :filefetch
set "color1=%name%"
call :filefetch
set "color2=%name%"
call :filefetch
set "color3=%name%"
call :filefetch
set "color4=%name%"
if "%color1%"=="%color2%" goto choose4colors
if "%color1%"=="%color3%" goto choose4colors
if "%color1%"=="%color4%" goto choose4colors
if "%color2%"=="%color3%" goto choose4colors
if "%color2%"=="%color4%" goto choose4colors
if "%color3%"=="%color4%" goto choose4colors
goto:eof

:choose2flagparts
set "fetchedfile=flagparts"
call :filefetch
set "flagpart1=%name%"
call :filefetch
set "flagpart2=%name%"
if "%flagpart1%"=="%flagpart2%" goto choose2flagparts
goto:eof

:newagecheck
set "roll="
set /a roll=(%RANDOM% %% 100)+1
if "%roll%" leq "20" (
	set fetchedfile=agenames
	call :filefetch
	set "theage=!name!"
)
if "%roll%" gtr "85" (
	set fetchedfile=agenames
	call :filefetch
	set "theage=!name!"
)
if "%cyclecount%"=="4" (
	set fetchedfile=agenames
	call :filefetch
	set "theage=!name!"
)
goto:eof

:nationloader
set "nationname="
set "nationshort="
set "nationadj="
set "rulertitle="
set "reignmod="
set "nattypeflag="
set "nationpeoples="
set "democrasyflag="
set "nationclimate="
set "nationgovtitles="
cd /d "%worlddir%\nationconfigdata"
for /f "delims== tokens=1,2" %%G in (%nationroot%.txt) do set %%G=%%H
::(
::set /p nationname=
::set /p nationshort=
::set /p nationadj=
::set /p rulertitle=
::set /p reignmod=
::set /p nattypeflag=
::set /p nationpeoples=
::set /p democrasyflag=
::set /p nationclimate=
::set /p nationgovtitles=
::)<%nationroot%.txt

set /p cyclesexisted=<"%nationroot% - Cycles.txt"

set "nationpeoples=%nationroot% - Peoples"
cd /D "%~dp0data"

goto:eof

:languageloader

cd /D "%worlddir%\nationconfigdata"
set "fetchedfile=%nationroot% - Peoples"
if "%newkingdomfounding%"=="1" set "fetchedfile=%newnationroot% - Peoples"

set "name="
for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :LLCONT1
)
:LLCONT1
set "race1=%LINE%"

cd /D "%worlddir%\raceconfigdata"
set "fetchedfile=%race1% - Languages"

for /F %%C in ('^< ".\%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in (".\%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :LLCONT2
)
:LLCONT2
set "selectedlangauge=%LINE%"

cd /D "%worlddir%\langaugeconfigdata"
for /f "delims== tokens=1,2" %%G in (%selectedlangauge%.txt) do set %%G=%%H

cd /D "%~dp0data"
goto:eof

:advancenation
cd /d "%worlddir%\nationconfigdata"
set /a cyclesexisted=%cyclesexisted%+1
(echo %cyclesexisted%)>"%nationroot% - Cycles.txt"
cd /D "%~dp0data"
goto:eof

:nationforger
call :KNname
set "newnationroot=%knname%"
:deadnationamerbypass
if "%reformflag%"=="1" set "newnationroot=%nationroot%"
set fetchedfile=govtypes
call :filefetch
set "newgovtype=%name%"
if "%newgovtype%"=="Ochlocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=United !newnationroot!"
	if "!roll!"=="2" set "newnationname=Realm of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot! Coloishion"
	if "!roll!"=="4" set "newnationname=Republic of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=High Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Councel" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Guild" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=League of !newnationroot!"
	if "!roll!"=="2" set "newnationname=Guild of !newnationroot!ers"
	if "!roll!"=="3" set "newnationname=!newnationroot! Guild"
	if "!roll!"=="4" set "newnationname=!newnationroot! League"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Guildmaster" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Master" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Grandmaster" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Elder" & set "newreign=20" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Magocracy1" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Realm of !newnationroot!"
	if "!roll!"=="2" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot! Arcanium"
	if "!roll!"=="4" set "newnationname=Mage's Hold of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d5
	if "!roll!"=="1" set "newruler=Archmage" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Master Wizard" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Grand Wizard" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=God-King" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="5" set "newruler=God-Queen" & set "newreign=30" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Union" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=United !newnationroot!"
	if "!roll!"=="2" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot! Union"
	if "!roll!"=="4" set "newnationname=Federation of !newnationroot! States"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Great Leader" & set "newreign=10" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Leader" & set "newreign=10" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Fauther" & set "newreign=10" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Appointocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationroot! Peoples"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Speaker" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=High Councilor" & set "newreign=10" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Particracy" (
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="3" set "newnationname=Grand Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationadj! Realms"
		call :roll1d20
	if "!roll!" leq "10" set "newruler=Mister" & set "newreign=15" & set "newdemocrasyflag=0"
	if "!roll!" gtr "10" set "newruler=Miss" & set "newreign=15" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Liberal democracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=Federal Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United Kingdom of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Speaker" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Liquid democracy" (
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newnationname=!newnationadj! Common Realms"
	if "!roll!"=="2" set "newnationname=!newnationroot! Democrasy"
	if "!roll!"=="3" set "newnationname=People's Realm of !newnationroot!"
	if "!roll!"=="4" set "newnationname=Democratic !newnationadj! Peoples"
		call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Speaker" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Representative democracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=United States of !newnationroot!"
	if "!roll!"=="3" set "newnationname=Federated !newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Commonwealth"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Speaker" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Direct democracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=!newnationroot! Common Realms"
	if "!roll!"=="2" set "newnationname=!newnationroot! Nations"
	if "!roll!"=="3" set "newnationname=!newnationroot! Compact"
	if "!roll!"=="4" set "newnationname=Federal Realm of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Speaker" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Anocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=United !newnationroot!"
	if "!roll!"=="2" set "newnationname=Realm of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot! Coloishion"
	if "!roll!"=="4" set "newnationname=Republic of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=5" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=General" & set "newreign=5" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=5" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=General" & set "newreign=5" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Nepotocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Kingdoms of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Realms"
	if "!roll!"=="3" set "newnationname=Principalities of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Moot"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Prince" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=King" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=High King" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Princess" & set "newreign=25" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Theocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Divine's Realm of !newnationroot!"
	if "!roll!"=="2" set "newnationname=Holy !newnationroot! Realms"
	if "!roll!"=="3" set "newnationname=Clergical State of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Templestate"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=High Priest" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=High Cleric" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Fauther" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Elder" & set "newreign=20" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Plutocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=Federation of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Federation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Elder" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Netocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Circle of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Order"
	if "!roll!"=="3" set "newnationname=Federation of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Federation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Elder" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Meritocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Compact"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Kritarchy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Commonwealth of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Comonwelath"
	if "!roll!"=="3" set "newnationname=Adjudicate of !newnationroot!"
	if "!roll!"=="4" set "newnationname=Kingdom of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Judge" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Supreme Justice" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Minister" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=President" & set "newreign=15" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Geniocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Commonwealth of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Comonwelath"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=Kingdom of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Sage" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Elder" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Master" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=President" & set "newreign=15" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Electocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Commonwealth of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Nations"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Regient" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Overseer" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Band society" (
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Commonwealth of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationadj! Clans"
	if "!roll!"=="3" set "newnationname=!newnationroot! Realms"
	if "!roll!"=="4" set "newnationname=United !newnationadj! Nations"
		call :roll1d4
	if "!roll!"=="1" set "newruler=High King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Master" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Regient" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Chief" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Ergatocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=League of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republics"
	if "!roll!"=="3" set "newnationname=!newnationroot! Dictatorship"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Leader" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Master" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Guildmaster" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Overseer" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Commune" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Common Realm of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Commune"
	if "!roll!"=="3" set "newnationname=!newnationroot! Union"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Leader" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Father" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Master" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Overseer" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Social democracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=People's Realm of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=!newnationroot! Union"
	if "!roll!"=="4" set "newnationname=People's Republic of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Minister" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Father" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Elder" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Overseer" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Enclave" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=!newnationroot! Kingdoms"
	if "!roll!"=="4" set "newnationname=Republic of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Father" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Elder" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Master" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Bureaucracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=United Kingdom of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=!newnationroot! Realms"
	if "!roll!"=="4" set "newnationname=Republic of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Administrator" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Overseer" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Elder" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Chairman" & set "newreign=20" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Timocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=!newnationroot! Commonwealth"
	if "!roll!"=="4" set "newnationname=Republic of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=The Revered" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Justice" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Elder" & set "newreign=10" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Regent" & set "newreign=20" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Technocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=!newnationroot! Commonwealth"
	if "!roll!"=="4" set "newnationname=!newnationroot! Union"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Master" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=President" & set "newreign=5" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Regent" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Noocracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Commonwealth of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Comonwelath"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=Kingdom of !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Sage" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Elder" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Master" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Philosopher King" & set "newreign=25" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="City-state" (
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newnationname=City of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! City"
	if "!roll!"=="3" set "newnationname=City of !newnationroot!police"
	if "!roll!"=="4" set "newnationname=League of !newnationadj! Cities"
		call :roll1d4
	if "!roll!"=="1" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Elder" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Philosopher King" & set "newreign=25" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="National government" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Federal State of !newnationroot!"
	if "!roll!"=="2" set "newnationname=State of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot! Domain"
	if "!roll!"=="4" set "newnationname=!newnationroot! Realms"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Confederation" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Confederacy of !newnationroot!"
	if "!roll!"=="2" set "newnationname=League of !newnationroot!"
	if "!roll!"=="3" set "newnationname=!newnationroot! League"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Unitary state" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Federal State of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! League"
	if "!roll!"=="3" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Federation" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationroot! Federation"
	if "!roll!"=="2" set "newnationname=!newnationroot! Federated States"
	if "!roll!"=="3" set "newnationname=Federal States of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationadj! States"
		call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Warlord Hold" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationroot! Hold"
	if "!roll!"=="2" set "newnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Kingdom"
		call :roll1d4
	if "!roll!"=="1" set "newruler=General" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Warlord" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Junta" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationroot! Hold"
	if "!roll!"=="2" set "newnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "newnationname=Empire of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Empire"
		call :roll1d4
	if "!roll!"=="1" set "newruler=General" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Warlord" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Emperor" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Stratocracy" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationroot! Hold"
	if "!roll!"=="2" set "newnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Kingdom"
		call :roll1d4
	if "!roll!"=="1" set "newruler=General" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Warlord" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Kraterocracy" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationadj! Terratories"
	if "!roll!"=="2" set "newnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Kingdom"
		call :roll1d4
	if "!roll!"=="1" set "newruler=General" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Warlord" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Constitutional monarchy" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Kingdom"
	if "!roll!"=="3" set "newnationname=United Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Regency"
		call :roll1d4
	if "!roll!"=="1" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Queen" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Prince" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Princess" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Crowned republic" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=Royal !newnationroot! Republic"
	if "!roll!"=="2" set "newnationname=Crowned !newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Regency"
		call :roll1d4
	if "!roll!"=="1" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Queen" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Prince" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Princess" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Elective monarchy" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=Royal !newnationadj! Realms"
	if "!roll!"=="2" set "newnationname=Crown Republic of !newnationroot!"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Regency"
		call :roll1d4
	if "!roll!"=="1" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Queen" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Prince" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Princess" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Kingdom" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationadj! Kingdom"
	if "!roll!"=="2" set "newnationname=!newnationroot! Kingdom"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Regency"
		call :roll1d4
	if "!roll!"=="1" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Queen" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Prince" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Princess" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Empire" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationadj! Empire"
	if "!roll!"=="2" set "newnationname=!newnationroot! Empire"
	if "!roll!"=="3" set "newnationname=Empire of !newnationroot!"
	if "!roll!"=="4" set "newnationname=Imperial !newnationroot!"
		call :roll1d4
	if "!roll!"=="1" set "newruler=Emperor" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Empress" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=High King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=High Queen" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Magocracy2" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=Arcane !newnationadj! Kingdom"
	if "!roll!"=="2" set "newnationname=!newnationroot! Arcanium"
	if "!roll!"=="3" set "newnationname=Magedom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Arcana"
		call :roll1d4
	if "!roll!"=="1" set "newruler=God-King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=God-Queen" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Grand Wizard" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Elder Witch" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Civilian dictatorship" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationadj! Kingdom"
	if "!roll!"=="2" set "newnationname=!newnationroot! Commune"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationroot! Commonwealth"
		call :roll1d4
	if "!roll!"=="1" set "newruler=Dictator" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Tyrant" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=Overseer" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Military dictatorship" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationadj! Terratories"
	if "!roll!"=="2" set "newnationname=!newnationadj! Junta"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=!newnationadj! Holds"
		call :roll1d4
	if "!roll!"=="1" set "newruler=General" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Warlord" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Aristocracy" (
	call :roll1d4
	set "newnationadj=!newnationroot!ian"
	if "!roll!"=="1" set "newnationname=!newnationadj! Aristocrasy"
	if "!roll!"=="2" set "newnationname=!newnationadj! Realm"
	if "!roll!"=="3" set "newnationname=Kingdom of !newnationroot!"
	if "!roll!"=="4" set "newnationname=Aristocrasy of !newnationroot!"
		call :roll1d4
	if "!roll!"=="1" set "newruler=Duke" & set "newreign=30" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Earl" & set "newreign=25" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Lord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="4" set "newruler=King" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Totalitarian democracy" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Federal State of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! League"
	if "!roll!"=="3" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Democratic republic" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Federal State of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! League"
	if "!roll!"=="3" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Federal republic" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Federal State of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! League"
	if "!roll!"=="3" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=President" & set "newreign=8" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Senate Chairman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Parliamentary republic" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Federal State of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! League"
	if "!roll!"=="3" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=General" & set "newreign=15" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Warlord" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="3" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Presidential republic" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! League"
	if "!roll!"=="3" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="4" set "newnationname=!newnationroot! Confederation"
	set "newnationadj=!newnationroot!ian"
	set "newruler=President"
	set "newreign=8"
	set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="People's republic" (
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newnationname=People's Republic of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Republic"
	if "!roll!"=="3" set "newnationname=!newnationroot! Union"
	if "!roll!"=="4" set "newnationname=Union of !newnationadj! States"
		call :roll1d4
	if "!roll!"=="1" set "newruler=Minister" & set "newreign=20" & set "newdemocrasyflag=0"
	if "!roll!"=="2" set "newruler=Fauther" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Elder" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=Overseer" & set "newreign=20" & set "newdemocrasyflag=0"
	set newnattypeflag=0
)
if "%newgovtype%"=="Constitutional republic" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Compact"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Republic" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Compact"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Councilman" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Prime Minister" & set "newreign=10" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=President" & set "newreign=10" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
if "%newgovtype%"=="Magocracy3" (
	call :roll1d4
	if "!roll!"=="1" set "newnationname=Confederation of !newnationroot!"
	if "!roll!"=="2" set "newnationname=!newnationroot! Compact"
	if "!roll!"=="3" set "newnationname=Republic of !newnationroot!"
	if "!roll!"=="4" set "newnationname=United !newnationroot!"
	set "newnationadj=!newnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "newruler=Magi" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="2" set "newruler=Grand Wizard" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="3" set "newruler=Archmage" & set "newreign=20" & set "newdemocrasyflag=1"
	if "!roll!"=="4" set "newruler=High Warlock" & set "newreign=20" & set "newdemocrasyflag=1"
	set newnattypeflag=0
)
cd /D "%~dp0data"
set fetchedfile=nationalnobletitles
if "%newdemocrasyflag%"=="1" set fetchedfile=democratictitles
call :filefetch
set "newnationtitletype=%name%"
if "%reformflag%"=="1" goto reformgovsavefile

cd /d "%worlddir%"
echo %newnationroot%>>"newrootnations.txt"
set fetchedfile=worldraces
call :worlddirfetch
set "newnationrace=%name%"
cd /d "%worlddir%\nationconfigdata"
type nul > "%newnationroot% - Peoples.txt"
(echo %newnationrace%)>>"%newnationroot% - Peoples.txt"
set fetchedfile=religions
call :worlddirfetch
cd /d "%worlddir%\nationconfigdata"
set "newnationreligion=%name%"
type nul > "%newnationroot% - Religions.txt"
(echo %newnationreligion%)>>"%newnationroot% - Religions.txt"
call :roll1d4
cd /d "%worlddir%\nationconfigdata"
(
echo nationname=!newnationname!
echo nationshort=!newnationroot!
echo nationadj=!newnationadj!
echo rulertitle=!newruler!
echo reignmod=!newreign!
echo nattypeflag=!newnattypeflag!
echo democrasyflag=!newdemocrasyflag!
echo nationclimate=!roll!
echo nationgovtitles=!newnationtitletype!
)>"%newnationroot%.txt"
type NUL > "%newnationroot% - Cycles.txt"
(echo 0)>"%newnationroot% - Cycles.txt"
if not exist "%worlddir%\Nations\%newnationname%" mkdir "%worlddir%\Nations\%newnationname%"
if not exist "%worlddir%\Nations\%newnationname%\Settlments" mkdir "%worlddir%\Nations\%newnationname%\Settlments"
cd /D "%~dp0data"
goto:eof

:reformgovsavefile
cd /d "%worlddir%\nationconfigdata"
rename "%nationroot%.txt" "%nationroot% - Ended %cyclecount%.txt"
(
echo nationname=!newnationname!
echo nationshort=!newnationroot!
echo nationadj=!nationadj!
echo rulertitle=!newruler!
echo reignmod=!newreign!
echo nattypeflag=!nattypeflag!
echo democrasyflag=!newdemocrasyflag!
echo nationclimate=!nationclimate!
echo nationtitletype=!newnationtitletype!
)>"%nationroot%.txt"
type NUL > "%nationroot% - Cycles.txt"
(echo 0)>"%nationroot% - Cycles.txt"
if not exist "%worlddir%\Nations\%newnationname%" mkdir "%worlddir%\Nations\%newnationname%"
if not exist "%worlddir%\Nations\%newnationname%\Settlments" mkdir "%worlddir%\Nations\%newnationname%\Settlments"
cd /D "%~dp0data"
goto:eof




:deadnationnamer
call :KNname
set "deadnationroot=%knname%"
set fetchedfile=govtypes
call :filefetch
set "deadgovtype=%name%"
if "%deadgovtype%"=="Ochlocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=United !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Realm of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Coloishion"
	if "!roll!"=="4" set "deadnationname=Republic of !deadnationroot!"
)
if "%deadgovtype%"=="Guild" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=League of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Guild of !deadnationroot!ers"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Guild"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! League"
)
if "%deadgovtype%"=="Magocracy1" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Realm of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Arcanium"
	if "!roll!"=="4" set "deadnationname=Mage's Hold of !deadnationroot!"
)
if "%deadgovtype%"=="Union" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=United !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Union"
	if "!roll!"=="4" set "deadnationname=Federation of !deadnationroot! States"
)
if "%deadgovtype%"=="Appointocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot! Peoples"
)
if "%deadgovtype%"=="Particracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=Grand Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !newnationadj! Realms"
)
if "%deadgovtype%"=="Liberal democracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=Federal Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United Kingdom of !deadnationroot!"
)
if "%deadgovtype%"=="Liquid democracy" (
	set "newnationadj=!deadnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!newnationadj! Common Realms"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Democrasy"
	if "!roll!"=="3" set "deadnationname=People's Realm of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=Democratic !newnationadj! Peoples"
)
if "%deadgovtype%"=="Representative democracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=United States of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=Federated !deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Commonwealth"
)
if "%deadgovtype%"=="Direct democracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!deadnationroot! Common Realms"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Nations"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Compact"
	if "!roll!"=="4" set "deadnationname=Federal Realm of !deadnationroot!"
)
if "%deadgovtype%"=="Anocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=United !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Realm of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Coloishion"
	if "!roll!"=="4" set "deadnationname=Republic of !deadnationroot!"
)
if "%deadgovtype%"=="Nepotocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Kingdoms of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Realms"
	if "!roll!"=="3" set "deadnationname=Principalities of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Moot"
)
if "%deadgovtype%"=="Theocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Divine's Realm of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=Holy !deadnationroot! Realms"
	if "!roll!"=="3" set "deadnationname=Clergical State of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Templestate"
)
if "%deadgovtype%"=="Plutocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=Federation of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Federation"
)
if "%deadgovtype%"=="Netocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Circle of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Order"
	if "!roll!"=="3" set "deadnationname=Federation of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Federation"
	set "newnationadj=!deadnationroot!ian"
)
if "%deadgovtype%"=="Meritocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Compact"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
if "%deadgovtype%"=="Kritarchy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Commonwealth of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Comonwelath"
	if "!roll!"=="3" set "deadnationname=Judicates of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=Kingdom of !deadnationroot!"
)
if "%deadgovtype%"=="Geniocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Commonwealth of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Comonwelath"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=Kingdom of !deadnationroot!"
)
if "%deadgovtype%"=="Electocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Commonwealth of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Nations"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
if "%deadgovtype%"=="Band society" (
	set "newnationadj=!deadnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Commonwealth of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Clans"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Realms"
	if "!roll!"=="4" set "deadnationname=United !newnationadj! Nations"
)
if "%deadgovtype%"=="Ergatocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=League of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republics"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Dictatorship"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
if "%deadgovtype%"=="Commune" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Common Realm of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Commune"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Union"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
if "%deadgovtype%"=="Social democracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=People's Realm of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Union"
	if "!roll!"=="4" set "deadnationname=People's Republic of !deadnationroot!"
)
if "%deadgovtype%"=="Enclave" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Kingdoms"
	if "!roll!"=="4" set "deadnationname=Republic of !deadnationroot!"
)
if "%deadgovtype%"=="Bureaucracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=United Kingdom of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Realms"
	if "!roll!"=="4" set "deadnationname=Republic of !deadnationroot!"
)
if "%deadgovtype%"=="Timocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Commonwealth"
	if "!roll!"=="4" set "deadnationname=Republic of !deadnationroot!"
)
if "%deadgovtype%"=="Technocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Commonwealth"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Union"
)
if "%deadgovtype%"=="Noocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Commonwealth of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Comonwelath"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=Kingdom of !deadnationroot!"
)
if "%deadgovtype%"=="City-state" (
	set "newnationadj=!deadnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=City of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! City"
	if "!roll!"=="3" set "deadnationname=City of !deadnationroot!police"
	if "!roll!"=="4" set "deadnationname=League of !newnationadj! Cities"
)
if "%deadgovtype%"=="National government" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Federal State of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=State of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Domain"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Realms"
)
if "%deadgovtype%"=="Confederation" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Confederacy of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=League of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
)
if "%deadgovtype%"=="Unitary state" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Federal State of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
)
if "%deadgovtype%"=="Federation" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!deadnationroot! Federation"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Federated States"
	if "!roll!"=="3" set "deadnationname=Federal States of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !newnationadj! States"
)
if "%deadgovtype%"=="Warlord Hold" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!deadnationroot! Hold"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Kingdom"
)
if "%deadgovtype%"=="Junta" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!deadnationroot! Hold"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "deadnationname=Empire of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Empire"
)
if "%deadgovtype%"=="Stratocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!deadnationroot! Hold"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Kingdom"
)
if "%deadgovtype%"=="Kraterocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!newnationadj! Terratories"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Lands"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Kingdom"
)
if "%deadgovtype%"=="Constitutional monarchy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Kingdom"
	if "!roll!"=="3" set "deadnationname=United Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Regency"
)
if "%deadgovtype%"=="Crowned republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Royal !deadnationroot! Republic"
	if "!roll!"=="2" set "deadnationname=Crowned !deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Regency"
)
if "%deadgovtype%"=="Elective monarchy" (
	set "newnationadj=!deadnationroot!ian"
	if "!roll!"=="1" set "deadnationname=Royal !newnationadj! Realms"
	if "!roll!"=="2" set "deadnationname=Crown Republic of !deadnationroot!"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Regency"
)
if "%deadgovtype%"=="Kingdom" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!newnationadj! Kingdom"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Kingdom"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Regency"
)
if "%deadgovtype%"=="Empire" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!newnationadj! Empire"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Empire"
	if "!roll!"=="3" set "deadnationname=Empire of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=Imperial !deadnationroot!"
)
if "%deadgovtype%"=="Magocracy2" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Arcane !newnationadj! Kingdom"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Arcanium"
	if "!roll!"=="3" set "deadnationname=Magedom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Arcana"
)
if "%deadgovtype%"=="Civilian dictatorship" (
	call :roll1d4
	set "newnationadj=!deadnationroot!ian"
	if "!roll!"=="1" set "deadnationname=!newnationadj! Kingdom"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Commune"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Commonwealth"
)
if "%deadgovtype%"=="Military dictatorship" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!newnationadj! Terratories"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Junta"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=!newnationadj! Holds"
)
if "%deadgovtype%"=="Aristocracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=!newnationadj! Aristocrasy"
	if "!roll!"=="2" set "deadnationname=!newnationadj! Realm"
	if "!roll!"=="3" set "deadnationname=Kingdom of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=Aristocrasy of !deadnationroot!"
)
if "%deadgovtype%"=="Totalitarian democracy" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Federal State of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
)
if "%deadgovtype%"=="Democratic republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Federal State of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
	set "newnationadj=!deadnationroot!ian"
)
if "%deadgovtype%"=="Federal republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Federal State of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
)
if "%deadgovtype%"=="Parliamentary republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Federal State of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
)
if "%deadgovtype%"=="Presidential republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! League"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="4" set "deadnationname=!deadnationroot! Confederation"
)
if "%deadgovtype%"=="People's republic" (
	set "newnationadj=!deadnationroot!ian"
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=People's Republic of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Republic"
	if "!roll!"=="3" set "deadnationname=!deadnationroot! Union"
	if "!roll!"=="4" set "deadnationname=Union of !newnationadj! States"
)
if "%deadgovtype%"=="Constitutional republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Compact"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
if "%deadgovtype%"=="Republic" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Compact"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
if "%deadgovtype%"=="Magocracy3" (
	call :roll1d4
	if "!roll!"=="1" set "deadnationname=Confederation of !deadnationroot!"
	if "!roll!"=="2" set "deadnationname=!deadnationroot! Compact"
	if "!roll!"=="3" set "deadnationname=Republic of !deadnationroot!"
	if "!roll!"=="4" set "deadnationname=United !deadnationroot!"
)
goto:eof

:religionloader
cd /D "%worlddir%\nationconfigdata"
set "outputroot=%nationroot%"
if "%newkingdomfounding%"=="1" set "outputroot=%newnationroot%"



set "fetchedfile=%outputroot% - Religions"

set "name="
set "LINE="
for /F %%C in ('^< "%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in ("%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :RLCONT1
)
:RLCONT1
set "religion=%LINE%"
set "fetchedfile="

cd /D "%worlddir%\religionconfigdata"
set /p religiondisc=<"%religion%.txt"

set "cmd=findstr /R /N "^^" "%religion% - Gods.txt" | find /C ":""
for /f %%k in ('!cmd!') do set totalgods=%%k
set godnum=0
if "%totalgods%"=="1" (
	(set /p godname=)<"!religion! - Gods.txt"
	set "godgrammer=!religion%'s follower's worship their god, !godname!."
	set "nationalreligion=!religion!, !religiondisc!. !godgrammer!.
	goto MonotheisumYo
)
if "%totalgods%" gtr "1" set "godgrammer=%religion%'s follower's worship their gods,"
set counter=0
for /F "tokens=* delims=" %%k in ('Type "%religion% - Gods.txt"') do (
	set /a counter+=1
	set "rloutput[!counter!]=%%k"
)
For /L %%l in (1,1,%Counter%) Do (
	set godtolist=!rloutput[%%l]!
	call :thegodlister
)
set "randomgod=%religion% - Gods"
set "nationalreligion=%religion%, %religiondisc%. %godgrammer% %godsinreligion%."
cd /D "%~dp0data"
:MonotheisumYo
goto:eof


:thegodlister
set /a godnum=%godnum%+1
if "%godnum%"=="1" set "godsinreligion=%godtolist%"
if "%godnum%" gtr "1" if "%godnum%" neq "%totalgods%" set "godsinreligion=%godsinreligion%, %godtolist%"
if "%godnum%"=="%totalgods%" set "godsinreligion=%godsinreligion%, and %godtolist%"
goto:eof


:nationpeoplelister
cd /D "%worlddir%\nationconfigdata"
set "patchjob=%nationroot% - Peoples"
set "cmd=findstr /R /N "^^" "%worlddir%\nationconfigdata\%patchjob%.txt" | find /C ":""
for /f %%k in ('!cmd!') do set totalpeeps=%%k
set peepnum=0
if "%totalpeeps%"=="1" (
	(set /p peepname=)<"%worlddir%\nationconfigdata\%patchjob%.txt"
	set "nationdisk=almost entirly popualted by %peepname%s."
	goto JustOneDudeBro
)

if "%totalpeeps%" gtr "1" set "peepgrammer=the %nationshort% is inhabited by multiple races. The largest demographics being,"
set counter=0

for /F "tokens=* delims=" %%k in ('Type "%patchjob%.txt"') do (
	set /a counter+=1
	set "rloutput[!counter!]=%%k"
)
For /L %%l in (1,1,%Counter%) Do (
	set peeptolist=!rloutput[%%l]!
	call :thedudelister
)
set "nationdisk=%peepgrammer% %peepsinreligion%."
cd /D "%~dp0data"
:JustOneDudeBro
goto:eof


:thedudelister
set /a peepnum=%peepnum%+1
if "%peepnum%"=="1" set "peepsinreligion=%peeptolist%"
if "%peepnum%" gtr "1" if "%peepnum%" neq "%totalpeeps%" set "peepsinreligion=%peepsinreligion%, %peeptolist%"
if "%peepnum%"=="%totalpeeps%" set "peepsinreligion=%peepsinreligion%, and %peeptolist%"
goto:eof








:nationracenumcounter
cd /D "%worlddir%\nationconfigdata"
set "outputname=%nationroot%"
if "%newkingdomfounding%"=="1" set "outputname=%newnationroot%"
set "cmd=findstr /R /N "^^" "%worlddir%\nationconfigdata\%outputname% - Peoples.txt" | find /C ":""
for /f %%k in ('!cmd!') do set numraces=%%k
set "numberofraces=%numraces%"
cd /D "%~dp0data"
goto:eof

:racepicker
cd /d "%worlddir%"
set fetchedfile=worldraces
call :filefetch
set "race=%name%"
cd /D "%~dp0data"
goto:eof

:: --- Creates an origin story for a nation on first generation ---

:orginstory

if "%newkingdomfounding%"=="1" (
	set "outputlocation=%worlddir%\Nations\%newnationname%"
	set "outputname=%newnationname%"
	set "outputadj=%newnationadj%"
) else (
	set "outputlocation=%worlddir%\Nations\%nationname%"
	set "outputname=%nationname%"
	set "outputadj=%nationadj%"
)


set /a die1=(%random% %% 3)+1
set /a die2=(%random% %% 3)+1
set /a die3=(%random% %% 3)+1
set /a roll=%die1%+%die2%+%die3%
if "%roll%"=="3" set "foundingtime=in ancient times forgotten to all"
if "%roll%"=="4" set "foundingtime=in ages written of by those long dead"
if "%roll%"=="5" set "foundingtime=long ago, in times most have heard of"
if "%roll%"=="6" set "foundingtime=several centuries ago"
if "%roll%"=="7" set "foundingtime=last century"
if "%roll%"=="8" set "foundingtime=a few decades ago"
if "%roll%"=="9" set "foundingtime=recently"
call :religionloader
call :godfetcher



set dieroll=(%random% %% 6)+1

if "%dieroll%"=="1" goto Orgintype1
if "%dieroll%"=="2" goto Orgintype2
if "%dieroll%"=="3" goto Orgintype3
if "%dieroll%"=="4" goto Orgintype4
if "%dieroll%"=="5" goto Orgintype5
if "%dieroll%"=="6" goto Orgintype6

:Orgintype1
call :namegen
call :roll1d3
if "%roll%"=="1" set "pristate=in many scattered tribes"
if "%roll%"=="2" set "pristate=in several smaller realms"
if "%roll%"=="3" set "pristate=in two warring states"

call :roll1d6
if "%roll%"=="1" set "foundingway=achieved this union with their cunning battle strategies and mastery of logistics"
if "%roll%"=="2" set "foundingway=brought this unity to their people by their personal skill at arms alone, needing the help of no others to forge their nation"
if "%roll%"=="3" set "foundingway=unified the %outputadj% peoples through their honeyed words, cunning, and guile. It is also said their greatest feat of manipulation was the %outputname% survived their death"
if "%roll%"=="4" set "foundingway=forged their nation through diplomatic means. %firstname% was as charming, kind, and wise as any could be, and when they nogotiated a peace between foes, those foes only agreed to the peace if %firstname% were to rule over their united realm"
if "%roll%"=="5" set "foundingway=freed their people from the tyrannical rule of a long forgotten king. They brought the common folk together, and by cunning, timing, and strategy, toppled the old empire and brought freedom"
if "%roll%"=="6" set "foundingway=was not a good person, and they took their realm by force for purely selfish reasons. Yet, their rule brought greater prosparity and unity, even if it was tyrannical at times. When they died, the %nationname% remained"

set "nationorgin=The %outputname% came to be %foundingtime%, when the legendary %firstname% %lastname% unified the %outputadj% peoples, who then lived %pristate%. It is said that %firstname% %foundingway%."
echo %nationorgin% >> "%outputlocation%\%outputname% - Orginstory.txt"
echo %firstname% %lastname%, founder >> "%outputlocation%\%outputname% - Historical Figures.txt"
goto:eof

:Orgintype2
set fetchedfile=adventuringgroups
call :filefetch
set "group=%name%"

call :roll1d3
if "%roll%"=="1" set "pristate=in many scattered tribes"
if "%roll%"=="2" set "pristate=in several smaller realms"
if "%roll%"=="3" set "pristate=in two warring states"


call :roll1d6a
if "%roll2%"=="1" set "foundingway=achieved this union through the slaying of a great beast. Nearly everyone tells the tale diffrently, and as such, exactly what this great beast was is a matter of much debate. In any case, the beast's death lowered tnetions such that unity was possible"
if "%roll2%"=="2" set "foundingway=brought this unity to their people through a series of campaigns against an organized force of monsterious creatures"
if "%roll2%"=="3" set "foundingway=unified the %outputadj% peoples through their honeyed words, cunning, and guile. It is also said their greatest feat of manipulation was the %outputname% survived their deaths"
if "%roll2%"=="4" set "foundingway=forged their nation through diplomatic means. The %group% put great pains into pacifying the region without further bloodshed, and when they negotiated a peace between foes, those foes only agreed to the peace if they were to rule over their united realm. This offer was accepted, as the %group% had been seeking to settle down for some time"
if "%roll2%"=="5" set "foundingway=freed their people from the tyrannical rule of a long forgotten king. They brought the common folk together, and by cunning, timing, and strategy, toppled the old empire and brought freedom to the land"
if "%roll2%"=="6" set "foundingway=were not good people, and they took their realm by force for purely selfish reasons. Yet, their rule brought greater prosperity and unity, even if it was tyrannical at times. When the last of their band died, the %outputname% remained"

set "nationorgin=The %outputname% came to be %foundingtime%, when the legendary %group% unified the %outputadj% peoples, who then lived %pristate%. It is said that the %group% %foundingway%."
echo %nationorgin% >> "%outputlocation%\%outputname% - Orginstory.txt"
echo %group%, Adventuring group. Founders of the nation >> "%outputlocation%\%outputname% - Historical Figures.txt"

goto:eof

:Orgintype3
call :roll1d3
if "%roll%"=="1" set "pristate=in many scattered tribes"
if "%roll%"=="2" set "pristate=in several smaller realms"
if "%roll%"=="3" set "pristate=in two warring states"

call :roll1d6a
if "%roll2%"=="1" set "foundingway=achieved this union through preforming a miracle. Nearly everyone tells the tale diffrently, and as such, exactly what this miracle was is a matter of much debate"
if "%roll2%"=="2" set "foundingway=brought this unity to their people through a series of crusades against an organized force of monsterious creatures"
if "%roll2%"=="3" set "foundingway=unified the %outputadj% peoples by spreading %religion%'s influence through their honeyed words, cunning, and guile. It is also said their greatest feat of manipulation was the %outputname% survived their deaths"
if "%roll2%"=="4" set "foundingway=forged their nation through diplomatic means. The priests put great pains into pacifying the region without undue bloodshed, and when they negotiated a peace between ancient foes, those foes only agreed to the peace if the clergy were to have a prominent roll within the united realm as advisors and peacekeepers. This offer was accepted, leading to the extreem importance of %religion% to the %nationadj% people"
if "%roll2%"=="5" set "foundingway=freed their people from the tyrannical rule of a long forgotten empire. They brought the common folk theatergoer, and by cunning, timing, and strategy, toppled the old empire and brought freedom to the land. This led to the extreme importance of %religion% to the %outputadj% people"
if "%roll2%"=="6" set "foundingway=were not good people, and they took their realm by force for purely selfish reasons. Yet, their rule brought greater prosperity and unity, even if it was tyrannical at times. When the last of their band died, the %outputname% remained"

set "nationorgin=The %outputname% came to be %foundingtime%, when priests dedicated to the faith %religion% unified the %outputadj% peoples, who then lived %pristate%. They professed their actions were according to %thisgod%'s will, and it is said that the priests %foundingway%."
echo %nationorgin% >> "%outputlocation%\%outputname% - Orginstory.txt"
echo A temple of %religion%, founders of the nation >> "%outputlocation%\%outputname% - Historical Figures.txt"

goto:eof

:Orgintype4
call :namegen
set "dudebro1=%firstname% %lastname%"
call :namegen
set "dudebro2=%firstname% %lastname%"
set fetchedfile=nobletitles3
call :filefetch
set "dudebro1=%name% %dudebro1%"
call :filefetch
set "dudebro2=%name% %dudebro2%"
call :deadnationnamer
set "deadgovtype1=%deadgovtype%"
set "deadnationname1=%deadnationname%"
call :deadnationnamer
set "deadgovtype2=%deadgovtype%"
set "deadnationname2=%deadnationname%"
	
call :roll1d3
if "%roll%"=="1" set "pristate=two long warring states"
if "%roll%"=="2" set "pristate=two peaceful neighbors"
if "%roll%"=="3" set "pristate=two nations with a complex history of friendship and hatred"
	
call :roll1d6a
if "%roll2%"=="1" set "foundingway=achieved this union through the slaying of a great beast. Nearly everyone tells the tale differently, and as such, exactly what this great beast was is a matter of much debate. In any case, the beast's death lowered tensions such that unity was possible"
if "%roll2%"=="2" set "foundingway=brought this unity to their people through a series of campaigns against an organized force of monstrous creatures. With these creatures either slain or driven out of %outputadj% lands, the tensions between the peoples were low enough to foster good relations, leading to unification"
if "%roll2%"=="3" set "foundingway=unified the %outputadj% peoples through their honeyed words, cunning, and guile. It is also said their greatest feat of manipulation was the %outputname% survived their deaths"
if "%roll2%"=="4" set "foundingway=forged their nation through diplomatic means. %dudebro1% and %dudebro2% put great pains into passifying the region without further bloodshed, and when they negotiated a peace between foes, those foes only agreed to the peace if they were to rule over their united realm. This offer was accepted, as the %group% had been seeking to settle down for some time"
if "%roll2%"=="5" set "foundingway=freed their peoples from the tyrannical rule of a long forgotten king. They brought the common folk together, and by cunning, timing, and strategy, toppled the old empire and brought freedom to the land"
if "%roll2%"=="6" set "foundingway=were not good people, and they took their realm by force for purely selfish reasons. Yet, their rule brought greater prosperity and unity, even if it was tyrannical at times. When the last of their band died, the %outputname% remained"

set "nationorgin=The %outputname% came to be %foundingtime%, from the union of %pristate%. The union was achieved by %dudebro1% of %deadnationname1% ^(a %deadgovtype1%^), and %dudebro12% of %deadnationname2% ^(a %deadgovtype2%^). It is said that they %foundingway%."
echo %nationorgin% >> "%outputlocation%\%outputname% - Orginstory.txt"
echo %dudebro1% and %dudebro2%, founders of the nation >> "%outputlocation%\%outputname% - Historical Figures.txt"

goto:eof

:Orgintype5
call :roll1d3
if "%roll%"=="1" set "pristate=a large group of long warring tribes"
if "%roll%"=="2" set "pristate=a number of ancient clans who lived in peace with one another"
if "%roll%"=="3" set "pristate=many desperate peoples embroiled in a complex web of alliances and revelries"
	
call :roll1d5a
if "%roll2%"=="1" set "thethreat=when a great famine forced them to work as one to survive"
if "%roll2%"=="2" set "thethreat=until a natural disaster ^(the exact kind varies with each telling^) rocked the %nationadj% region, devistating the peoples and forcing them to work together to survive"
if "%roll2%"=="3" set (
	call :MonsterAwakens
	set "thethreat=when the legendary %type%, %name%, emerged within the %outputadj% region, and deviated the peoples living there. While %name% was not slain, it was driven away to a dark corner of the region after the survivors organized themselves into a cohesive group"
)
if "%roll2%"=="4" set "thethreat=until a devastating plague shook their world, killing the majority of all who lived within the %outputadj% lands. The survivors united simply to have enough people to continue working the fields"
if "%roll2%"=="5" set "thethreat=when missionaries of %religion% came to their lands and began to spread the word of %thisgod%, to help bring peace to the troubled land. Their message took root, and the peoples came to revere %religion%, and its practice did help make the land safer"

call :namegen
set "dudebro=%firstname% %lastname%"
	
call :roll1d3b
if "%roll3%"=="1" set "whathappenednext=This was enough to bring lasting unity to the peoples, who now knew how much they had to gain from a more permanent unification"
if "%roll3%"=="2" set "whathappenednext=When the disaster passed the various peoples began to drift apart once more, only for a series of small natural disasters to push them together for good in the years to come"
if "%roll3%"=="3" (
	set "whathappenednext=Once the threat was gone, however, they split back into their various factions. It wasn't until the legendary figure %dudebro% emerged and drew upon their shared experiences to gather them all against a new threat ^(which varies with every version of the story such that no one knows what truly happened^), that the peoples at last became one"
	echo %group%, mythical figure. Founder of the nation >> "%outputlocation%\%outputname% - Historical Figures.txt"
)

set "nationorgin=The %outputname% came to be %foundingtime%, when %pristate% %thethreat%. %whathappenednext%."
echo %nationorgin% >> "%outputlocation%\%outputname% - Orginstory.txt"
goto:eof



:Orgintype6
call :roll1d3
if "%roll%"=="1" set "pristate=a large group of long warring tribes"
if "%roll%"=="2" set "pristate=a number of ancient clans who lived in peace with one another"
if "%roll%"=="3" set "pristate=many disparate peoples embroiled in a complex web of alliances and rivalries"
	
call :roll1d6a
if "%roll2%"=="1" set "foundingway=preforming a miracle. Nearly everyone tells the tale differently, and as such, exactly what this miracle was is a matter of much debate. Regardless of the specifics, the priests claimed that such feats were only possible through the union of the two sects, which became widely believed"
if "%roll2%"=="2" set "foundingway=a series of crusades against an organized force of monstrous creatures. They touted their success as being the direct result of %thisgod%'s pleasure at the union of their temples, and the common folk of the realm believed them, given how unlikly the Crusade's success had been."
if "%roll2%"=="3" set "foundingway=spreading %thisgod%'s influence through their honeyed words, cunning, and guile. It is also said their greatest feat of manipulation was the %outputname% survived their deaths"
if "%roll2%"=="4" set "foundingway=diplomatic means. The priests put great pains into passifying the region without undue bloodshed, and when they negotiated a peace between ancient foes, those foes only agreed to the peace if the clergy were to have a prominent roll within the united realm as advisors and peacekeepers. This offer was accepted, leading to the extreme importance of %religion% to the %outputadj% people"
if "%roll2%"=="5" set "foundingway=freeing their people from the tyrannical rule of a long forgotten empire. They brought the common folk togeather, and by cunning, timing, and strategy, toppled the old empire and brought freedom to the land. This led to the extreme importance of %religion% to the %outputadj% people"
if "%roll2%"=="6" set "foundingway=force for purly selfish reasons. Yet, their rule brought greater prosparity and unity, even if it was tyranical at times. When the last of their band died, the %outputname% remained"

	
set "nationorgin=The %outputname% came to be %foundingtime%, priests of %religion% unified the %outputadj% peoples, who then lived %pristate%. This was austencably a unification of two Sects dedicated to %thisgod%, who worked out their mutual differences and sought to unify themselves, but knew this would require uniting their followers as well as the clergy. It is said that the priests united their flocks by %foundingway%."
echo %nationorgin% >> "%outputlocation%\%outputname% - Orginstory.txt"
echo A temple of %religion%, founders of the nation >> "%outputlocation%\%outputname% - Historical Figures.txt"

goto:eof


:godfetcher
cd /d "%worlddir%\religionconfigdata"
set "fetchedfile=%randomgod%"

set "name="
set "LINE="
for /F %%C in ('^< "%fetchedfile%.txt" find /C /V ""') do set /A "COUNT=%%C"
if %COUNT% LEQ 0 (set /A "NUMBER=0") else (set /A "NUMBER=%RANDOM%%%%COUNT%")
if %NUMBER% LEQ 0 (set "SKIP=") else (set "SKIP=skip=%NUMBER%")
for /F "usebackq %SKIP% delims=" %%L in ("%fetchedfile%.txt") do (
    set "LINE=%%L"
    goto :GFCONT
)
:GFCONT
set "name=%LINE%"
set "thisgod=%name%"
cd /d "!storage!data"
goto:eof

:: ---- Builds regions for the nation the first time it's ever used. ---

:regionbuilder
if not exist "%worlddir%\Regions" mkdir "%worlddir%\Regions"
if "%nationclimate%" neq "1" if "%nationclimate%" neq "2" if "%nationclimate%" neq "3" if "%nationclimate%" neq "4" set /a nationclimate=(%random% %% 4)+1

set "outputlocation=%worlddir%\Nations\%nationname%"
set "outputname=%nationname%"

if "%newkingdomfounding%"=="1" (
	set "outputlocation=%worlddir%\Nations\%newnationname%"
	set "outputname=%newnationname%"
	set numregionstomake=3
)


set regionscount=0
:regionbuilderloop
if "%nationclimate%"=="1" (
	set "generaldiscriuptor=temperate"
	call :roll1d4
	if "!roll!"=="1" (
		set fetchedfile=grasslandnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=grasslandtypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=grassland"
	)
	if "!roll!"=="2" (
		set fetchedfile=forestnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=foresttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=forest"
	)
	if "!roll!"=="3" (
		set fetchedfile=forestnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=foresttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=woodland"
	)
	if "!roll!"=="4" (
		set fetchedfile=grasslandnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=shrublandtypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=shrubland"
	)
	set regionnametype1=forestnames
	set regionbiometype1=foresttypes
	set regionnametype2=forestnames
	set regionbiometype2=foresttypes
	set regionnametype3=grasslandnames
	set regionbiometype3=shrublandtypes
	set fetchedfile=grasslandterrain
)
if "%nationclimate%"=="2" (
	set "generaldiscriuptor=arid"
	call :roll1d4
	if "!roll!"=="1" (
		set fetchedfile=desertnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=drydeserttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=dry desert"
	)
	if "!roll!"=="2" (
		set fetchedfile=desertnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=semideserttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=semi-arid desert"
	)
	if "!roll!"=="3" (
		set fetchedfile=desertnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=drydeserttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=coastal desert"
	)	
	if "!roll!"=="4" (
		set fetchedfile=grasslandnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=shrublandtypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=shrubland"
	)
	set regionnametype1=desertnames
	set regionbiometype1=semideserttypes
	set regionnametype2=desertnames
	set regionbiometype2=drydeserttypes
	set regionnametype3=grasslandnames
	set regionbiometype3=shrublandtypes
	set fetchedfile=desertterrain
)
if "%nationclimate%"=="3" (
	set "generaldiscriuptor=tropical"
	call :roll1d3
		if "!roll!"=="1" (
		set fetchedfile=grasslandnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=grasslandtypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=tropical grassland"
	)
	if "!roll!"=="2" (
		set fetchedfile=forestnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=rainforesttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=rainforest"
	)
	if "!roll!"=="3" (
		set fetchedfile=forestnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=foresttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=tropical forest"
	)
	set regionnametype1=grasslandnames
	set regionbiometype1=grasslandtypes
	set regionnametype2=forestnames
	set regionbiometype2=rainforesttypes
	set regionnametype3=forestnames
	set regionbiometype3=foresttypes
	set fetchedfile=tropicalterrain
)
if "%nationclimate%"=="4" (
	set "generaldiscriuptor=tundra"
	call :roll1d3
	if "!roll!"=="1" (
		set fetchedfile=grasslandnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=shrublandtypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=tundra"
	)
	if "!roll!"=="2" (
		set fetchedfile=forestnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=foresttypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=tiga"
	)
	if "!roll!"=="3" (
		set fetchedfile=grasslandnames
		call :filefetch
		set "regionname=!name!"
		set fetchedfile=shrublandtypes
		call :filefetch
		set "regionname=!regionname! !name!"
		set "broaddesc=alpine tundra"
	)
	set regionnametype1=grasslandnames
	set regionbiometype1=shrublandtypes
	set regionnametype2=forestnames
	set regionbiometype2=foresttypes
	set regionnametype3=grasslandnames
	set regionbiometype3=shrublandtypes
	set fetchedfile=tundraterrain
)

call :filefetch
set "terrain=%name%"

call :regionborders


call :roll1d11
if "%roll%"=="1" set "regionsize=tiny"
if "%roll%"=="2" set "regionsize=very small"
if "%roll%"=="3" set "regionsize=small"
if "%roll%"=="4" set "regionsize=smallish"
if "%roll%"=="5" set "regionsize=smaller than average"
if "%roll%"=="6" set "regionsize=decently sized"
if "%roll%"=="7" set "regionsize=larger than average"
if "%roll%"=="8" set "regionsize=quite large"
if "%roll%"=="9" set "regionsize=vast"
if "%roll%"=="10" set "regionsize=expansive"
if "%roll%"=="11" set "regionsize=seemingly endless"

set fetchedfile=pregenedcitylocations
call :filefetch
set "citylocations=%name%"
set fetchedfile=pregenedborders
call :filefetch
set "bordered=%name%"
set fetchedfile=regionpeoplethings
call :filefetch
set "thingslist=%name%"
call :filefetch
set "thingslist=%thingslist%, %name%"
call :filefetch
set "thingslist=%thingslist%, and %name%"
set "regionspeople=The people of the %regionname% are, %thingslist%."
set fetchedfile=neighborspregenerated
call :filefetch
set "regionspeople=%regionspeople% %name%"

set fetchedfile=floraandfauna
call :filefetch
set "florafauna=%name%"

call :regionterraindatasheet


set "regiondescription=The %regionname% is a %regionsize% %broaddesc%. This %terrain% region is home too %florafauna%. %regionname% is %regionsbordors% %citylocations% %regionspeople%"
(
echo !regiondescription!
echo !riverflag!
echo !hillflag!
echo !mountainflag!
echo !lakeflag!
echo !pondflag!
echo !swampflag!
)>"%worlddir%\Regions\%regionname%.txt"

echo %regionname%>>"%outputlocation%\%outputname% - Regions.txt"
set /a regionscount=%regionscount%+1
if "%regionscount%" neq "%numregionstomake%" goto regionbuilderloop
goto:eof

:regionborders
call :roll1d3
if "%roll%"=="1" set "direction1=north west"
if "%roll%"=="2" set "direction1=north"
if "%roll%"=="3" set "direction1=north east"
call :roll1d3
if "%roll%"=="1" set "direction2=north east"
if "%roll%"=="2" set "direction2=east"
if "%roll%"=="3" set "direction2=south east"
if "%direction1%"=="north east" if "%direction2%"=="north east" set "direction2=east"
call :roll1d3
if "%roll%"=="1" set "direction3=south east"
if "%roll%"=="2" set "direction3=south"
if "%roll%"=="3" set "direction3=south west"
if "%direction2%"=="south east" if "%direction3%"=="south east" set "direction3=south"
call :roll1d3
if "%roll%"=="1" set "direction4=south west"
if "%roll%"=="2" set "direction4=west"
if "%roll%"=="3" set "direction4=north west"
if "%direction3%"=="south west" if "%direction4%"=="south west" set "direction3=west"
if "%direction1%"=="north west" if "%direction4%"=="north west" set "direction2=west"

set /a roll=(%random% %% 7)+1
if "%roll%"=="1" (
	set fetchedfile=rivernames
	call :filefetch
	set "river=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "boundry1=the !river! !name!"
)
if "%roll%"=="2" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "boundry1=the !mountain! !name!"
)
if "%roll%"=="3" (
	set fetchedfile=mountainnames
	call :filefetch
	set "boundry1=the !name! hills"
)
if "%roll%"=="4" (
	set fetchedfile=lakenames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=laketypes
	call :filefetch
	set "boundry1=the !mountain! !name!"
)
if "%roll%"=="5" (
	set fetchedfile=%regionnametype1%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype1%
	call :filefetch
	set "boundry1=the !mountain! !name!"
)
if "%roll%"=="6" (
	set fetchedfile=%regionnametype2%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype2%
	call :filefetch
	set "boundry1=the !mountain! !name!"
)

if "%roll%"=="7" (
	set fetchedfile=%regionnametype3%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype3%
	call :filefetch
	set "boundry1=the !mountain! !name!"
)
set /a roll=(%random% %% 7)+1
if "%roll%"=="1" (
	set fetchedfile=rivernames
	call :filefetch
	set "river=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "boundry2=the !river! !name!"
)
if "%roll%"=="2" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "boundry2=the !mountain! !name!"
)
if "%roll%"=="3" (
	set fetchedfile=mountainnames
	call :filefetch
	set "boundry2=the !name! hills"
)
if "%roll%"=="4" (
	set fetchedfile=lakenames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=laketypes
	call :filefetch
	set "boundry2=the !mountain! !name!"
)
if "%roll%"=="5" (
	set fetchedfile=%regionnametype1%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype1%
	call :filefetch
	set "boundry2=the !mountain! !name!"
)
if "%roll%"=="6" (
	set fetchedfile=%regionnametype2%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype2%
	call :filefetch
	set "boundry2=the !mountain! !name!"
)

if "%roll%"=="7" (
	set fetchedfile=%regionnametype3%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype3%
	call :filefetch
	set "boundry2=the !mountain! !name!"
)
set /a roll=(%random% %% 7)+1
if "%roll%"=="1" (
	set fetchedfile=rivernames
	call :filefetch
	set "river=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "boundry3=the !river! !name!"
)
if "%roll%"=="2" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "boundry3=the !mountain! !name!"
)
if "%roll%"=="3" (
	set fetchedfile=mountainnames
	call :filefetch
	set "boundry3=the !name! hills"
)
if "%roll%"=="4" (
	set fetchedfile=lakenames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=laketypes
	call :filefetch
	set "boundry3=the !mountain! !name!"
)
if "%roll%"=="5" (
	set fetchedfile=%regionnametype1%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype1%
	call :filefetch
	set "boundry3=the !mountain! !name!"
)
if "%roll%"=="6" (
	set fetchedfile=%regionnametype2%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype2%
	call :filefetch
	set "boundry3=the !mountain! !name!"
)

if "%roll%"=="7" (
	set fetchedfile=%regionnametype3%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype3%
	call :filefetch
	set "boundry3=the !mountain! !name!"
)
set /a roll=(%random% %% 7)+1
if "%roll%"=="1" (
	set fetchedfile=rivernames
	call :filefetch
	set "river=!name!"
	set fetchedfile=rivertypes
	call :filefetch
	set "boundry4=the !river! !name!"
)
if "%roll%"=="2" (
	set fetchedfile=mountainnames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=mountaintypes
	call :filefetch
	set "boundry4=the !mountain! !name!"
)
if "%roll%"=="3" (
	set fetchedfile=mountainnames
	call :filefetch
	set "boundry4=the !name! hills"
)
if "%roll%"=="4" (
	set fetchedfile=lakenames
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=laketypes
	call :filefetch
	set "boundry4=the !mountain! !name!"
)
if "%roll%"=="5" (
	set fetchedfile=%regionnametype1%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype1%
	call :filefetch
	set "boundry4=the !mountain! !name!"
)
if "%roll%"=="6" (
	set fetchedfile=%regionnametype2%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype2%
	call :filefetch
	set "boundry4=the !mountain! !name!"
)

if "%roll%"=="7" (
	set fetchedfile=%regionnametype3%
	call :filefetch
	set "mountain=!name!"
	set fetchedfile=%regionbiometype3%
	call :filefetch
	set "boundry4=the !mountain! !name!"
)
set "regionsbordors=bordered to the %direction1% by %boundry1%, to the %direction2% by %boundry2%, to the %direction3% by %boundry3%, and to the %direction4% by %boundry4%"
goto:eof

:regionterraindatasheet
if "%terrain%"=="cold" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="sparse" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="thick" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="mountainious" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold and flat" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold and sparse" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold and thick" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold and mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold, flat, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold, sparse, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold, thick, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold, hilly, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="cold, mountainious, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat, frigid, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat, sparse, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=0
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat, thick, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat, rough, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat and frigid" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat and sparse" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="flat and thick" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="frigid and sparse" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid and thick" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid, sparse, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid, thick, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid, hilly, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid and mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="sparse and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=0
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="sparse and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="sparse and mountanious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=0
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="frigid, mountainious, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="sparse, hilly, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="sparse, mountanious, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="overgrown" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="dence" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="overgrown and dence" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="overgrown and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="overgrown and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="overgrown and mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="overgrown, mountainious, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="overgrown, hilly, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=0
)
if "%terrain%"=="dence and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="dence and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="dence and mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="dence, hilly, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="dence, mountainious, and rough" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="thick and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="thick and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="thick and mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="thick, hilly, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="thick, mountainious, and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="hot" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="sandy" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="rough and hot" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="rough and sandy" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="rough and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="rough mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="hot and sandy" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="hot and hilly" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="hot and flat" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="sandy and mountainious" (
	set riverflag=1
	set hillflag=0
	set mountainflag=1
	set lakeflag=0
	set pondflag=0
	set swampflag=0
)
if "%terrain%"=="lush" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="hilly and rough" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="hilly and lush" (
	set riverflag=1
	set hillflag=1
	set mountainflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="rough and lush" (
	set riverflag=1
	set hillflag=1
	set mountainflag=1
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
if "%terrain%"=="flat and lush" (
	set riverflag=1
	set hillflag=0
	set mountainflag=0
	set valleyflag=0
	set lakeflag=1
	set pondflag=1
	set swampflag=1
)
goto:eof





:regionlister
cd /D "%worlddir%\Nations\%nationname%"

set "cmd=findstr /R /N "^^" "%nationname% - Regions.txt" | find /C ":""
for /f %%k in ('!cmd!') do set totalregions=%%k
set regionnum=0

set counter=0
for /F "tokens=* delims=" %%k in ('Type "%nationname% - Regions.txt"') do (
	set /a counter+=1
	set "rl2output[!counter!]=%%k"
)
For /L %%l in (1,1,%Counter%) Do (
	set regiontolist=!rl2output[%%l]!
	call :theregioncompiler
)

cd /D "%~dp0data"

set "nationdiscription=The %nationname% is primarily a %generaldiscriuptor% land. It's major holdings are %regionsinnation%."
goto:eof


:theregioncompiler
set /a regionnum=%regionnum%+1
if "%regionnum%"=="1" set "regionsinnation=%regiontolist%"
if "%regionnum%" gtr "1" if "%regionnum%" neq "%totalregions%" set "regionsinnation=%regionsinnation%, %regiontolist%"
if "%regionnum%"=="%totalregions%" set "regionsinnation=%regionsinnation%, and %regiontolist%"
goto:eof

:orginloader
set /p nationorgin=<"%recorddir%\%nationname% - Orginstory.txt"
goto:eof

:newnationtracker
set /a newnationcount=%newnationcount%+1
goto:eof

:: --- Dice ---

:roll1d100
set "roll="
set /a roll=(%RANDOM% %% 100)+1
goto:eof

:roll1d100B
set "roll2="
set /a roll2=(%RANDOM% %% 100)+1
goto:eof


:roll1d30
set "roll="
set /a roll =(%RANDOM% %% 30)+1
goto:eof

:roll1d28
set "roll="
set /a roll =(%RANDOM% %% 28)+1
goto:eof

:roll1d20
set "roll="
set /a roll=(%RANDOM% %% 20)+1
goto:eof

:roll1d16
set "roll="
set /a roll=(%RANDOM% %% 16)+1
goto:eof

:roll1d14
set "roll="
set /a roll=(%random% %% 14)+1
goto:eof

:roll1d11
set "roll="
set /a roll=(%RANDOM% %% 4)+1
goto:eof

:roll1d10
set "roll="
set /a roll=(%RANDOM% %% 6)+1
goto:eof

:roll1d9
set "roll="
set /a roll=(%RANDOM% %% 9)+1
goto:eof

:roll1d8
set "roll="
set /a roll=(%RANDOM% %% 8)+1
goto:eof

:roll2d4
set "die1="
set "die2="
set "dieroll="
set /a die1=(%RANDOM% %% 4)+1
set /a die2=(%RANDOM% %% 4)+1
set /a roll=%die1%+%die2%
goto:eof

:roll1d7
set "roll="
set /a roll=(%RANDOM% %% 7)+1
goto:eof

:roll1d6
set "roll="
set /a roll=(%RANDOM% %% 6)+1
goto:eof

:roll1d6a
set "roll2="
set /a roll2=(%RANDOM% %% 6)+1
goto:eof

:roll1d5
set "roll="
set /a roll=(%RANDOM% %% 5)+1
goto:eof

:roll1d5a
set "roll2="
set /a roll2=(%RANDOM% %% 5)+1
goto:eof

:roll1d4
set "roll="
set /a roll=(%RANDOM% %% 4)+1
goto:eof

:roll1d4a
set "subroll="
set /a subroll=(%RANDOM% %% 4)+1
goto:eof

:roll1d3
set "roll="
set /a roll=(%RANDOM% %% 3)+1
goto:eof

:roll1d3b
set "roll3="
set /a roll3=(%RANDOM% %% 3)+1
goto:eof

:roll1d2
set /a roll=(%random% %% 2)+1
goto:eof

:roll1d10T
set "roll="
set /a roll=((%random% %% 10)+1)+%sizemod%
goto:eof

:roll1d20T
set "roll="
set /a roll=((%random% %% 20)+1)+%sizemod%
goto:eof

:roll3d6
set "dieroll="
set /a dieroll=(%RANDOM% %% 16)+3
goto:eof

:roll623
set "dice1="
set "dice2="
set "dice3="
set /a dice1=(%RANDOM% %% 6)+1
set /a dice2=(%RANDOM% %% 2)+1
set /a dice3=(%RANDOM% %% 3)+1
goto:eof

:roll4d3
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set /a dice1=(%RANDOM% %% 3)+1
set /a dice2=(%RANDOM% %% 3)+1
set /a dice3=(%RANDOM% %% 3)+1
set /a dice4=(%RANDOM% %% 3)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%
goto:eof

:roll3d5
set "dice1="
set "dice2="
set "dice3="
set /a dice1=(%RANDOM% %% 5)+1
set /a dice2=(%RANDOM% %% 5)+1
set /a dice3=(%RANDOM% %% 5)+1
set /a roll=%dice1%+%dice2%+%dice3%
goto:eof

:roll4d7
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set /a dice1=(%RANDOM% %% 7)+1
set /a dice2=(%RANDOM% %% 7)+1
set /a dice3=(%RANDOM% %% 7)+1
set /a dice4=(%RANDOM% %% 7)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%
goto:eof

:roll6d6
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dice5="
set "dice6="
set /a dice1=(%RANDOM% %% 6)+1
set /a dice2=(%RANDOM% %% 6)+1
set /a dice3=(%RANDOM% %% 6)+1
set /a dice4=(%RANDOM% %% 6)+1
set /a dice5=(%RANDOM% %% 6)+1
set /a dice6=(%RANDOM% %% 6)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%+%dice5%+%dice6%
goto:eof

:roll5d7
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dice5="
set /a dice1=(%RANDOM% %% 7)+1
set /a dice2=(%RANDOM% %% 7)+1
set /a dice3=(%RANDOM% %% 7)+1
set /a dice4=(%RANDOM% %% 7)+1
set /a dice5=(%RANDOM% %% 7)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%+%dice5%
goto:eof

:roll8d7
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dice5="
set "dice6="
set "dice7="
set "dice8="
set /a dice1=(%RANDOM% %% 7)+1
set /a dice2=(%RANDOM% %% 7)+1
set /a dice3=(%RANDOM% %% 7)+1
set /a dice4=(%RANDOM% %% 7)+1
set /a dice5=(%RANDOM% %% 7)+1
set /a dice6=(%RANDOM% %% 7)+1
set /a dice7=(%RANDOM% %% 7)+1
set /a dice8=(%RANDOM% %% 7)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%+%dice5%+%dice6%+%dice7%+%dice8%
goto:eof

:roll7d9
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dice5="
set "dice6="
set "dice7="
set /a dice1=(%RANDOM% %% 9)+1
set /a dice2=(%RANDOM% %% 9)+1
set /a dice3=(%RANDOM% %% 9)+1
set /a dice4=(%RANDOM% %% 9)+1
set /a dice5=(%RANDOM% %% 9)+1
set /a dice6=(%RANDOM% %% 9)+1
set /a dice7=(%RANDOM% %% 9)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%+%dice5%+%dice6%+%dice7%
goto:eof

:roll9d9
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dice5="
set "dice6="
set "dice7="
set "dice8="
set "dice9="
set /a dice1=(%RANDOM% %% 9)+1
set /a dice2=(%RANDOM% %% 9)+1
set /a dice3=(%RANDOM% %% 9)+1
set /a dice4=(%RANDOM% %% 9)+1
set /a dice5=(%RANDOM% %% 9)+1
set /a dice6=(%RANDOM% %% 9)+1
set /a dice7=(%RANDOM% %% 9)+1
set /a dice8=(%RANDOM% %% 9)+1
set /a dice9=(%RANDOM% %% 9)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%+%dice5%+%dice6%+%dice7%+%dice8%+%dice9%
goto:eof

:roll6d18
set "dice1="
set "dice2="
set "dice3="
set "dice4="
set "dice5="
set "dice6="
set /a dice1=(%RANDOM% %% 18)+1
set /a dice2=(%RANDOM% %% 18)+1
set /a dice3=(%RANDOM% %% 18)+1
set /a dice4=(%RANDOM% %% 18)+1
set /a dice5=(%RANDOM% %% 18)+1
set /a dice6=(%RANDOM% %% 18)+1
set /a roll=%dice1%+%dice2%+%dice3%+%dice4%+%dice5%+%dice6%
goto:eof
